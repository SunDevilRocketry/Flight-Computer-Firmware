#include "main.h"
/*******************************************************************************
*                                                                              *
* FILE:                                                                        * 
* 		       imu_calib.c                                                     *
*                                                                              *
* DESCRIPTION:                                                                 * 
* 		       Calibrate inertial measuring unit.                              *
*                                                                              *
*******************************************************************************/

/*------------------------------------------------------------------------------
 Standard Includes                                                                     
------------------------------------------------------------------------------*/
#include "led.h"
#include "main.h"
#include "usb.h"
/*------------------------------------------------------------------------------
Instantiations                                                                  
------------------------------------------------------------------------------*/
extern USB_STATUS command_status;

/*------------------------------------------------------------------------------
imuCalibration                                                                  
------------------------------------------------------------------------------*/
void imuCalibration(FSM_STATE *pState, STATE_OPCODE *signalIn)
{
    if (*pState == FSM_IMU_CALIB_STATE) 
    {
        // Critical section
        // TODO: Calibrate IMU
        led_set_color(LED_BLUE);

        // Next State
        if (command_status == USB_OK){
            if (*signalIn == FSM_IDLE_OPCODE){
                *pState = FSM_IDLE_STATE;
            }
        }
    }
}



/*******************************************************************************
* END OF FILE                                                                  * 
*******************************************************************************/