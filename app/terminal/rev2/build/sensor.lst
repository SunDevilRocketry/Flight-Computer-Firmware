ARM GAS  /tmp/ccN84Bm3.s 			page 1


   1              		.cpu cortex-m7
   2              		.arch armv7e-m
   3              		.fpu fpv5-d16
   4              		.eabi_attribute 28, 1
   5              		.eabi_attribute 20, 1
   6              		.eabi_attribute 21, 1
   7              		.eabi_attribute 23, 3
   8              		.eabi_attribute 24, 1
   9              		.eabi_attribute 25, 1
  10              		.eabi_attribute 26, 1
  11              		.eabi_attribute 30, 1
  12              		.eabi_attribute 34, 1
  13              		.eabi_attribute 18, 4
  14              		.file	"sensor.c"
  15              		.text
  16              	.Ltext0:
  17              		.cfi_sections	.debug_frame
  18              		.file 1 "../../../mod/sensor/sensor.c"
  19              		.section	.text.sensor_map,"ax",%progbits
  20              		.align	1
  21              		.syntax unified
  22              		.thumb
  23              		.thumb_func
  25              	sensor_map:
  26              	.LVL0:
  27              	.LFB148:
   1:../../../mod/sensor/sensor.c **** /*******************************************************************************
   2:../../../mod/sensor/sensor.c **** *
   3:../../../mod/sensor/sensor.c **** * FILE: 
   4:../../../mod/sensor/sensor.c **** * 		sensor.c
   5:../../../mod/sensor/sensor.c **** *
   6:../../../mod/sensor/sensor.c **** * DESCRIPTION: 
   7:../../../mod/sensor/sensor.c **** * 		Contains functions to interface between sdec terminal commands and SDR
   8:../../../mod/sensor/sensor.c **** *       sensor APIs
   9:../../../mod/sensor/sensor.c **** *
  10:../../../mod/sensor/sensor.c **** *******************************************************************************/
  11:../../../mod/sensor/sensor.c **** 
  12:../../../mod/sensor/sensor.c **** 
  13:../../../mod/sensor/sensor.c **** /*------------------------------------------------------------------------------
  14:../../../mod/sensor/sensor.c ****  Standard Includes                                                                     
  15:../../../mod/sensor/sensor.c **** ------------------------------------------------------------------------------*/
  16:../../../mod/sensor/sensor.c **** #include <string.h>
  17:../../../mod/sensor/sensor.c **** #include <stdbool.h>
  18:../../../mod/sensor/sensor.c **** 
  19:../../../mod/sensor/sensor.c **** 
  20:../../../mod/sensor/sensor.c **** /*------------------------------------------------------------------------------
  21:../../../mod/sensor/sensor.c ****  MCU Pins 
  22:../../../mod/sensor/sensor.c **** ------------------------------------------------------------------------------*/
  23:../../../mod/sensor/sensor.c **** #if   defined( FLIGHT_COMPUTER   )
  24:../../../mod/sensor/sensor.c **** 	#include "sdr_pin_defines_A0002.h"
  25:../../../mod/sensor/sensor.c **** #elif defined( ENGINE_CONTROLLER )
  26:../../../mod/sensor/sensor.c **** 	#include "sdr_pin_defines_L0002.h"
  27:../../../mod/sensor/sensor.c **** #endif 
  28:../../../mod/sensor/sensor.c **** 
  29:../../../mod/sensor/sensor.c **** 
  30:../../../mod/sensor/sensor.c **** /*------------------------------------------------------------------------------
  31:../../../mod/sensor/sensor.c ****  Project Includes                                                                     
ARM GAS  /tmp/ccN84Bm3.s 			page 2


  32:../../../mod/sensor/sensor.c **** ------------------------------------------------------------------------------*/
  33:../../../mod/sensor/sensor.c **** #include "main.h"
  34:../../../mod/sensor/sensor.c **** #if defined( FLIGHT_COMPUTER )
  35:../../../mod/sensor/sensor.c **** 	#include "imu.h"
  36:../../../mod/sensor/sensor.c **** 	#include "baro.h"
  37:../../../mod/sensor/sensor.c **** #endif
  38:../../../mod/sensor/sensor.c **** #include "usb.h"
  39:../../../mod/sensor/sensor.c **** #include "sensor.h"
  40:../../../mod/sensor/sensor.c **** #if defined( ENGINE_CONTROLLER )
  41:../../../mod/sensor/sensor.c **** 	#include "pressure.h"
  42:../../../mod/sensor/sensor.c **** 	#include "loadcell.h"
  43:../../../mod/sensor/sensor.c **** 	#include "temp.h"
  44:../../../mod/sensor/sensor.c **** #endif
  45:../../../mod/sensor/sensor.c **** 
  46:../../../mod/sensor/sensor.c **** 
  47:../../../mod/sensor/sensor.c **** /*------------------------------------------------------------------------------
  48:../../../mod/sensor/sensor.c ****  Global Variables 
  49:../../../mod/sensor/sensor.c **** ------------------------------------------------------------------------------*/
  50:../../../mod/sensor/sensor.c **** 
  51:../../../mod/sensor/sensor.c **** #if defined( TERMINAL )
  52:../../../mod/sensor/sensor.c **** /* Hash table of sensor readout sizes and offsets */
  53:../../../mod/sensor/sensor.c **** static SENSOR_DATA_SIZE_OFFSETS sensor_size_offsets_table[ NUM_SENSORS ];
  54:../../../mod/sensor/sensor.c **** #endif
  55:../../../mod/sensor/sensor.c **** 
  56:../../../mod/sensor/sensor.c **** 
  57:../../../mod/sensor/sensor.c **** /*------------------------------------------------------------------------------
  58:../../../mod/sensor/sensor.c ****  Internal function prototypes 
  59:../../../mod/sensor/sensor.c **** ------------------------------------------------------------------------------*/
  60:../../../mod/sensor/sensor.c **** 
  61:../../../mod/sensor/sensor.c **** #if defined( TERMINAL )
  62:../../../mod/sensor/sensor.c **** /* Sensor ID to size and pointer mapping */
  63:../../../mod/sensor/sensor.c **** void static sensor_map
  64:../../../mod/sensor/sensor.c **** 	(
  65:../../../mod/sensor/sensor.c **** 	SENSOR_DATA* sensor_data_ptr,
  66:../../../mod/sensor/sensor.c **** 	SENSOR_ID    sensor_id      ,
  67:../../../mod/sensor/sensor.c **** 	uint8_t**    sensorid_pptr  ,
  68:../../../mod/sensor/sensor.c **** 	size_t*      sensor_size
  69:../../../mod/sensor/sensor.c **** 	);
  70:../../../mod/sensor/sensor.c **** 
  71:../../../mod/sensor/sensor.c **** /* Extract bytes for export from SENSOR_ID struct */
  72:../../../mod/sensor/sensor.c **** void static extract_sensor_bytes 
  73:../../../mod/sensor/sensor.c **** 	(
  74:../../../mod/sensor/sensor.c **** 	SENSOR_DATA* sensor_data_ptr      ,
  75:../../../mod/sensor/sensor.c **** 	SENSOR_ID*   sensor_ids_ptr       ,
  76:../../../mod/sensor/sensor.c **** 	uint8_t      num_sensors          ,
  77:../../../mod/sensor/sensor.c **** 	uint8_t*     sensor_data_bytes_ptr,
  78:../../../mod/sensor/sensor.c **** 	uint8_t*     num_sensor_bytes
  79:../../../mod/sensor/sensor.c **** 	);
  80:../../../mod/sensor/sensor.c **** #endif
  81:../../../mod/sensor/sensor.c **** 
  82:../../../mod/sensor/sensor.c **** 
  83:../../../mod/sensor/sensor.c **** /*------------------------------------------------------------------------------
  84:../../../mod/sensor/sensor.c ****  API Functions 
  85:../../../mod/sensor/sensor.c **** ------------------------------------------------------------------------------*/
  86:../../../mod/sensor/sensor.c **** 
  87:../../../mod/sensor/sensor.c **** #if defined( TERMINAL )
  88:../../../mod/sensor/sensor.c **** /*******************************************************************************
ARM GAS  /tmp/ccN84Bm3.s 			page 3


  89:../../../mod/sensor/sensor.c **** *                                                                              *
  90:../../../mod/sensor/sensor.c **** * PROCEDURE:                                                                   *
  91:../../../mod/sensor/sensor.c **** * 		sensor_init                                                            *
  92:../../../mod/sensor/sensor.c **** *                                                                              *
  93:../../../mod/sensor/sensor.c **** * DESCRIPTION:                                                                 *
  94:../../../mod/sensor/sensor.c **** *       Initialize the sensor module                                           *
  95:../../../mod/sensor/sensor.c **** *                                                                              *
  96:../../../mod/sensor/sensor.c **** *******************************************************************************/
  97:../../../mod/sensor/sensor.c **** void sensor_init 
  98:../../../mod/sensor/sensor.c **** 	(
  99:../../../mod/sensor/sensor.c **** 	void
 100:../../../mod/sensor/sensor.c **** 	)
 101:../../../mod/sensor/sensor.c **** {
 102:../../../mod/sensor/sensor.c **** /* Setup the sensor id hash table */
 103:../../../mod/sensor/sensor.c **** #if defined( FLIGHT_COMPUTER )
 104:../../../mod/sensor/sensor.c **** 	/* Sensor offsets */
 105:../../../mod/sensor/sensor.c **** 	sensor_size_offsets_table[ 0  ].offset = 0;  /* SENSOR_ACCX  */
 106:../../../mod/sensor/sensor.c **** 	sensor_size_offsets_table[ 1  ].offset = 2;  /* SENSOR_ACCY  */
 107:../../../mod/sensor/sensor.c **** 	sensor_size_offsets_table[ 2  ].offset = 4;  /* SENSOR_ACCZ  */
 108:../../../mod/sensor/sensor.c **** 	sensor_size_offsets_table[ 3  ].offset = 6;  /* SENSOR_GYROX */
 109:../../../mod/sensor/sensor.c **** 	sensor_size_offsets_table[ 4  ].offset = 8;  /* SENSOR_GYROY */
 110:../../../mod/sensor/sensor.c **** 	sensor_size_offsets_table[ 5  ].offset = 10; /* SENSOR_GYROZ */
 111:../../../mod/sensor/sensor.c **** 	sensor_size_offsets_table[ 6  ].offset = 12; /* SENSOR_MAGX  */
 112:../../../mod/sensor/sensor.c **** 	sensor_size_offsets_table[ 7  ].offset = 14; /* SENSOR_MAGY  */
 113:../../../mod/sensor/sensor.c **** 	sensor_size_offsets_table[ 8  ].offset = 16; /* SENSOR_MAGZ  */
 114:../../../mod/sensor/sensor.c **** 	sensor_size_offsets_table[ 9  ].offset = 18; /* SENSOR_IMUT  */
 115:../../../mod/sensor/sensor.c **** 	sensor_size_offsets_table[ 10 ].offset = 20; /* SENSOR_PRES  */
 116:../../../mod/sensor/sensor.c **** 	sensor_size_offsets_table[ 11 ].offset = 24; /* SENSOR_TEMP  */
 117:../../../mod/sensor/sensor.c **** 
 118:../../../mod/sensor/sensor.c **** 	/* Sensor Sizes   */
 119:../../../mod/sensor/sensor.c **** 	sensor_size_offsets_table[ 0  ].size   = 2;  /* SENSOR_ACCX  */
 120:../../../mod/sensor/sensor.c **** 	sensor_size_offsets_table[ 1  ].size   = 2;  /* SENSOR_ACCY  */
 121:../../../mod/sensor/sensor.c **** 	sensor_size_offsets_table[ 2  ].size   = 2;  /* SENSOR_ACCZ  */
 122:../../../mod/sensor/sensor.c **** 	sensor_size_offsets_table[ 3  ].size   = 2;  /* SENSOR_GYROX */
 123:../../../mod/sensor/sensor.c **** 	sensor_size_offsets_table[ 4  ].size   = 2;  /* SENSOR_GYROY */
 124:../../../mod/sensor/sensor.c **** 	sensor_size_offsets_table[ 5  ].size   = 2;  /* SENSOR_GYROZ */
 125:../../../mod/sensor/sensor.c **** 	sensor_size_offsets_table[ 6  ].size   = 2;  /* SENSOR_MAGX  */
 126:../../../mod/sensor/sensor.c **** 	sensor_size_offsets_table[ 7  ].size   = 2;  /* SENSOR_MAGY  */
 127:../../../mod/sensor/sensor.c **** 	sensor_size_offsets_table[ 8  ].size   = 2;  /* SENSOR_MAGZ  */
 128:../../../mod/sensor/sensor.c **** 	sensor_size_offsets_table[ 9  ].size   = 2;  /* SENSOR_IMUT  */
 129:../../../mod/sensor/sensor.c **** 	sensor_size_offsets_table[ 10 ].size   = 4;  /* SENSOR_PRES  */
 130:../../../mod/sensor/sensor.c **** 	sensor_size_offsets_table[ 11 ].size   = 4;  /* SENSOR_TEMP  */
 131:../../../mod/sensor/sensor.c **** #elif defined( ENGINE_CONTROLLER )
 132:../../../mod/sensor/sensor.c **** 	/* Sensor offsets */
 133:../../../mod/sensor/sensor.c **** 	sensor_size_offsets_table[ 0  ].offset = 0;  /* SENSOR_PT0  */
 134:../../../mod/sensor/sensor.c **** 	sensor_size_offsets_table[ 1  ].offset = 4;  /* SENSOR_PT1  */
 135:../../../mod/sensor/sensor.c **** 	sensor_size_offsets_table[ 2  ].offset = 8;  /* SENSOR_PT2  */
 136:../../../mod/sensor/sensor.c **** 	sensor_size_offsets_table[ 3  ].offset = 12; /* SENSOR_PT3  */
 137:../../../mod/sensor/sensor.c **** 	sensor_size_offsets_table[ 4  ].offset = 16; /* SENSOR_PT4  */
 138:../../../mod/sensor/sensor.c **** 	sensor_size_offsets_table[ 5  ].offset = 20; /* SENSOR_PT5  */
 139:../../../mod/sensor/sensor.c **** 	sensor_size_offsets_table[ 6  ].offset = 24; /* SENSOR_PT6  */
 140:../../../mod/sensor/sensor.c **** 	sensor_size_offsets_table[ 7  ].offset = 28; /* SENSOR_PT7  */
 141:../../../mod/sensor/sensor.c **** 	sensor_size_offsets_table[ 8  ].offset = 36; /* SENSOR_TC   */
 142:../../../mod/sensor/sensor.c **** 	sensor_size_offsets_table[ 9  ].offset = 32; /* SENSOR_LC   */
 143:../../../mod/sensor/sensor.c **** 
 144:../../../mod/sensor/sensor.c **** 	/* Sensor Sizes   */
 145:../../../mod/sensor/sensor.c **** 	sensor_size_offsets_table[ 0  ].size   = 4;  /* SENSOR_PT0  */
ARM GAS  /tmp/ccN84Bm3.s 			page 4


 146:../../../mod/sensor/sensor.c **** 	sensor_size_offsets_table[ 1  ].size   = 4;  /* SENSOR_PT1  */
 147:../../../mod/sensor/sensor.c **** 	sensor_size_offsets_table[ 2  ].size   = 4;  /* SENSOR_PT2  */
 148:../../../mod/sensor/sensor.c **** 	sensor_size_offsets_table[ 3  ].size   = 4;  /* SENSOR_PT3  */
 149:../../../mod/sensor/sensor.c **** 	sensor_size_offsets_table[ 4  ].size   = 4;  /* SENSOR_PT4  */
 150:../../../mod/sensor/sensor.c **** 	sensor_size_offsets_table[ 5  ].size   = 4;  /* SENSOR_PT5  */
 151:../../../mod/sensor/sensor.c **** 	sensor_size_offsets_table[ 6  ].size   = 4;  /* SENSOR_PT6  */
 152:../../../mod/sensor/sensor.c **** 	sensor_size_offsets_table[ 7  ].size   = 4;  /* SENSOR_PT7  */
 153:../../../mod/sensor/sensor.c **** 	sensor_size_offsets_table[ 8  ].size   = 4;  /* SENSOR_TC   */
 154:../../../mod/sensor/sensor.c **** 	sensor_size_offsets_table[ 9  ].size   = 4;  /* SENSOR_LC   */
 155:../../../mod/sensor/sensor.c **** #endif
 156:../../../mod/sensor/sensor.c **** 
 157:../../../mod/sensor/sensor.c **** } /* sensor_init */
 158:../../../mod/sensor/sensor.c **** 
 159:../../../mod/sensor/sensor.c **** 
 160:../../../mod/sensor/sensor.c **** /*******************************************************************************
 161:../../../mod/sensor/sensor.c **** *                                                                              *
 162:../../../mod/sensor/sensor.c **** * PROCEDURE:                                                                   *
 163:../../../mod/sensor/sensor.c **** * 		sensor_cmd_execute                                                     *
 164:../../../mod/sensor/sensor.c **** *                                                                              *
 165:../../../mod/sensor/sensor.c **** * DESCRIPTION:                                                                 *
 166:../../../mod/sensor/sensor.c **** *       Executes a sensor subcommand                                           *
 167:../../../mod/sensor/sensor.c **** *                                                                              *
 168:../../../mod/sensor/sensor.c **** *******************************************************************************/
 169:../../../mod/sensor/sensor.c **** SENSOR_STATUS sensor_cmd_execute 
 170:../../../mod/sensor/sensor.c **** 	(
 171:../../../mod/sensor/sensor.c ****     uint8_t subcommand 
 172:../../../mod/sensor/sensor.c ****     )
 173:../../../mod/sensor/sensor.c **** {
 174:../../../mod/sensor/sensor.c **** 
 175:../../../mod/sensor/sensor.c **** /*------------------------------------------------------------------------------
 176:../../../mod/sensor/sensor.c ****  Local Variables  
 177:../../../mod/sensor/sensor.c **** ------------------------------------------------------------------------------*/
 178:../../../mod/sensor/sensor.c **** SENSOR_STATUS sensor_status;                         /* Status indicating if 
 179:../../../mod/sensor/sensor.c ****                                                        subcommand function 
 180:../../../mod/sensor/sensor.c ****                                                        returned properly      */
 181:../../../mod/sensor/sensor.c **** USB_STATUS    usb_status;                            /* USB return codes      */
 182:../../../mod/sensor/sensor.c **** SENSOR_DATA   sensor_data;                           /* Struct with all sensor 
 183:../../../mod/sensor/sensor.c ****                                                         data                  */
 184:../../../mod/sensor/sensor.c **** uint8_t       sensor_data_bytes[ SENSOR_DATA_SIZE ]; /* Byte array with sensor 
 185:../../../mod/sensor/sensor.c ****                                                        readouts               */
 186:../../../mod/sensor/sensor.c **** uint8_t       num_sensor_bytes = SENSOR_DATA_SIZE;   /* Size of data in bytes */
 187:../../../mod/sensor/sensor.c **** uint8_t       num_sensors;                           /* Number of sensors to 
 188:../../../mod/sensor/sensor.c ****                                                         use for polling       */
 189:../../../mod/sensor/sensor.c **** uint8_t       poll_sensors[ SENSOR_MAX_NUM_POLL ];   /* Codes for sensors to
 190:../../../mod/sensor/sensor.c ****                                                         be polled             */
 191:../../../mod/sensor/sensor.c **** uint8_t       sensor_poll_cmd;                       /* Command codes used by 
 192:../../../mod/sensor/sensor.c ****                                                         sensor poll           */
 193:../../../mod/sensor/sensor.c **** 
 194:../../../mod/sensor/sensor.c **** /*------------------------------------------------------------------------------
 195:../../../mod/sensor/sensor.c ****  Initializations  
 196:../../../mod/sensor/sensor.c **** ------------------------------------------------------------------------------*/
 197:../../../mod/sensor/sensor.c **** usb_status      = USB_OK;
 198:../../../mod/sensor/sensor.c **** sensor_status   = SENSOR_OK;
 199:../../../mod/sensor/sensor.c **** num_sensors     = 0;
 200:../../../mod/sensor/sensor.c **** sensor_poll_cmd = 0;
 201:../../../mod/sensor/sensor.c **** memset( &sensor_data_bytes[0], 0, sizeof( sensor_data_bytes ) );
 202:../../../mod/sensor/sensor.c **** memset( &sensor_data         , 0, sizeof( sensor_data       ) );
ARM GAS  /tmp/ccN84Bm3.s 			page 5


 203:../../../mod/sensor/sensor.c **** memset( &poll_sensors[0]     , 0, sizeof( poll_sensors      ) );
 204:../../../mod/sensor/sensor.c **** 
 205:../../../mod/sensor/sensor.c **** 
 206:../../../mod/sensor/sensor.c **** /*------------------------------------------------------------------------------
 207:../../../mod/sensor/sensor.c ****  Implementation 
 208:../../../mod/sensor/sensor.c **** ------------------------------------------------------------------------------*/
 209:../../../mod/sensor/sensor.c **** switch ( subcommand )
 210:../../../mod/sensor/sensor.c **** 	{
 211:../../../mod/sensor/sensor.c **** 	/*--------------------------------------------------------------------------
 212:../../../mod/sensor/sensor.c **** 	 SENSOR POLL 
 213:../../../mod/sensor/sensor.c **** 	--------------------------------------------------------------------------*/
 214:../../../mod/sensor/sensor.c ****     case SENSOR_POLL_CODE:
 215:../../../mod/sensor/sensor.c **** 		{
 216:../../../mod/sensor/sensor.c **** 		/* Determine the number of sensors to poll */
 217:../../../mod/sensor/sensor.c **** 		usb_status = usb_receive( &num_sensors, 
 218:../../../mod/sensor/sensor.c **** 		                          sizeof( num_sensors ), 
 219:../../../mod/sensor/sensor.c **** 								  HAL_DEFAULT_TIMEOUT );
 220:../../../mod/sensor/sensor.c **** 		if ( usb_status != USB_OK )
 221:../../../mod/sensor/sensor.c **** 			{
 222:../../../mod/sensor/sensor.c **** 			return SENSOR_USB_FAIL;
 223:../../../mod/sensor/sensor.c **** 			}
 224:../../../mod/sensor/sensor.c **** 
 225:../../../mod/sensor/sensor.c **** 		/* Determine which sensors to poll */
 226:../../../mod/sensor/sensor.c **** 		usb_status = usb_receive( &poll_sensors[0],
 227:../../../mod/sensor/sensor.c **** 		                          num_sensors     , 
 228:../../../mod/sensor/sensor.c ****                                   HAL_SENSOR_TIMEOUT );
 229:../../../mod/sensor/sensor.c **** 		if ( usb_status != USB_OK )
 230:../../../mod/sensor/sensor.c **** 			{
 231:../../../mod/sensor/sensor.c **** 			return SENSOR_USB_FAIL;
 232:../../../mod/sensor/sensor.c **** 			}
 233:../../../mod/sensor/sensor.c **** 
 234:../../../mod/sensor/sensor.c **** 		/* Receive initiating command code  */
 235:../../../mod/sensor/sensor.c **** 		usb_status = usb_receive( &sensor_poll_cmd,
 236:../../../mod/sensor/sensor.c **** 		                           sizeof( sensor_poll_cmd ),
 237:../../../mod/sensor/sensor.c **** 								   HAL_DEFAULT_TIMEOUT );
 238:../../../mod/sensor/sensor.c **** 		if      ( usb_status      != USB_OK            )
 239:../../../mod/sensor/sensor.c **** 			{
 240:../../../mod/sensor/sensor.c **** 			return SENSOR_USB_FAIL; /* USB error */
 241:../../../mod/sensor/sensor.c **** 			}
 242:../../../mod/sensor/sensor.c **** 		else if ( sensor_poll_cmd != SENSOR_POLL_START )
 243:../../../mod/sensor/sensor.c **** 			{
 244:../../../mod/sensor/sensor.c **** 			/* SDEC fails to initiate sensor poll */
 245:../../../mod/sensor/sensor.c **** 			return SENSOR_POLL_FAIL_TO_START;
 246:../../../mod/sensor/sensor.c **** 			}
 247:../../../mod/sensor/sensor.c **** 
 248:../../../mod/sensor/sensor.c **** 		/* Start polling sensors */
 249:../../../mod/sensor/sensor.c **** 		while ( sensor_poll_cmd != SENSOR_POLL_STOP )
 250:../../../mod/sensor/sensor.c **** 			{
 251:../../../mod/sensor/sensor.c **** 			/* Get command code */
 252:../../../mod/sensor/sensor.c **** 			usb_status = usb_receive( &sensor_poll_cmd         ,
 253:../../../mod/sensor/sensor.c **** 			                          sizeof( sensor_poll_cmd ),
 254:../../../mod/sensor/sensor.c **** 									  HAL_DEFAULT_TIMEOUT );
 255:../../../mod/sensor/sensor.c **** 			if ( usb_status != USB_OK ) 
 256:../../../mod/sensor/sensor.c **** 				{
 257:../../../mod/sensor/sensor.c **** 				return SENSOR_USB_FAIL;
 258:../../../mod/sensor/sensor.c **** 				}
 259:../../../mod/sensor/sensor.c **** 			
ARM GAS  /tmp/ccN84Bm3.s 			page 6


 260:../../../mod/sensor/sensor.c **** 			/* Execute command */
 261:../../../mod/sensor/sensor.c **** 			switch ( sensor_poll_cmd )
 262:../../../mod/sensor/sensor.c **** 				{
 263:../../../mod/sensor/sensor.c **** 
 264:../../../mod/sensor/sensor.c **** 				/* Poll Sensors */
 265:../../../mod/sensor/sensor.c **** 				case SENSOR_POLL_REQUEST:
 266:../../../mod/sensor/sensor.c **** 					{
 267:../../../mod/sensor/sensor.c **** 					sensor_status = sensor_poll( &sensor_data    , 
 268:../../../mod/sensor/sensor.c **** 												 &poll_sensors[0],
 269:../../../mod/sensor/sensor.c **** 												 num_sensors );
 270:../../../mod/sensor/sensor.c **** 					if ( sensor_status != SENSOR_OK )
 271:../../../mod/sensor/sensor.c **** 						{
 272:../../../mod/sensor/sensor.c **** 						return SENSOR_POLL_FAIL;
 273:../../../mod/sensor/sensor.c **** 						}
 274:../../../mod/sensor/sensor.c **** 					else
 275:../../../mod/sensor/sensor.c **** 						{
 276:../../../mod/sensor/sensor.c **** 						/* Copy over sensor data into buffer */
 277:../../../mod/sensor/sensor.c **** 						extract_sensor_bytes( &sensor_data, 
 278:../../../mod/sensor/sensor.c **** 						                      &poll_sensors[0],
 279:../../../mod/sensor/sensor.c **** 											  num_sensors     ,
 280:../../../mod/sensor/sensor.c **** 											  &sensor_data_bytes[0],
 281:../../../mod/sensor/sensor.c **** 											  &num_sensor_bytes );
 282:../../../mod/sensor/sensor.c **** 
 283:../../../mod/sensor/sensor.c **** 						/* Transmit sensor bytes back to SDEC */
 284:../../../mod/sensor/sensor.c **** 						usb_transmit( &sensor_data_bytes[0],
 285:../../../mod/sensor/sensor.c **** 						              num_sensor_bytes     ,
 286:../../../mod/sensor/sensor.c **** 									  HAL_SENSOR_TIMEOUT );
 287:../../../mod/sensor/sensor.c **** 								
 288:../../../mod/sensor/sensor.c **** 						break;
 289:../../../mod/sensor/sensor.c **** 						}
 290:../../../mod/sensor/sensor.c **** 					} /* case SENSOR_POLL_REQUEST */
 291:../../../mod/sensor/sensor.c **** 
 292:../../../mod/sensor/sensor.c **** 				/* STOP Executtion */
 293:../../../mod/sensor/sensor.c **** 				case SENSOR_POLL_STOP:
 294:../../../mod/sensor/sensor.c **** 					{
 295:../../../mod/sensor/sensor.c **** 					/* Do nothing */
 296:../../../mod/sensor/sensor.c **** 					break;
 297:../../../mod/sensor/sensor.c **** 					} /* case SENSOR_POLL_STOP */
 298:../../../mod/sensor/sensor.c **** 
 299:../../../mod/sensor/sensor.c **** 				/* WAIT, Pause execution */
 300:../../../mod/sensor/sensor.c **** 				case SENSOR_POLL_WAIT:
 301:../../../mod/sensor/sensor.c **** 					{
 302:../../../mod/sensor/sensor.c **** 					/* Poll USB port until resume signal arrives */
 303:../../../mod/sensor/sensor.c **** 					while( sensor_poll_cmd != SENSOR_POLL_RESUME )
 304:../../../mod/sensor/sensor.c **** 						{
 305:../../../mod/sensor/sensor.c **** 						usb_receive( &sensor_poll_cmd, 
 306:../../../mod/sensor/sensor.c **** 						             sizeof( sensor_poll_cmd ),
 307:../../../mod/sensor/sensor.c **** 									 HAL_DEFAULT_TIMEOUT );
 308:../../../mod/sensor/sensor.c **** 						}
 309:../../../mod/sensor/sensor.c **** 					break;
 310:../../../mod/sensor/sensor.c **** 					} /* case SENSOR_POLL_WAIT */
 311:../../../mod/sensor/sensor.c **** 
 312:../../../mod/sensor/sensor.c **** 				/* Erroneous Command*/
 313:../../../mod/sensor/sensor.c **** 				default:
 314:../../../mod/sensor/sensor.c **** 					{
 315:../../../mod/sensor/sensor.c **** 					Error_Handler();
 316:../../../mod/sensor/sensor.c **** 					break;
ARM GAS  /tmp/ccN84Bm3.s 			page 7


 317:../../../mod/sensor/sensor.c **** 					}
 318:../../../mod/sensor/sensor.c **** 				} /* switch( sensor_poll_cmd ) */
 319:../../../mod/sensor/sensor.c **** 
 320:../../../mod/sensor/sensor.c **** 			} /* while( sensor_poll_cmd != SENSOR_POLL_STOP ) */
 321:../../../mod/sensor/sensor.c **** 		
 322:../../../mod/sensor/sensor.c **** 		return sensor_status ;
 323:../../../mod/sensor/sensor.c ****         } /* SENSOR_POLL_CODE */ 
 324:../../../mod/sensor/sensor.c **** 
 325:../../../mod/sensor/sensor.c **** 	/*--------------------------------------------------------------------------
 326:../../../mod/sensor/sensor.c **** 	 SENSOR DUMP 
 327:../../../mod/sensor/sensor.c **** 	--------------------------------------------------------------------------*/
 328:../../../mod/sensor/sensor.c **** 	case SENSOR_DUMP_CODE: 
 329:../../../mod/sensor/sensor.c **** 		{
 330:../../../mod/sensor/sensor.c **** 		/* Tell the PC how many bytes to expect */
 331:../../../mod/sensor/sensor.c **** 		usb_transmit( &num_sensor_bytes,
 332:../../../mod/sensor/sensor.c ****                       sizeof( num_sensor_bytes ), 
 333:../../../mod/sensor/sensor.c ****                       HAL_DEFAULT_TIMEOUT );
 334:../../../mod/sensor/sensor.c **** 
 335:../../../mod/sensor/sensor.c **** 		/* Get the sensor readings */
 336:../../../mod/sensor/sensor.c **** 	    sensor_status = sensor_dump( &sensor_data );	
 337:../../../mod/sensor/sensor.c **** 
 338:../../../mod/sensor/sensor.c **** 		/* Convert to byte array */
 339:../../../mod/sensor/sensor.c **** 		memcpy( &(sensor_data_bytes[0]), &sensor_data, sizeof( sensor_data ) );
 340:../../../mod/sensor/sensor.c **** 
 341:../../../mod/sensor/sensor.c **** 		/* Transmit sensor readings to PC */
 342:../../../mod/sensor/sensor.c **** 		if ( sensor_status == SENSOR_OK )
 343:../../../mod/sensor/sensor.c **** 			{
 344:../../../mod/sensor/sensor.c **** 			usb_transmit( &sensor_data_bytes[0]      , 
 345:../../../mod/sensor/sensor.c ****                           sizeof( sensor_data_bytes ), 
 346:../../../mod/sensor/sensor.c ****                           HAL_SENSOR_TIMEOUT );
 347:../../../mod/sensor/sensor.c **** 			return ( sensor_status );
 348:../../../mod/sensor/sensor.c ****             }
 349:../../../mod/sensor/sensor.c **** 		else
 350:../../../mod/sensor/sensor.c **** 			{
 351:../../../mod/sensor/sensor.c **** 			/* Sensor readings not recieved */
 352:../../../mod/sensor/sensor.c **** 			return( SENSOR_FAIL );
 353:../../../mod/sensor/sensor.c ****             }
 354:../../../mod/sensor/sensor.c ****         } /* SENSOR_DUMP_CODE */
 355:../../../mod/sensor/sensor.c **** 
 356:../../../mod/sensor/sensor.c **** 	/*--------------------------------------------------------------------------
 357:../../../mod/sensor/sensor.c **** 	 UNRECOGNIZED SUBCOMMAND 
 358:../../../mod/sensor/sensor.c **** 	--------------------------------------------------------------------------*/
 359:../../../mod/sensor/sensor.c **** 	default:
 360:../../../mod/sensor/sensor.c **** 		{
 361:../../../mod/sensor/sensor.c **** 		return ( SENSOR_UNRECOGNIZED_OP );
 362:../../../mod/sensor/sensor.c ****         }
 363:../../../mod/sensor/sensor.c ****     }
 364:../../../mod/sensor/sensor.c **** 
 365:../../../mod/sensor/sensor.c **** } /* sensor_cmd_execute */
 366:../../../mod/sensor/sensor.c **** 
 367:../../../mod/sensor/sensor.c **** #endif /* #if  defined( TERMINAL ) */
 368:../../../mod/sensor/sensor.c **** 
 369:../../../mod/sensor/sensor.c **** 
 370:../../../mod/sensor/sensor.c **** /*******************************************************************************
 371:../../../mod/sensor/sensor.c **** *                                                                              *
 372:../../../mod/sensor/sensor.c **** * PROCEDURE:                                                                   * 
 373:../../../mod/sensor/sensor.c **** * 		sensor_dump                                                            *
ARM GAS  /tmp/ccN84Bm3.s 			page 8


 374:../../../mod/sensor/sensor.c **** *                                                                              *
 375:../../../mod/sensor/sensor.c **** * DESCRIPTION:                                                                 * 
 376:../../../mod/sensor/sensor.c **** *       reads from all sensors and fill in the sensor data structure           *
 377:../../../mod/sensor/sensor.c **** *                                                                              *
 378:../../../mod/sensor/sensor.c **** *******************************************************************************/
 379:../../../mod/sensor/sensor.c **** SENSOR_STATUS sensor_dump 
 380:../../../mod/sensor/sensor.c **** 	(
 381:../../../mod/sensor/sensor.c ****     SENSOR_DATA*        sensor_data_ptr /* Pointer to the sensor data struct should 
 382:../../../mod/sensor/sensor.c ****                                         be written */ 
 383:../../../mod/sensor/sensor.c ****     )
 384:../../../mod/sensor/sensor.c **** {
 385:../../../mod/sensor/sensor.c **** /*------------------------------------------------------------------------------
 386:../../../mod/sensor/sensor.c ****  Local variables 
 387:../../../mod/sensor/sensor.c **** ------------------------------------------------------------------------------*/
 388:../../../mod/sensor/sensor.c **** #if defined( FLIGHT_COMPUTER )
 389:../../../mod/sensor/sensor.c **** 	IMU_STATUS      accel_status;           /* IMU sensor status codes     */       
 390:../../../mod/sensor/sensor.c **** 	IMU_STATUS      gyro_status;
 391:../../../mod/sensor/sensor.c **** 	IMU_STATUS      mag_status; 
 392:../../../mod/sensor/sensor.c **** 	BARO_STATUS     press_status;           /* Baro Sensor status codes    */
 393:../../../mod/sensor/sensor.c **** 	BARO_STATUS     temp_status;
 394:../../../mod/sensor/sensor.c **** #elif defined( ENGINE_CONTROLLER )
 395:../../../mod/sensor/sensor.c **** 	PRESSURE_STATUS pt_status;              /* Pressure status codes       */
 396:../../../mod/sensor/sensor.c **** 	THERMO_STATUS   tc_status;              /* Thermocouple status codes   */
 397:../../../mod/sensor/sensor.c **** #endif
 398:../../../mod/sensor/sensor.c **** 
 399:../../../mod/sensor/sensor.c **** /*------------------------------------------------------------------------------
 400:../../../mod/sensor/sensor.c ****  Initializations 
 401:../../../mod/sensor/sensor.c **** ------------------------------------------------------------------------------*/
 402:../../../mod/sensor/sensor.c **** #if defined( FLIGHT_COMPUTER )
 403:../../../mod/sensor/sensor.c **** 	accel_status = IMU_OK;         
 404:../../../mod/sensor/sensor.c **** 	gyro_status  = IMU_OK;
 405:../../../mod/sensor/sensor.c **** 	mag_status   = IMU_OK; 
 406:../../../mod/sensor/sensor.c **** 	press_status = BARO_OK;           
 407:../../../mod/sensor/sensor.c **** 	temp_status  = BARO_OK;
 408:../../../mod/sensor/sensor.c **** #elif defined( ENGINE_CONTROLLER )
 409:../../../mod/sensor/sensor.c **** 	pt_status    = PRESSURE_OK;          
 410:../../../mod/sensor/sensor.c **** 	tc_status    = THERMO_OK;        
 411:../../../mod/sensor/sensor.c **** #endif
 412:../../../mod/sensor/sensor.c **** 
 413:../../../mod/sensor/sensor.c **** /*------------------------------------------------------------------------------
 414:../../../mod/sensor/sensor.c ****  Call sensor API functions 
 415:../../../mod/sensor/sensor.c **** ------------------------------------------------------------------------------*/
 416:../../../mod/sensor/sensor.c **** 
 417:../../../mod/sensor/sensor.c **** /* Poll Sensors  */
 418:../../../mod/sensor/sensor.c **** #if defined( FLIGHT_COMPUTER )
 419:../../../mod/sensor/sensor.c **** 	/* IMU sensors */
 420:../../../mod/sensor/sensor.c **** 	accel_status = imu_get_accel_xyz( &(sensor_data_ptr->imu_data) ); 
 421:../../../mod/sensor/sensor.c **** 	gyro_status  = imu_get_gyro_xyz ( &(sensor_data_ptr->imu_data) );
 422:../../../mod/sensor/sensor.c **** 	mag_status   = imu_get_mag_xyz  ( &(sensor_data_ptr->imu_data) );
 423:../../../mod/sensor/sensor.c **** 	sensor_data_ptr -> imu_data.temp = 0;     // Figure out what to do with this 
 424:../../../mod/sensor/sensor.c **** 											  // readout, temporarily being used 
 425:../../../mod/sensor/sensor.c **** 											  // as struct padding
 426:../../../mod/sensor/sensor.c **** 
 427:../../../mod/sensor/sensor.c **** 	/* Baro sensors */
 428:../../../mod/sensor/sensor.c **** 	temp_status  = baro_get_temp    ( &(sensor_data_ptr -> baro_temp     ) );
 429:../../../mod/sensor/sensor.c **** 	press_status = baro_get_pressure( &(sensor_data_ptr -> baro_pressure ) );
 430:../../../mod/sensor/sensor.c **** 
ARM GAS  /tmp/ccN84Bm3.s 			page 9


 431:../../../mod/sensor/sensor.c **** #elif defined( ENGINE_CONTROLLER )
 432:../../../mod/sensor/sensor.c **** 	/* Pressure Transducers */
 433:../../../mod/sensor/sensor.c **** 	pt_status    = pressure_poll_pts( &( sensor_data_ptr -> pt_pressures[0] ) );
 434:../../../mod/sensor/sensor.c **** 
 435:../../../mod/sensor/sensor.c **** 	/* Load cell */
 436:../../../mod/sensor/sensor.c **** 	sensor_data_ptr -> load_cell_force = loadcell_get_reading();
 437:../../../mod/sensor/sensor.c **** 
 438:../../../mod/sensor/sensor.c **** 	/* Thermocouple */
 439:../../../mod/sensor/sensor.c **** 	tc_status    = temp_get_temp( &( sensor_data_ptr -> tc_temp ), 
 440:../../../mod/sensor/sensor.c **** 	                              THERMO_HOT_JUNCTION );
 441:../../../mod/sensor/sensor.c **** #endif
 442:../../../mod/sensor/sensor.c **** 
 443:../../../mod/sensor/sensor.c **** 
 444:../../../mod/sensor/sensor.c **** /*------------------------------------------------------------------------------
 445:../../../mod/sensor/sensor.c ****  Set command status from sensor API returns 
 446:../../../mod/sensor/sensor.c **** ------------------------------------------------------------------------------*/
 447:../../../mod/sensor/sensor.c **** #if defined( FLIGHT_COMPUTER )
 448:../../../mod/sensor/sensor.c **** 	if      ( accel_status != IMU_OK )
 449:../../../mod/sensor/sensor.c **** 		{
 450:../../../mod/sensor/sensor.c **** 		return SENSOR_ACCEL_ERROR;
 451:../../../mod/sensor/sensor.c **** 		}
 452:../../../mod/sensor/sensor.c **** 	else if ( gyro_status  != IMU_OK )
 453:../../../mod/sensor/sensor.c **** 		{
 454:../../../mod/sensor/sensor.c **** 		return SENSOR_GYRO_ERROR;
 455:../../../mod/sensor/sensor.c **** 		}
 456:../../../mod/sensor/sensor.c **** 	else if ( mag_status   != IMU_OK )
 457:../../../mod/sensor/sensor.c **** 		{
 458:../../../mod/sensor/sensor.c **** 		return SENSOR_MAG_ERROR;	
 459:../../../mod/sensor/sensor.c **** 		}
 460:../../../mod/sensor/sensor.c **** 	else if ( press_status != BARO_OK ||
 461:../../../mod/sensor/sensor.c **** 			temp_status  != BARO_OK  )
 462:../../../mod/sensor/sensor.c **** 		{
 463:../../../mod/sensor/sensor.c **** 		return SENSOR_BARO_ERROR;
 464:../../../mod/sensor/sensor.c **** 		}
 465:../../../mod/sensor/sensor.c **** 	else
 466:../../../mod/sensor/sensor.c **** 		{
 467:../../../mod/sensor/sensor.c **** 		return SENSOR_OK;
 468:../../../mod/sensor/sensor.c **** 		}
 469:../../../mod/sensor/sensor.c **** #elif defined( ENGINE_CONTROLLER )
 470:../../../mod/sensor/sensor.c **** 	if      ( pt_status != PRESSURE_OK )
 471:../../../mod/sensor/sensor.c **** 		{
 472:../../../mod/sensor/sensor.c **** 		return SENSOR_PT_ERROR;
 473:../../../mod/sensor/sensor.c **** 		}
 474:../../../mod/sensor/sensor.c **** 	else if ( tc_status != THERMO_OK   )
 475:../../../mod/sensor/sensor.c **** 		{
 476:../../../mod/sensor/sensor.c **** 		return SENSOR_TC_ERROR;
 477:../../../mod/sensor/sensor.c **** 		}
 478:../../../mod/sensor/sensor.c **** 	else
 479:../../../mod/sensor/sensor.c **** 		{
 480:../../../mod/sensor/sensor.c **** 		return SENSOR_OK;
 481:../../../mod/sensor/sensor.c **** 		}
 482:../../../mod/sensor/sensor.c **** #endif /* #elif defined( ENGINE_CONTROLLER )*/
 483:../../../mod/sensor/sensor.c **** 
 484:../../../mod/sensor/sensor.c **** } /* sensor_dump */
 485:../../../mod/sensor/sensor.c **** 
 486:../../../mod/sensor/sensor.c **** #if defined( TERMINAL )
 487:../../../mod/sensor/sensor.c **** /*******************************************************************************
ARM GAS  /tmp/ccN84Bm3.s 			page 10


 488:../../../mod/sensor/sensor.c **** *                                                                              *
 489:../../../mod/sensor/sensor.c **** * PROCEDURE:                                                                   *
 490:../../../mod/sensor/sensor.c **** * 		sensor_poll                                                            *
 491:../../../mod/sensor/sensor.c **** *                                                                              *
 492:../../../mod/sensor/sensor.c **** * DESCRIPTION:                                                                 *
 493:../../../mod/sensor/sensor.c **** *       Poll specific sensors on the board                                     *
 494:../../../mod/sensor/sensor.c **** *                                                                              *
 495:../../../mod/sensor/sensor.c **** *******************************************************************************/
 496:../../../mod/sensor/sensor.c **** SENSOR_STATUS sensor_poll
 497:../../../mod/sensor/sensor.c **** 	(
 498:../../../mod/sensor/sensor.c **** 	SENSOR_DATA* sensor_data_ptr, /* Data Export target               */
 499:../../../mod/sensor/sensor.c **** 	SENSOR_ID*   sensor_ids_ptr , /* Array containing sensor IDS      */
 500:../../../mod/sensor/sensor.c **** 	uint8_t      num_sensors      /* Number of sensors to poll        */
 501:../../../mod/sensor/sensor.c **** 	)
 502:../../../mod/sensor/sensor.c **** {
 503:../../../mod/sensor/sensor.c **** /*------------------------------------------------------------------------------
 504:../../../mod/sensor/sensor.c ****  Local Variables  
 505:../../../mod/sensor/sensor.c **** ------------------------------------------------------------------------------*/
 506:../../../mod/sensor/sensor.c **** SENSOR_ID  sensor_id;        /* ID of sensor currently being polled */
 507:../../../mod/sensor/sensor.c **** SENSOR_ID* sensor_id_ptr;    /* Pointer to sensor id                */
 508:../../../mod/sensor/sensor.c **** 
 509:../../../mod/sensor/sensor.c **** /* Module return codes */
 510:../../../mod/sensor/sensor.c **** #if   defined( FLIGHT_COMPUTER   )
 511:../../../mod/sensor/sensor.c **** 	IMU_STATUS    imu_status;      /* IMU Module return codes   */ 
 512:../../../mod/sensor/sensor.c **** 	BARO_STATUS   baro_status;     /* Baro module return codes  */
 513:../../../mod/sensor/sensor.c **** #elif defined( ENGINE_CONTROLLER )
 514:../../../mod/sensor/sensor.c **** 	THERMO_STATUS thermo_status;   /* Thermocouple return codes */
 515:../../../mod/sensor/sensor.c **** #endif
 516:../../../mod/sensor/sensor.c **** 
 517:../../../mod/sensor/sensor.c **** /* Sensor poll memory to prevent multiple calls to same API function */
 518:../../../mod/sensor/sensor.c **** #if defined( FLIGHT_COMPUTER )
 519:../../../mod/sensor/sensor.c **** 	bool imu_accel_read;
 520:../../../mod/sensor/sensor.c **** 	bool imu_gyro_read;
 521:../../../mod/sensor/sensor.c **** 	bool imu_mag_read;
 522:../../../mod/sensor/sensor.c **** #endif
 523:../../../mod/sensor/sensor.c **** 
 524:../../../mod/sensor/sensor.c **** /*------------------------------------------------------------------------------
 525:../../../mod/sensor/sensor.c ****  Initializations 
 526:../../../mod/sensor/sensor.c **** ------------------------------------------------------------------------------*/
 527:../../../mod/sensor/sensor.c **** sensor_id_ptr     = sensor_ids_ptr;
 528:../../../mod/sensor/sensor.c **** sensor_id         = *(sensor_id_ptr   );
 529:../../../mod/sensor/sensor.c **** 
 530:../../../mod/sensor/sensor.c **** /* Module return codes */
 531:../../../mod/sensor/sensor.c **** #if   defined( FLIGHT_COMPUTER   )
 532:../../../mod/sensor/sensor.c **** 	imu_status    = IMU_OK;
 533:../../../mod/sensor/sensor.c **** 	baro_status   = BARO_OK;
 534:../../../mod/sensor/sensor.c **** #elif defined( ENGINE_CONTROLLER )
 535:../../../mod/sensor/sensor.c **** 	thermo_status = THERMO_OK;
 536:../../../mod/sensor/sensor.c **** #endif
 537:../../../mod/sensor/sensor.c **** 
 538:../../../mod/sensor/sensor.c **** /* Sensor poll memory */
 539:../../../mod/sensor/sensor.c **** #if defined( FLIGHT_COMPUTER )
 540:../../../mod/sensor/sensor.c **** 	imu_accel_read = false;
 541:../../../mod/sensor/sensor.c **** 	imu_gyro_read  = false;
 542:../../../mod/sensor/sensor.c **** 	imu_mag_read   = false;
 543:../../../mod/sensor/sensor.c **** #endif
 544:../../../mod/sensor/sensor.c **** 
ARM GAS  /tmp/ccN84Bm3.s 			page 11


 545:../../../mod/sensor/sensor.c **** 
 546:../../../mod/sensor/sensor.c **** /*------------------------------------------------------------------------------
 547:../../../mod/sensor/sensor.c ****  API function implementation
 548:../../../mod/sensor/sensor.c **** ------------------------------------------------------------------------------*/
 549:../../../mod/sensor/sensor.c **** 
 550:../../../mod/sensor/sensor.c **** /* Iterate over each sensor readout */
 551:../../../mod/sensor/sensor.c **** for ( int i = 0; i < num_sensors; ++i )
 552:../../../mod/sensor/sensor.c **** 	{
 553:../../../mod/sensor/sensor.c **** 	
 554:../../../mod/sensor/sensor.c **** 	/* Poll sensor */
 555:../../../mod/sensor/sensor.c **** 	switch ( sensor_id )
 556:../../../mod/sensor/sensor.c **** 		{
 557:../../../mod/sensor/sensor.c **** 		#if defined( FLIGHT_COMPUTER )
 558:../../../mod/sensor/sensor.c **** 			case SENSOR_ACCX:
 559:../../../mod/sensor/sensor.c **** 				{
 560:../../../mod/sensor/sensor.c **** 				if ( !imu_accel_read )
 561:../../../mod/sensor/sensor.c **** 					{
 562:../../../mod/sensor/sensor.c **** 					imu_status = imu_get_accel_xyz( &( sensor_data_ptr -> imu_data ) );
 563:../../../mod/sensor/sensor.c **** 					if ( imu_status != IMU_OK )
 564:../../../mod/sensor/sensor.c **** 						{
 565:../../../mod/sensor/sensor.c **** 						return SENSOR_ACCEL_ERROR;
 566:../../../mod/sensor/sensor.c **** 						}
 567:../../../mod/sensor/sensor.c **** 					imu_accel_read = true;
 568:../../../mod/sensor/sensor.c **** 					}
 569:../../../mod/sensor/sensor.c **** 				break;
 570:../../../mod/sensor/sensor.c **** 				}
 571:../../../mod/sensor/sensor.c **** 
 572:../../../mod/sensor/sensor.c **** 			case SENSOR_ACCY:
 573:../../../mod/sensor/sensor.c **** 				{
 574:../../../mod/sensor/sensor.c **** 				if ( !imu_accel_read )
 575:../../../mod/sensor/sensor.c **** 					{
 576:../../../mod/sensor/sensor.c **** 					imu_status = imu_get_accel_xyz( &( sensor_data_ptr -> imu_data ) );
 577:../../../mod/sensor/sensor.c **** 					if ( imu_status != IMU_OK )
 578:../../../mod/sensor/sensor.c **** 						{
 579:../../../mod/sensor/sensor.c **** 						return SENSOR_ACCEL_ERROR;
 580:../../../mod/sensor/sensor.c **** 						}
 581:../../../mod/sensor/sensor.c **** 					imu_accel_read = true;
 582:../../../mod/sensor/sensor.c **** 					}
 583:../../../mod/sensor/sensor.c **** 				break;
 584:../../../mod/sensor/sensor.c **** 				}
 585:../../../mod/sensor/sensor.c **** 
 586:../../../mod/sensor/sensor.c **** 			case SENSOR_ACCZ:
 587:../../../mod/sensor/sensor.c **** 				{
 588:../../../mod/sensor/sensor.c **** 				if ( !imu_accel_read )
 589:../../../mod/sensor/sensor.c **** 					{
 590:../../../mod/sensor/sensor.c **** 					imu_status = imu_get_accel_xyz( &( sensor_data_ptr -> imu_data ) );
 591:../../../mod/sensor/sensor.c **** 					if ( imu_status != IMU_OK )
 592:../../../mod/sensor/sensor.c **** 						{
 593:../../../mod/sensor/sensor.c **** 						return SENSOR_ACCEL_ERROR;
 594:../../../mod/sensor/sensor.c **** 						}
 595:../../../mod/sensor/sensor.c **** 					imu_accel_read = true;
 596:../../../mod/sensor/sensor.c **** 					}
 597:../../../mod/sensor/sensor.c **** 				break;
 598:../../../mod/sensor/sensor.c **** 				}
 599:../../../mod/sensor/sensor.c **** 
 600:../../../mod/sensor/sensor.c **** 			case SENSOR_GYROX:
 601:../../../mod/sensor/sensor.c **** 				{
ARM GAS  /tmp/ccN84Bm3.s 			page 12


 602:../../../mod/sensor/sensor.c **** 				if ( !imu_gyro_read )
 603:../../../mod/sensor/sensor.c **** 					{
 604:../../../mod/sensor/sensor.c **** 					imu_status = imu_get_gyro_xyz( &( sensor_data_ptr -> imu_data ) );
 605:../../../mod/sensor/sensor.c **** 					if ( imu_status != IMU_OK )
 606:../../../mod/sensor/sensor.c **** 						{
 607:../../../mod/sensor/sensor.c **** 						return SENSOR_GYRO_ERROR;
 608:../../../mod/sensor/sensor.c **** 						}
 609:../../../mod/sensor/sensor.c **** 					imu_gyro_read = true;
 610:../../../mod/sensor/sensor.c **** 					}
 611:../../../mod/sensor/sensor.c **** 				break;
 612:../../../mod/sensor/sensor.c **** 				}
 613:../../../mod/sensor/sensor.c **** 
 614:../../../mod/sensor/sensor.c **** 			case SENSOR_GYROY:
 615:../../../mod/sensor/sensor.c **** 				{
 616:../../../mod/sensor/sensor.c **** 				if ( !imu_gyro_read )
 617:../../../mod/sensor/sensor.c **** 					{
 618:../../../mod/sensor/sensor.c **** 					imu_status = imu_get_gyro_xyz( &( sensor_data_ptr -> imu_data ) );
 619:../../../mod/sensor/sensor.c **** 					if ( imu_status != IMU_OK )
 620:../../../mod/sensor/sensor.c **** 						{
 621:../../../mod/sensor/sensor.c **** 						return SENSOR_GYRO_ERROR;
 622:../../../mod/sensor/sensor.c **** 						}
 623:../../../mod/sensor/sensor.c **** 					imu_gyro_read = true;
 624:../../../mod/sensor/sensor.c **** 					}
 625:../../../mod/sensor/sensor.c **** 				break;
 626:../../../mod/sensor/sensor.c **** 				}
 627:../../../mod/sensor/sensor.c **** 
 628:../../../mod/sensor/sensor.c **** 			case SENSOR_GYROZ:
 629:../../../mod/sensor/sensor.c **** 				{
 630:../../../mod/sensor/sensor.c **** 				if ( !imu_gyro_read )
 631:../../../mod/sensor/sensor.c **** 					{
 632:../../../mod/sensor/sensor.c **** 					imu_status = imu_get_gyro_xyz( &( sensor_data_ptr -> imu_data ) );
 633:../../../mod/sensor/sensor.c **** 					if ( imu_status != IMU_OK )
 634:../../../mod/sensor/sensor.c **** 						{
 635:../../../mod/sensor/sensor.c **** 						return SENSOR_GYRO_ERROR;
 636:../../../mod/sensor/sensor.c **** 						}
 637:../../../mod/sensor/sensor.c **** 					imu_gyro_read = true;
 638:../../../mod/sensor/sensor.c **** 					}
 639:../../../mod/sensor/sensor.c **** 				break;
 640:../../../mod/sensor/sensor.c **** 				}
 641:../../../mod/sensor/sensor.c **** 
 642:../../../mod/sensor/sensor.c **** 			case SENSOR_MAGX:
 643:../../../mod/sensor/sensor.c **** 				{
 644:../../../mod/sensor/sensor.c **** 				if ( !imu_mag_read )
 645:../../../mod/sensor/sensor.c **** 					{
 646:../../../mod/sensor/sensor.c **** 					imu_status = imu_get_mag_xyz( &( sensor_data_ptr -> imu_data ) );
 647:../../../mod/sensor/sensor.c **** 					if ( imu_status != IMU_OK )
 648:../../../mod/sensor/sensor.c **** 						{
 649:../../../mod/sensor/sensor.c **** 						return SENSOR_GYRO_ERROR;
 650:../../../mod/sensor/sensor.c **** 						}
 651:../../../mod/sensor/sensor.c **** 					imu_mag_read = true;
 652:../../../mod/sensor/sensor.c **** 					}
 653:../../../mod/sensor/sensor.c **** 				break;
 654:../../../mod/sensor/sensor.c **** 				}
 655:../../../mod/sensor/sensor.c **** 
 656:../../../mod/sensor/sensor.c **** 			case SENSOR_MAGY:
 657:../../../mod/sensor/sensor.c **** 				{
 658:../../../mod/sensor/sensor.c **** 				if ( !imu_mag_read )
ARM GAS  /tmp/ccN84Bm3.s 			page 13


 659:../../../mod/sensor/sensor.c **** 					{
 660:../../../mod/sensor/sensor.c **** 					imu_status = imu_get_mag_xyz( &( sensor_data_ptr -> imu_data ) );
 661:../../../mod/sensor/sensor.c **** 					if ( imu_status != IMU_OK )
 662:../../../mod/sensor/sensor.c **** 						{
 663:../../../mod/sensor/sensor.c **** 						return SENSOR_GYRO_ERROR;
 664:../../../mod/sensor/sensor.c **** 						}
 665:../../../mod/sensor/sensor.c **** 					imu_mag_read = true;
 666:../../../mod/sensor/sensor.c **** 					}
 667:../../../mod/sensor/sensor.c **** 				break;
 668:../../../mod/sensor/sensor.c **** 				}
 669:../../../mod/sensor/sensor.c **** 
 670:../../../mod/sensor/sensor.c **** 			case SENSOR_MAGZ:
 671:../../../mod/sensor/sensor.c **** 				{
 672:../../../mod/sensor/sensor.c **** 				if ( !imu_mag_read )
 673:../../../mod/sensor/sensor.c **** 					{
 674:../../../mod/sensor/sensor.c **** 					imu_status = imu_get_mag_xyz( &( sensor_data_ptr -> imu_data ) );
 675:../../../mod/sensor/sensor.c **** 					if ( imu_status != IMU_OK )
 676:../../../mod/sensor/sensor.c **** 						{
 677:../../../mod/sensor/sensor.c **** 						return SENSOR_GYRO_ERROR;
 678:../../../mod/sensor/sensor.c **** 						}
 679:../../../mod/sensor/sensor.c **** 					imu_mag_read = true;
 680:../../../mod/sensor/sensor.c **** 					}
 681:../../../mod/sensor/sensor.c **** 				break;
 682:../../../mod/sensor/sensor.c **** 				}
 683:../../../mod/sensor/sensor.c **** 
 684:../../../mod/sensor/sensor.c **** 			case SENSOR_IMUT:
 685:../../../mod/sensor/sensor.c **** 				{
 686:../../../mod/sensor/sensor.c **** 				sensor_data_ptr -> imu_data.temp = 0;
 687:../../../mod/sensor/sensor.c **** 				break;
 688:../../../mod/sensor/sensor.c **** 				}
 689:../../../mod/sensor/sensor.c **** 
 690:../../../mod/sensor/sensor.c **** 			case SENSOR_PRES:
 691:../../../mod/sensor/sensor.c **** 				{
 692:../../../mod/sensor/sensor.c **** 				baro_status = baro_get_temp(     &( sensor_data_ptr -> baro_temp     ) );
 693:../../../mod/sensor/sensor.c **** 				if ( baro_status != BARO_OK )
 694:../../../mod/sensor/sensor.c **** 					{
 695:../../../mod/sensor/sensor.c **** 					return SENSOR_BARO_ERROR;
 696:../../../mod/sensor/sensor.c **** 					}
 697:../../../mod/sensor/sensor.c **** 				baro_status = baro_get_pressure( &( sensor_data_ptr -> baro_pressure ) );
 698:../../../mod/sensor/sensor.c **** 				if ( baro_status != BARO_OK )
 699:../../../mod/sensor/sensor.c **** 					{
 700:../../../mod/sensor/sensor.c **** 					return SENSOR_BARO_ERROR;
 701:../../../mod/sensor/sensor.c **** 					}
 702:../../../mod/sensor/sensor.c **** 				break;
 703:../../../mod/sensor/sensor.c **** 				}
 704:../../../mod/sensor/sensor.c **** 
 705:../../../mod/sensor/sensor.c **** 			case SENSOR_TEMP:
 706:../../../mod/sensor/sensor.c **** 				{
 707:../../../mod/sensor/sensor.c **** 				baro_status = baro_get_temp( &( sensor_data_ptr -> baro_temp ) );
 708:../../../mod/sensor/sensor.c **** 				if ( baro_status != BARO_OK )
 709:../../../mod/sensor/sensor.c **** 					{
 710:../../../mod/sensor/sensor.c **** 					return SENSOR_BARO_ERROR;
 711:../../../mod/sensor/sensor.c **** 					}
 712:../../../mod/sensor/sensor.c **** 				break;
 713:../../../mod/sensor/sensor.c **** 				}
 714:../../../mod/sensor/sensor.c **** 
 715:../../../mod/sensor/sensor.c **** 		#elif defined( ENGINE_CONTROLLER )
ARM GAS  /tmp/ccN84Bm3.s 			page 14


 716:../../../mod/sensor/sensor.c **** 			case SENSOR_PT0:
 717:../../../mod/sensor/sensor.c **** 				{
 718:../../../mod/sensor/sensor.c **** 				sensor_data_ptr -> pt_pressures[0] = pressure_get_pt_reading( PT_NUM0 );
 719:../../../mod/sensor/sensor.c **** 				break;
 720:../../../mod/sensor/sensor.c **** 				}
 721:../../../mod/sensor/sensor.c **** 
 722:../../../mod/sensor/sensor.c **** 			case SENSOR_PT1:
 723:../../../mod/sensor/sensor.c **** 				{
 724:../../../mod/sensor/sensor.c **** 				sensor_data_ptr -> pt_pressures[1] = pressure_get_pt_reading( PT_NUM1 );
 725:../../../mod/sensor/sensor.c **** 				break;
 726:../../../mod/sensor/sensor.c **** 				}
 727:../../../mod/sensor/sensor.c **** 
 728:../../../mod/sensor/sensor.c **** 			case SENSOR_PT2:
 729:../../../mod/sensor/sensor.c **** 				{
 730:../../../mod/sensor/sensor.c **** 				sensor_data_ptr -> pt_pressures[2] = pressure_get_pt_reading( PT_NUM2 );
 731:../../../mod/sensor/sensor.c **** 				break;
 732:../../../mod/sensor/sensor.c **** 				}
 733:../../../mod/sensor/sensor.c **** 
 734:../../../mod/sensor/sensor.c **** 			case SENSOR_PT3:
 735:../../../mod/sensor/sensor.c **** 				{
 736:../../../mod/sensor/sensor.c **** 				sensor_data_ptr -> pt_pressures[3] = pressure_get_pt_reading( PT_NUM3 );
 737:../../../mod/sensor/sensor.c **** 				break;
 738:../../../mod/sensor/sensor.c **** 				}
 739:../../../mod/sensor/sensor.c **** 
 740:../../../mod/sensor/sensor.c **** 			case SENSOR_PT4:
 741:../../../mod/sensor/sensor.c **** 				{
 742:../../../mod/sensor/sensor.c **** 				sensor_data_ptr -> pt_pressures[4] = pressure_get_pt_reading( PT_NUM4 );
 743:../../../mod/sensor/sensor.c **** 				break;
 744:../../../mod/sensor/sensor.c **** 				}
 745:../../../mod/sensor/sensor.c **** 
 746:../../../mod/sensor/sensor.c **** 			case SENSOR_PT5:
 747:../../../mod/sensor/sensor.c **** 				{
 748:../../../mod/sensor/sensor.c **** 				sensor_data_ptr -> pt_pressures[5] = pressure_get_pt_reading( PT_NUM5 );
 749:../../../mod/sensor/sensor.c **** 				break;
 750:../../../mod/sensor/sensor.c **** 				}
 751:../../../mod/sensor/sensor.c **** 
 752:../../../mod/sensor/sensor.c **** 			case SENSOR_PT6:
 753:../../../mod/sensor/sensor.c **** 				{
 754:../../../mod/sensor/sensor.c **** 				sensor_data_ptr -> pt_pressures[6] = pressure_get_pt_reading( PT_NUM6 );
 755:../../../mod/sensor/sensor.c **** 				break;
 756:../../../mod/sensor/sensor.c **** 				}
 757:../../../mod/sensor/sensor.c **** 
 758:../../../mod/sensor/sensor.c **** 			case SENSOR_PT7:
 759:../../../mod/sensor/sensor.c **** 				{
 760:../../../mod/sensor/sensor.c **** 				sensor_data_ptr -> pt_pressures[7] = pressure_get_pt_reading( PT_NUM7 );
 761:../../../mod/sensor/sensor.c **** 				break;
 762:../../../mod/sensor/sensor.c **** 				}
 763:../../../mod/sensor/sensor.c **** 
 764:../../../mod/sensor/sensor.c **** 			case SENSOR_TC:
 765:../../../mod/sensor/sensor.c **** 				{
 766:../../../mod/sensor/sensor.c **** 				thermo_status = temp_get_temp( &( sensor_data_ptr -> tc_temp ),
 767:../../../mod/sensor/sensor.c **** 				                               THERMO_HOT_JUNCTION );
 768:../../../mod/sensor/sensor.c **** 				if ( thermo_status != THERMO_OK )
 769:../../../mod/sensor/sensor.c **** 					{
 770:../../../mod/sensor/sensor.c **** 					return SENSOR_TC_ERROR;
 771:../../../mod/sensor/sensor.c **** 					}
 772:../../../mod/sensor/sensor.c **** 				break;
ARM GAS  /tmp/ccN84Bm3.s 			page 15


 773:../../../mod/sensor/sensor.c **** 				}
 774:../../../mod/sensor/sensor.c **** 
 775:../../../mod/sensor/sensor.c **** 			case SENSOR_LC:
 776:../../../mod/sensor/sensor.c **** 				{
 777:../../../mod/sensor/sensor.c **** 				sensor_data_ptr -> load_cell_force = loadcell_get_reading();
 778:../../../mod/sensor/sensor.c **** 				break;
 779:../../../mod/sensor/sensor.c **** 				}
 780:../../../mod/sensor/sensor.c **** 
 781:../../../mod/sensor/sensor.c **** 		#endif /* #elif defined( ENGINE_CONTROLLER ) */
 782:../../../mod/sensor/sensor.c **** 
 783:../../../mod/sensor/sensor.c **** 		default:
 784:../../../mod/sensor/sensor.c **** 			{
 785:../../../mod/sensor/sensor.c **** 			/* Unrecognized sensor id */
 786:../../../mod/sensor/sensor.c **** 			return SENSOR_UNRECOGNIZED_SENSOR_ID; 
 787:../../../mod/sensor/sensor.c **** 			}
 788:../../../mod/sensor/sensor.c **** 		} /* switch( sensor_id ) */
 789:../../../mod/sensor/sensor.c **** 
 790:../../../mod/sensor/sensor.c **** 		/* Go to next sensor */
 791:../../../mod/sensor/sensor.c **** 		sensor_id_ptr++;
 792:../../../mod/sensor/sensor.c **** 		sensor_id        = *(sensor_id_ptr   );
 793:../../../mod/sensor/sensor.c **** 
 794:../../../mod/sensor/sensor.c **** 	} /*  while( i < num_sensors ) */
 795:../../../mod/sensor/sensor.c **** 
 796:../../../mod/sensor/sensor.c **** return SENSOR_OK;
 797:../../../mod/sensor/sensor.c **** } /* sensor_poll */
 798:../../../mod/sensor/sensor.c **** #endif /* #if defined( TERMINAL ) */
 799:../../../mod/sensor/sensor.c **** 
 800:../../../mod/sensor/sensor.c **** 
 801:../../../mod/sensor/sensor.c **** /*------------------------------------------------------------------------------
 802:../../../mod/sensor/sensor.c ****  Internal procedures 
 803:../../../mod/sensor/sensor.c **** ------------------------------------------------------------------------------*/
 804:../../../mod/sensor/sensor.c **** 
 805:../../../mod/sensor/sensor.c **** #if defined( TERMINAL )
 806:../../../mod/sensor/sensor.c **** /*******************************************************************************
 807:../../../mod/sensor/sensor.c **** *                                                                              *
 808:../../../mod/sensor/sensor.c **** * PROCEDURE:                                                                   *
 809:../../../mod/sensor/sensor.c **** * 		sensor_map                                                             *
 810:../../../mod/sensor/sensor.c **** *                                                                              *
 811:../../../mod/sensor/sensor.c **** * DESCRIPTION:                                                                 *
 812:../../../mod/sensor/sensor.c **** *       Sensor ID to size and pointer mapping                                  *
 813:../../../mod/sensor/sensor.c **** *                                                                              *
 814:../../../mod/sensor/sensor.c **** *******************************************************************************/
 815:../../../mod/sensor/sensor.c **** void static sensor_map
 816:../../../mod/sensor/sensor.c **** 	(
 817:../../../mod/sensor/sensor.c **** 	SENSOR_DATA* sensor_data_ptr, /* In:  Base pointer to sensor data   */
 818:../../../mod/sensor/sensor.c **** 	SENSOR_ID    sensor_id      , /* In:  Sensor id                    */
 819:../../../mod/sensor/sensor.c **** 	uint8_t**    sensorid_pptr  , /* Out: Pointer to sensor readout in 
 820:../../../mod/sensor/sensor.c **** 	                                      sensor_data_ptr              */
 821:../../../mod/sensor/sensor.c **** 	size_t*      sensor_size_ptr  /* Out: Size of readout in bytes     */
 822:../../../mod/sensor/sensor.c **** 	)
 823:../../../mod/sensor/sensor.c **** {
  28              		.loc 1 823 1 view -0
  29              		.cfi_startproc
  30              		@ args = 0, pretend = 0, frame = 0
  31              		@ frame_needed = 0, uses_anonymous_args = 0
  32              		@ link register save eliminated.
  33              		.loc 1 823 1 is_stmt 0 view .LVU1
ARM GAS  /tmp/ccN84Bm3.s 			page 16


  34 0000 30B4     		push	{r4, r5}
  35              	.LCFI0:
  36              		.cfi_def_cfa_offset 8
  37              		.cfi_offset 4, -8
  38              		.cfi_offset 5, -4
 824:../../../mod/sensor/sensor.c **** /* Lookup sensor offset and size from table */
 825:../../../mod/sensor/sensor.c **** *sensor_size_ptr = sensor_size_offsets_table[ sensor_id ].size;
  39              		.loc 1 825 1 is_stmt 1 view .LVU2
  40              		.loc 1 825 58 is_stmt 0 view .LVU3
  41 0002 064C     		ldr	r4, .L3
  42 0004 04EBC10C 		add	ip, r4, r1, lsl #3
  43 0008 DCF80450 		ldr	r5, [ip, #4]
  44 000c 1D60     		str	r5, [r3]
 826:../../../mod/sensor/sensor.c **** *sensorid_pptr   = ( (uint8_t*) sensor_data_ptr ) + 
  45              		.loc 1 826 1 is_stmt 1 view .LVU4
 827:../../../mod/sensor/sensor.c ****                    sensor_size_offsets_table[ sensor_id ].offset;
  46              		.loc 1 827 58 is_stmt 0 view .LVU5
  47 000e 14F83130 		ldrb	r3, [r4, r1, lsl #3]	@ zero_extendqisi2
  48              	.LVL1:
 826:../../../mod/sensor/sensor.c **** *sensorid_pptr   = ( (uint8_t*) sensor_data_ptr ) + 
  49              		.loc 1 826 51 view .LVU6
  50 0012 1844     		add	r0, r0, r3
  51              	.LVL2:
 826:../../../mod/sensor/sensor.c **** *sensorid_pptr   = ( (uint8_t*) sensor_data_ptr ) + 
  52              		.loc 1 826 18 view .LVU7
  53 0014 1060     		str	r0, [r2]
 828:../../../mod/sensor/sensor.c **** 
 829:../../../mod/sensor/sensor.c **** } /*  sensor_map */
  54              		.loc 1 829 1 view .LVU8
  55 0016 30BC     		pop	{r4, r5}
  56              	.LCFI1:
  57              		.cfi_restore 5
  58              		.cfi_restore 4
  59              		.cfi_def_cfa_offset 0
  60 0018 7047     		bx	lr
  61              	.L4:
  62 001a 00BF     		.align	2
  63              	.L3:
  64 001c 00000000 		.word	sensor_size_offsets_table
  65              		.cfi_endproc
  66              	.LFE148:
  68              		.section	.text.extract_sensor_bytes,"ax",%progbits
  69              		.align	1
  70              		.syntax unified
  71              		.thumb
  72              		.thumb_func
  74              	extract_sensor_bytes:
  75              	.LVL3:
  76              	.LFB149:
 830:../../../mod/sensor/sensor.c **** 
 831:../../../mod/sensor/sensor.c **** 
 832:../../../mod/sensor/sensor.c **** /*******************************************************************************
 833:../../../mod/sensor/sensor.c **** *                                                                              *
 834:../../../mod/sensor/sensor.c **** * PROCEDURE:                                                                   *
 835:../../../mod/sensor/sensor.c **** * 		extract_sensor_bytes                                                   *
 836:../../../mod/sensor/sensor.c **** *                                                                              *
 837:../../../mod/sensor/sensor.c **** * DESCRIPTION:                                                                 *
ARM GAS  /tmp/ccN84Bm3.s 			page 17


 838:../../../mod/sensor/sensor.c **** *       Extract bytes for export from SENSOR_ID struct                         *
 839:../../../mod/sensor/sensor.c **** *                                                                              *
 840:../../../mod/sensor/sensor.c **** *******************************************************************************/
 841:../../../mod/sensor/sensor.c **** void static extract_sensor_bytes 
 842:../../../mod/sensor/sensor.c **** 	(
 843:../../../mod/sensor/sensor.c **** 	SENSOR_DATA* sensor_data_ptr      , /* In:  Sensor data in struct         */
 844:../../../mod/sensor/sensor.c **** 	SENSOR_ID*   sensor_ids_ptr       , /* In:  Sensor ids                    */
 845:../../../mod/sensor/sensor.c **** 	uint8_t      num_sensors          , /* In:  Number of sensors polled      */
 846:../../../mod/sensor/sensor.c **** 	uint8_t*     sensor_data_bytes_ptr, /* Out: Sensor data in bytes          */
 847:../../../mod/sensor/sensor.c **** 	uint8_t*     num_sensor_bytes       /* Out: Size of output data           */
 848:../../../mod/sensor/sensor.c **** 	)
 849:../../../mod/sensor/sensor.c **** {
  77              		.loc 1 849 1 is_stmt 1 view -0
  78              		.cfi_startproc
  79              		@ args = 4, pretend = 0, frame = 8
  80              		@ frame_needed = 0, uses_anonymous_args = 0
  81              		.loc 1 849 1 is_stmt 0 view .LVU10
  82 0000 2DE9F047 		push	{r4, r5, r6, r7, r8, r9, r10, lr}
  83              	.LCFI2:
  84              		.cfi_def_cfa_offset 32
  85              		.cfi_offset 4, -32
  86              		.cfi_offset 5, -28
  87              		.cfi_offset 6, -24
  88              		.cfi_offset 7, -20
  89              		.cfi_offset 8, -16
  90              		.cfi_offset 9, -12
  91              		.cfi_offset 10, -8
  92              		.cfi_offset 14, -4
  93 0004 82B0     		sub	sp, sp, #8
  94              	.LCFI3:
  95              		.cfi_def_cfa_offset 40
  96 0006 8246     		mov	r10, r0
  97 0008 0F46     		mov	r7, r1
  98 000a 1646     		mov	r6, r2
  99 000c 1D46     		mov	r5, r3
 100 000e DDF82880 		ldr	r8, [sp, #40]
 850:../../../mod/sensor/sensor.c **** /*------------------------------------------------------------------------------
 851:../../../mod/sensor/sensor.c ****  Local Variables  
 852:../../../mod/sensor/sensor.c **** ------------------------------------------------------------------------------*/
 853:../../../mod/sensor/sensor.c **** uint8_t*   output_ptr;    /* Pointer to data export output                    */
 101              		.loc 1 853 1 is_stmt 1 view .LVU11
 854:../../../mod/sensor/sensor.c **** uint8_t*   input_ptr;     /* Pointer to data within SENSOR_ID struct          */
 102              		.loc 1 854 1 view .LVU12
 855:../../../mod/sensor/sensor.c **** size_t     sensor_size;   /* Size in bytes of current sensor readout          */
 103              		.loc 1 855 1 view .LVU13
 856:../../../mod/sensor/sensor.c **** SENSOR_ID  sensor_id;     /* Current Sensor ID                                */
 104              		.loc 1 856 1 view .LVU14
 857:../../../mod/sensor/sensor.c **** SENSOR_ID* sensor_id_ptr; /* Pointer to current sensor ID                     */
 105              		.loc 1 857 1 view .LVU15
 858:../../../mod/sensor/sensor.c **** 
 859:../../../mod/sensor/sensor.c **** 
 860:../../../mod/sensor/sensor.c **** /*------------------------------------------------------------------------------
 861:../../../mod/sensor/sensor.c ****  Initializations  
 862:../../../mod/sensor/sensor.c **** ------------------------------------------------------------------------------*/
 863:../../../mod/sensor/sensor.c **** output_ptr        = sensor_data_bytes_ptr;
 106              		.loc 1 863 1 view .LVU16
 107              	.LVL4:
ARM GAS  /tmp/ccN84Bm3.s 			page 18


 864:../../../mod/sensor/sensor.c **** sensor_id_ptr     = sensor_ids_ptr;
 108              		.loc 1 864 1 view .LVU17
 865:../../../mod/sensor/sensor.c **** sensor_id         = *(sensor_id_ptr);
 109              		.loc 1 865 1 view .LVU18
 110              		.loc 1 865 19 is_stmt 0 view .LVU19
 111 0012 91F80090 		ldrb	r9, [r1]	@ zero_extendqisi2
 112              	.LVL5:
 866:../../../mod/sensor/sensor.c **** *num_sensor_bytes = 0;
 113              		.loc 1 866 1 is_stmt 1 view .LVU20
 114              		.loc 1 866 19 is_stmt 0 view .LVU21
 115 0016 0024     		movs	r4, #0
 116 0018 88F80040 		strb	r4, [r8]
 867:../../../mod/sensor/sensor.c **** 
 868:../../../mod/sensor/sensor.c **** 
 869:../../../mod/sensor/sensor.c **** /*------------------------------------------------------------------------------
 870:../../../mod/sensor/sensor.c ****  Implementation 
 871:../../../mod/sensor/sensor.c **** ------------------------------------------------------------------------------*/
 872:../../../mod/sensor/sensor.c **** for ( uint8_t i = 0; i < num_sensors; ++i )
 117              		.loc 1 872 1 is_stmt 1 view .LVU22
 118              	.LBB2:
 119              		.loc 1 872 7 view .LVU23
 120              	.LVL6:
 121              		.loc 1 872 1 is_stmt 0 view .LVU24
 122 001c 01E0     		b	.L6
 123              	.LVL7:
 124              	.L7:
 125              		.loc 1 872 39 is_stmt 1 discriminator 2 view .LVU25
 126 001e 0134     		adds	r4, r4, #1
 127              	.LVL8:
 128              		.loc 1 872 39 is_stmt 0 discriminator 2 view .LVU26
 129 0020 E4B2     		uxtb	r4, r4
 130              	.LVL9:
 131              	.L6:
 132              		.loc 1 872 24 is_stmt 1 discriminator 1 view .LVU27
 133 0022 B442     		cmp	r4, r6
 134 0024 1AD2     		bcs	.L10
 873:../../../mod/sensor/sensor.c **** 	{
 874:../../../mod/sensor/sensor.c **** 	/* Get position info of sensor readout */
 875:../../../mod/sensor/sensor.c **** 	sensor_map( sensor_data_ptr, 
 135              		.loc 1 875 2 view .LVU28
 136 0026 6B46     		mov	r3, sp
 137 0028 01AA     		add	r2, sp, #4
 138 002a 4946     		mov	r1, r9
 139 002c 5046     		mov	r0, r10
 140 002e FFF7FEFF 		bl	sensor_map
 141              	.LVL10:
 876:../../../mod/sensor/sensor.c **** 	            sensor_id      ,
 877:../../../mod/sensor/sensor.c **** 				&input_ptr      ,
 878:../../../mod/sensor/sensor.c **** 				&sensor_size );
 879:../../../mod/sensor/sensor.c **** 
 880:../../../mod/sensor/sensor.c **** 	/* Copy data into output buffer */
 881:../../../mod/sensor/sensor.c **** 	memcpy( output_ptr, input_ptr, sensor_size );
 142              		.loc 1 881 2 view .LVU29
 143 0032 009A     		ldr	r2, [sp]
 144 0034 0199     		ldr	r1, [sp, #4]
 145 0036 2846     		mov	r0, r5
 146 0038 FFF7FEFF 		bl	memcpy
ARM GAS  /tmp/ccN84Bm3.s 			page 19


 147              	.LVL11:
 882:../../../mod/sensor/sensor.c **** 
 883:../../../mod/sensor/sensor.c **** 	/* Update size of output */
 884:../../../mod/sensor/sensor.c **** 	*num_sensor_bytes += (uint8_t) sensor_size;
 148              		.loc 1 884 2 view .LVU30
 149 003c 98F800C0 		ldrb	ip, [r8]	@ zero_extendqisi2
 150              		.loc 1 884 23 is_stmt 0 view .LVU31
 151 0040 9DF80030 		ldrb	r3, [sp]	@ zero_extendqisi2
 152              		.loc 1 884 20 view .LVU32
 153 0044 9C44     		add	ip, ip, r3
 154 0046 88F800C0 		strb	ip, [r8]
 885:../../../mod/sensor/sensor.c **** 
 886:../../../mod/sensor/sensor.c **** 	/* Go to next sensor */ 
 887:../../../mod/sensor/sensor.c **** 	if ( i != ( num_sensors-1) )
 155              		.loc 1 887 2 is_stmt 1 view .LVU33
 156              		.loc 1 887 25 is_stmt 0 view .LVU34
 157 004a 731E     		subs	r3, r6, #1
 158              		.loc 1 887 5 view .LVU35
 159 004c 9C42     		cmp	r4, r3
 160 004e E6D0     		beq	.L7
 888:../../../mod/sensor/sensor.c **** 		{
 889:../../../mod/sensor/sensor.c **** 		sensor_id_ptr++;
 161              		.loc 1 889 3 is_stmt 1 view .LVU36
 162              	.LVL12:
 890:../../../mod/sensor/sensor.c **** 		sensor_id = *(sensor_id_ptr);
 163              		.loc 1 890 3 view .LVU37
 164              		.loc 1 890 13 is_stmt 0 view .LVU38
 165 0050 97F80190 		ldrb	r9, [r7, #1]	@ zero_extendqisi2
 166              	.LVL13:
 891:../../../mod/sensor/sensor.c **** 		output_ptr += sensor_size;
 167              		.loc 1 891 3 is_stmt 1 view .LVU39
 168              		.loc 1 891 14 is_stmt 0 view .LVU40
 169 0054 009B     		ldr	r3, [sp]
 170 0056 1D44     		add	r5, r5, r3
 171              	.LVL14:
 889:../../../mod/sensor/sensor.c **** 		sensor_id = *(sensor_id_ptr);
 172              		.loc 1 889 16 view .LVU41
 173 0058 0137     		adds	r7, r7, #1
 174              	.LVL15:
 889:../../../mod/sensor/sensor.c **** 		sensor_id = *(sensor_id_ptr);
 175              		.loc 1 889 16 view .LVU42
 176 005a E0E7     		b	.L7
 177              	.L10:
 889:../../../mod/sensor/sensor.c **** 		sensor_id = *(sensor_id_ptr);
 178              		.loc 1 889 16 view .LVU43
 179              	.LBE2:
 892:../../../mod/sensor/sensor.c **** 		}
 893:../../../mod/sensor/sensor.c **** 	}
 894:../../../mod/sensor/sensor.c **** 
 895:../../../mod/sensor/sensor.c **** } /* extract_sensor_bytes */
 180              		.loc 1 895 1 view .LVU44
 181 005c 02B0     		add	sp, sp, #8
 182              	.LCFI4:
 183              		.cfi_def_cfa_offset 32
 184              		@ sp needed
 185 005e BDE8F087 		pop	{r4, r5, r6, r7, r8, r9, r10, pc}
 186              		.loc 1 895 1 view .LVU45
ARM GAS  /tmp/ccN84Bm3.s 			page 20


 187              		.cfi_endproc
 188              	.LFE149:
 190              		.section	.text.sensor_init,"ax",%progbits
 191              		.align	1
 192              		.global	sensor_init
 193              		.syntax unified
 194              		.thumb
 195              		.thumb_func
 197              	sensor_init:
 198              	.LFB144:
 101:../../../mod/sensor/sensor.c **** /* Setup the sensor id hash table */
 199              		.loc 1 101 1 is_stmt 1 view -0
 200              		.cfi_startproc
 201              		@ args = 0, pretend = 0, frame = 0
 202              		@ frame_needed = 0, uses_anonymous_args = 0
 203              		@ link register save eliminated.
 105:../../../mod/sensor/sensor.c **** 	sensor_size_offsets_table[ 1  ].offset = 2;  /* SENSOR_ACCY  */
 204              		.loc 1 105 2 view .LVU47
 105:../../../mod/sensor/sensor.c **** 	sensor_size_offsets_table[ 1  ].offset = 2;  /* SENSOR_ACCY  */
 205              		.loc 1 105 41 is_stmt 0 view .LVU48
 206 0000 164B     		ldr	r3, .L12
 207 0002 0022     		movs	r2, #0
 208 0004 1A70     		strb	r2, [r3]
 106:../../../mod/sensor/sensor.c **** 	sensor_size_offsets_table[ 2  ].offset = 4;  /* SENSOR_ACCZ  */
 209              		.loc 1 106 2 is_stmt 1 view .LVU49
 106:../../../mod/sensor/sensor.c **** 	sensor_size_offsets_table[ 2  ].offset = 4;  /* SENSOR_ACCZ  */
 210              		.loc 1 106 41 is_stmt 0 view .LVU50
 211 0006 0222     		movs	r2, #2
 212 0008 1A72     		strb	r2, [r3, #8]
 107:../../../mod/sensor/sensor.c **** 	sensor_size_offsets_table[ 3  ].offset = 6;  /* SENSOR_GYROX */
 213              		.loc 1 107 2 is_stmt 1 view .LVU51
 107:../../../mod/sensor/sensor.c **** 	sensor_size_offsets_table[ 3  ].offset = 6;  /* SENSOR_GYROX */
 214              		.loc 1 107 41 is_stmt 0 view .LVU52
 215 000a 0421     		movs	r1, #4
 216 000c 1974     		strb	r1, [r3, #16]
 108:../../../mod/sensor/sensor.c **** 	sensor_size_offsets_table[ 4  ].offset = 8;  /* SENSOR_GYROY */
 217              		.loc 1 108 2 is_stmt 1 view .LVU53
 108:../../../mod/sensor/sensor.c **** 	sensor_size_offsets_table[ 4  ].offset = 8;  /* SENSOR_GYROY */
 218              		.loc 1 108 41 is_stmt 0 view .LVU54
 219 000e 0620     		movs	r0, #6
 220 0010 1876     		strb	r0, [r3, #24]
 109:../../../mod/sensor/sensor.c **** 	sensor_size_offsets_table[ 5  ].offset = 10; /* SENSOR_GYROZ */
 221              		.loc 1 109 2 is_stmt 1 view .LVU55
 109:../../../mod/sensor/sensor.c **** 	sensor_size_offsets_table[ 5  ].offset = 10; /* SENSOR_GYROZ */
 222              		.loc 1 109 41 is_stmt 0 view .LVU56
 223 0012 0820     		movs	r0, #8
 224 0014 83F82000 		strb	r0, [r3, #32]
 110:../../../mod/sensor/sensor.c **** 	sensor_size_offsets_table[ 6  ].offset = 12; /* SENSOR_MAGX  */
 225              		.loc 1 110 2 is_stmt 1 view .LVU57
 110:../../../mod/sensor/sensor.c **** 	sensor_size_offsets_table[ 6  ].offset = 12; /* SENSOR_MAGX  */
 226              		.loc 1 110 41 is_stmt 0 view .LVU58
 227 0018 0A20     		movs	r0, #10
 228 001a 83F82800 		strb	r0, [r3, #40]
 111:../../../mod/sensor/sensor.c **** 	sensor_size_offsets_table[ 7  ].offset = 14; /* SENSOR_MAGY  */
 229              		.loc 1 111 2 is_stmt 1 view .LVU59
 111:../../../mod/sensor/sensor.c **** 	sensor_size_offsets_table[ 7  ].offset = 14; /* SENSOR_MAGY  */
 230              		.loc 1 111 41 is_stmt 0 view .LVU60
ARM GAS  /tmp/ccN84Bm3.s 			page 21


 231 001e 0C20     		movs	r0, #12
 232 0020 83F83000 		strb	r0, [r3, #48]
 112:../../../mod/sensor/sensor.c **** 	sensor_size_offsets_table[ 8  ].offset = 16; /* SENSOR_MAGZ  */
 233              		.loc 1 112 2 is_stmt 1 view .LVU61
 112:../../../mod/sensor/sensor.c **** 	sensor_size_offsets_table[ 8  ].offset = 16; /* SENSOR_MAGZ  */
 234              		.loc 1 112 41 is_stmt 0 view .LVU62
 235 0024 0E20     		movs	r0, #14
 236 0026 83F83800 		strb	r0, [r3, #56]
 113:../../../mod/sensor/sensor.c **** 	sensor_size_offsets_table[ 9  ].offset = 18; /* SENSOR_IMUT  */
 237              		.loc 1 113 2 is_stmt 1 view .LVU63
 113:../../../mod/sensor/sensor.c **** 	sensor_size_offsets_table[ 9  ].offset = 18; /* SENSOR_IMUT  */
 238              		.loc 1 113 41 is_stmt 0 view .LVU64
 239 002a 1020     		movs	r0, #16
 240 002c 83F84000 		strb	r0, [r3, #64]
 114:../../../mod/sensor/sensor.c **** 	sensor_size_offsets_table[ 10 ].offset = 20; /* SENSOR_PRES  */
 241              		.loc 1 114 2 is_stmt 1 view .LVU65
 114:../../../mod/sensor/sensor.c **** 	sensor_size_offsets_table[ 10 ].offset = 20; /* SENSOR_PRES  */
 242              		.loc 1 114 41 is_stmt 0 view .LVU66
 243 0030 1220     		movs	r0, #18
 244 0032 83F84800 		strb	r0, [r3, #72]
 115:../../../mod/sensor/sensor.c **** 	sensor_size_offsets_table[ 11 ].offset = 24; /* SENSOR_TEMP  */
 245              		.loc 1 115 2 is_stmt 1 view .LVU67
 115:../../../mod/sensor/sensor.c **** 	sensor_size_offsets_table[ 11 ].offset = 24; /* SENSOR_TEMP  */
 246              		.loc 1 115 41 is_stmt 0 view .LVU68
 247 0036 1420     		movs	r0, #20
 248 0038 83F85000 		strb	r0, [r3, #80]
 116:../../../mod/sensor/sensor.c **** 
 249              		.loc 1 116 2 is_stmt 1 view .LVU69
 116:../../../mod/sensor/sensor.c **** 
 250              		.loc 1 116 41 is_stmt 0 view .LVU70
 251 003c 1820     		movs	r0, #24
 252 003e 83F85800 		strb	r0, [r3, #88]
 119:../../../mod/sensor/sensor.c **** 	sensor_size_offsets_table[ 1  ].size   = 2;  /* SENSOR_ACCY  */
 253              		.loc 1 119 2 is_stmt 1 view .LVU71
 119:../../../mod/sensor/sensor.c **** 	sensor_size_offsets_table[ 1  ].size   = 2;  /* SENSOR_ACCY  */
 254              		.loc 1 119 41 is_stmt 0 view .LVU72
 255 0042 5A60     		str	r2, [r3, #4]
 120:../../../mod/sensor/sensor.c **** 	sensor_size_offsets_table[ 2  ].size   = 2;  /* SENSOR_ACCZ  */
 256              		.loc 1 120 2 is_stmt 1 view .LVU73
 120:../../../mod/sensor/sensor.c **** 	sensor_size_offsets_table[ 2  ].size   = 2;  /* SENSOR_ACCZ  */
 257              		.loc 1 120 41 is_stmt 0 view .LVU74
 258 0044 DA60     		str	r2, [r3, #12]
 121:../../../mod/sensor/sensor.c **** 	sensor_size_offsets_table[ 3  ].size   = 2;  /* SENSOR_GYROX */
 259              		.loc 1 121 2 is_stmt 1 view .LVU75
 121:../../../mod/sensor/sensor.c **** 	sensor_size_offsets_table[ 3  ].size   = 2;  /* SENSOR_GYROX */
 260              		.loc 1 121 41 is_stmt 0 view .LVU76
 261 0046 5A61     		str	r2, [r3, #20]
 122:../../../mod/sensor/sensor.c **** 	sensor_size_offsets_table[ 4  ].size   = 2;  /* SENSOR_GYROY */
 262              		.loc 1 122 2 is_stmt 1 view .LVU77
 122:../../../mod/sensor/sensor.c **** 	sensor_size_offsets_table[ 4  ].size   = 2;  /* SENSOR_GYROY */
 263              		.loc 1 122 41 is_stmt 0 view .LVU78
 264 0048 DA61     		str	r2, [r3, #28]
 123:../../../mod/sensor/sensor.c **** 	sensor_size_offsets_table[ 5  ].size   = 2;  /* SENSOR_GYROZ */
 265              		.loc 1 123 2 is_stmt 1 view .LVU79
 123:../../../mod/sensor/sensor.c **** 	sensor_size_offsets_table[ 5  ].size   = 2;  /* SENSOR_GYROZ */
 266              		.loc 1 123 41 is_stmt 0 view .LVU80
 267 004a 5A62     		str	r2, [r3, #36]
ARM GAS  /tmp/ccN84Bm3.s 			page 22


 124:../../../mod/sensor/sensor.c **** 	sensor_size_offsets_table[ 6  ].size   = 2;  /* SENSOR_MAGX  */
 268              		.loc 1 124 2 is_stmt 1 view .LVU81
 124:../../../mod/sensor/sensor.c **** 	sensor_size_offsets_table[ 6  ].size   = 2;  /* SENSOR_MAGX  */
 269              		.loc 1 124 41 is_stmt 0 view .LVU82
 270 004c DA62     		str	r2, [r3, #44]
 125:../../../mod/sensor/sensor.c **** 	sensor_size_offsets_table[ 7  ].size   = 2;  /* SENSOR_MAGY  */
 271              		.loc 1 125 2 is_stmt 1 view .LVU83
 125:../../../mod/sensor/sensor.c **** 	sensor_size_offsets_table[ 7  ].size   = 2;  /* SENSOR_MAGY  */
 272              		.loc 1 125 41 is_stmt 0 view .LVU84
 273 004e 5A63     		str	r2, [r3, #52]
 126:../../../mod/sensor/sensor.c **** 	sensor_size_offsets_table[ 8  ].size   = 2;  /* SENSOR_MAGZ  */
 274              		.loc 1 126 2 is_stmt 1 view .LVU85
 126:../../../mod/sensor/sensor.c **** 	sensor_size_offsets_table[ 8  ].size   = 2;  /* SENSOR_MAGZ  */
 275              		.loc 1 126 41 is_stmt 0 view .LVU86
 276 0050 DA63     		str	r2, [r3, #60]
 127:../../../mod/sensor/sensor.c **** 	sensor_size_offsets_table[ 9  ].size   = 2;  /* SENSOR_IMUT  */
 277              		.loc 1 127 2 is_stmt 1 view .LVU87
 127:../../../mod/sensor/sensor.c **** 	sensor_size_offsets_table[ 9  ].size   = 2;  /* SENSOR_IMUT  */
 278              		.loc 1 127 41 is_stmt 0 view .LVU88
 279 0052 5A64     		str	r2, [r3, #68]
 128:../../../mod/sensor/sensor.c **** 	sensor_size_offsets_table[ 10 ].size   = 4;  /* SENSOR_PRES  */
 280              		.loc 1 128 2 is_stmt 1 view .LVU89
 128:../../../mod/sensor/sensor.c **** 	sensor_size_offsets_table[ 10 ].size   = 4;  /* SENSOR_PRES  */
 281              		.loc 1 128 41 is_stmt 0 view .LVU90
 282 0054 DA64     		str	r2, [r3, #76]
 129:../../../mod/sensor/sensor.c **** 	sensor_size_offsets_table[ 11 ].size   = 4;  /* SENSOR_TEMP  */
 283              		.loc 1 129 2 is_stmt 1 view .LVU91
 129:../../../mod/sensor/sensor.c **** 	sensor_size_offsets_table[ 11 ].size   = 4;  /* SENSOR_TEMP  */
 284              		.loc 1 129 41 is_stmt 0 view .LVU92
 285 0056 5965     		str	r1, [r3, #84]
 130:../../../mod/sensor/sensor.c **** #elif defined( ENGINE_CONTROLLER )
 286              		.loc 1 130 2 is_stmt 1 view .LVU93
 130:../../../mod/sensor/sensor.c **** #elif defined( ENGINE_CONTROLLER )
 287              		.loc 1 130 41 is_stmt 0 view .LVU94
 288 0058 D965     		str	r1, [r3, #92]
 157:../../../mod/sensor/sensor.c **** 
 289              		.loc 1 157 1 view .LVU95
 290 005a 7047     		bx	lr
 291              	.L13:
 292              		.align	2
 293              	.L12:
 294 005c 00000000 		.word	sensor_size_offsets_table
 295              		.cfi_endproc
 296              	.LFE144:
 298              		.section	.text.sensor_dump,"ax",%progbits
 299              		.align	1
 300              		.global	sensor_dump
 301              		.syntax unified
 302              		.thumb
 303              		.thumb_func
 305              	sensor_dump:
 306              	.LVL16:
 307              	.LFB146:
 384:../../../mod/sensor/sensor.c **** /*------------------------------------------------------------------------------
 308              		.loc 1 384 1 is_stmt 1 view -0
 309              		.cfi_startproc
 310              		@ args = 0, pretend = 0, frame = 0
ARM GAS  /tmp/ccN84Bm3.s 			page 23


 311              		@ frame_needed = 0, uses_anonymous_args = 0
 384:../../../mod/sensor/sensor.c **** /*------------------------------------------------------------------------------
 312              		.loc 1 384 1 is_stmt 0 view .LVU97
 313 0000 2DE9F041 		push	{r4, r5, r6, r7, r8, lr}
 314              	.LCFI5:
 315              		.cfi_def_cfa_offset 24
 316              		.cfi_offset 4, -24
 317              		.cfi_offset 5, -20
 318              		.cfi_offset 6, -16
 319              		.cfi_offset 7, -12
 320              		.cfi_offset 8, -8
 321              		.cfi_offset 14, -4
 322 0004 0446     		mov	r4, r0
 389:../../../mod/sensor/sensor.c **** 	IMU_STATUS      gyro_status;
 323              		.loc 1 389 2 is_stmt 1 view .LVU98
 390:../../../mod/sensor/sensor.c **** 	IMU_STATUS      mag_status; 
 324              		.loc 1 390 2 view .LVU99
 391:../../../mod/sensor/sensor.c **** 	BARO_STATUS     press_status;           /* Baro Sensor status codes    */
 325              		.loc 1 391 2 view .LVU100
 392:../../../mod/sensor/sensor.c **** 	BARO_STATUS     temp_status;
 326              		.loc 1 392 2 view .LVU101
 393:../../../mod/sensor/sensor.c **** #elif defined( ENGINE_CONTROLLER )
 327              		.loc 1 393 2 view .LVU102
 403:../../../mod/sensor/sensor.c **** 	gyro_status  = IMU_OK;
 328              		.loc 1 403 2 view .LVU103
 329              	.LVL17:
 404:../../../mod/sensor/sensor.c **** 	mag_status   = IMU_OK; 
 330              		.loc 1 404 2 view .LVU104
 405:../../../mod/sensor/sensor.c **** 	press_status = BARO_OK;           
 331              		.loc 1 405 2 view .LVU105
 406:../../../mod/sensor/sensor.c **** 	temp_status  = BARO_OK;
 332              		.loc 1 406 2 view .LVU106
 407:../../../mod/sensor/sensor.c **** #elif defined( ENGINE_CONTROLLER )
 333              		.loc 1 407 2 view .LVU107
 420:../../../mod/sensor/sensor.c **** 	gyro_status  = imu_get_gyro_xyz ( &(sensor_data_ptr->imu_data) );
 334              		.loc 1 420 2 view .LVU108
 420:../../../mod/sensor/sensor.c **** 	gyro_status  = imu_get_gyro_xyz ( &(sensor_data_ptr->imu_data) );
 335              		.loc 1 420 17 is_stmt 0 view .LVU109
 336 0006 FFF7FEFF 		bl	imu_get_accel_xyz
 337              	.LVL18:
 420:../../../mod/sensor/sensor.c **** 	gyro_status  = imu_get_gyro_xyz ( &(sensor_data_ptr->imu_data) );
 338              		.loc 1 420 17 view .LVU110
 339 000a 0646     		mov	r6, r0
 340              	.LVL19:
 421:../../../mod/sensor/sensor.c **** 	mag_status   = imu_get_mag_xyz  ( &(sensor_data_ptr->imu_data) );
 341              		.loc 1 421 2 is_stmt 1 view .LVU111
 421:../../../mod/sensor/sensor.c **** 	mag_status   = imu_get_mag_xyz  ( &(sensor_data_ptr->imu_data) );
 342              		.loc 1 421 17 is_stmt 0 view .LVU112
 343 000c 2046     		mov	r0, r4
 344 000e FFF7FEFF 		bl	imu_get_gyro_xyz
 345              	.LVL20:
 346 0012 0746     		mov	r7, r0
 347              	.LVL21:
 422:../../../mod/sensor/sensor.c **** 	sensor_data_ptr -> imu_data.temp = 0;     // Figure out what to do with this 
 348              		.loc 1 422 2 is_stmt 1 view .LVU113
 422:../../../mod/sensor/sensor.c **** 	sensor_data_ptr -> imu_data.temp = 0;     // Figure out what to do with this 
 349              		.loc 1 422 17 is_stmt 0 view .LVU114
ARM GAS  /tmp/ccN84Bm3.s 			page 24


 350 0014 2046     		mov	r0, r4
 351 0016 FFF7FEFF 		bl	imu_get_mag_xyz
 352              	.LVL22:
 353 001a 8046     		mov	r8, r0
 354              	.LVL23:
 423:../../../mod/sensor/sensor.c **** 											  // readout, temporarily being used 
 355              		.loc 1 423 2 is_stmt 1 view .LVU115
 423:../../../mod/sensor/sensor.c **** 											  // readout, temporarily being used 
 356              		.loc 1 423 35 is_stmt 0 view .LVU116
 357 001c 0023     		movs	r3, #0
 358 001e 6382     		strh	r3, [r4, #18]	@ movhi
 428:../../../mod/sensor/sensor.c **** 	press_status = baro_get_pressure( &(sensor_data_ptr -> baro_pressure ) );
 359              		.loc 1 428 2 is_stmt 1 view .LVU117
 428:../../../mod/sensor/sensor.c **** 	press_status = baro_get_pressure( &(sensor_data_ptr -> baro_pressure ) );
 360              		.loc 1 428 17 is_stmt 0 view .LVU118
 361 0020 04F11800 		add	r0, r4, #24
 362 0024 FFF7FEFF 		bl	baro_get_temp
 363              	.LVL24:
 364 0028 0546     		mov	r5, r0
 365              	.LVL25:
 429:../../../mod/sensor/sensor.c **** 
 366              		.loc 1 429 2 is_stmt 1 view .LVU119
 429:../../../mod/sensor/sensor.c **** 
 367              		.loc 1 429 17 is_stmt 0 view .LVU120
 368 002a 04F11400 		add	r0, r4, #20
 369 002e FFF7FEFF 		bl	baro_get_pressure
 370              	.LVL26:
 448:../../../mod/sensor/sensor.c **** 		{
 371              		.loc 1 448 2 is_stmt 1 view .LVU121
 448:../../../mod/sensor/sensor.c **** 		{
 372              		.loc 1 448 10 is_stmt 0 view .LVU122
 373 0032 5EB9     		cbnz	r6, .L16
 452:../../../mod/sensor/sensor.c **** 		{
 374              		.loc 1 452 7 is_stmt 1 view .LVU123
 452:../../../mod/sensor/sensor.c **** 		{
 375              		.loc 1 452 10 is_stmt 0 view .LVU124
 376 0034 67B9     		cbnz	r7, .L17
 456:../../../mod/sensor/sensor.c **** 		{
 377              		.loc 1 456 7 is_stmt 1 view .LVU125
 456:../../../mod/sensor/sensor.c **** 		{
 378              		.loc 1 456 10 is_stmt 0 view .LVU126
 379 0036 B8F1000F 		cmp	r8, #0
 380 003a 0BD1     		bne	.L18
 460:../../../mod/sensor/sensor.c **** 			temp_status  != BARO_OK  )
 381              		.loc 1 460 7 is_stmt 1 view .LVU127
 382 003c 2843     		orrs	r0, r0, r5
 383              	.LVL27:
 460:../../../mod/sensor/sensor.c **** 			temp_status  != BARO_OK  )
 384              		.loc 1 460 10 is_stmt 0 view .LVU128
 385 003e 10F0FF00 		ands	r0, r0, #255
 386 0042 01D1     		bne	.L20
 387              	.L15:
 484:../../../mod/sensor/sensor.c **** 
 388              		.loc 1 484 1 view .LVU129
 389 0044 BDE8F081 		pop	{r4, r5, r6, r7, r8, pc}
 390              	.LVL28:
 391              	.L20:
ARM GAS  /tmp/ccN84Bm3.s 			page 25


 463:../../../mod/sensor/sensor.c **** 		}
 392              		.loc 1 463 10 view .LVU130
 393 0048 0920     		movs	r0, #9
 394 004a FBE7     		b	.L15
 395              	.LVL29:
 396              	.L16:
 450:../../../mod/sensor/sensor.c **** 		}
 397              		.loc 1 450 10 view .LVU131
 398 004c 0620     		movs	r0, #6
 399              	.LVL30:
 450:../../../mod/sensor/sensor.c **** 		}
 400              		.loc 1 450 10 view .LVU132
 401 004e F9E7     		b	.L15
 402              	.LVL31:
 403              	.L17:
 454:../../../mod/sensor/sensor.c **** 		}
 404              		.loc 1 454 10 view .LVU133
 405 0050 0720     		movs	r0, #7
 406              	.LVL32:
 454:../../../mod/sensor/sensor.c **** 		}
 407              		.loc 1 454 10 view .LVU134
 408 0052 F7E7     		b	.L15
 409              	.LVL33:
 410              	.L18:
 458:../../../mod/sensor/sensor.c **** 		}
 411              		.loc 1 458 10 view .LVU135
 412 0054 0820     		movs	r0, #8
 413              	.LVL34:
 458:../../../mod/sensor/sensor.c **** 		}
 414              		.loc 1 458 10 view .LVU136
 415 0056 F5E7     		b	.L15
 416              		.cfi_endproc
 417              	.LFE146:
 419              		.section	.text.sensor_poll,"ax",%progbits
 420              		.align	1
 421              		.global	sensor_poll
 422              		.syntax unified
 423              		.thumb
 424              		.thumb_func
 426              	sensor_poll:
 427              	.LVL35:
 428              	.LFB147:
 502:../../../mod/sensor/sensor.c **** /*------------------------------------------------------------------------------
 429              		.loc 1 502 1 is_stmt 1 view -0
 430              		.cfi_startproc
 431              		@ args = 0, pretend = 0, frame = 0
 432              		@ frame_needed = 0, uses_anonymous_args = 0
 502:../../../mod/sensor/sensor.c **** /*------------------------------------------------------------------------------
 433              		.loc 1 502 1 is_stmt 0 view .LVU138
 434 0000 2DE9F84F 		push	{r3, r4, r5, r6, r7, r8, r9, r10, fp, lr}
 435              	.LCFI6:
 436              		.cfi_def_cfa_offset 40
 437              		.cfi_offset 3, -40
 438              		.cfi_offset 4, -36
 439              		.cfi_offset 5, -32
 440              		.cfi_offset 6, -28
 441              		.cfi_offset 7, -24
ARM GAS  /tmp/ccN84Bm3.s 			page 26


 442              		.cfi_offset 8, -20
 443              		.cfi_offset 9, -16
 444              		.cfi_offset 10, -12
 445              		.cfi_offset 11, -8
 446              		.cfi_offset 14, -4
 447 0004 8046     		mov	r8, r0
 448 0006 0E46     		mov	r6, r1
 449 0008 1746     		mov	r7, r2
 506:../../../mod/sensor/sensor.c **** SENSOR_ID* sensor_id_ptr;    /* Pointer to sensor id                */
 450              		.loc 1 506 1 is_stmt 1 view .LVU139
 507:../../../mod/sensor/sensor.c **** 
 451              		.loc 1 507 1 view .LVU140
 511:../../../mod/sensor/sensor.c **** 	BARO_STATUS   baro_status;     /* Baro module return codes  */
 452              		.loc 1 511 2 view .LVU141
 512:../../../mod/sensor/sensor.c **** #elif defined( ENGINE_CONTROLLER )
 453              		.loc 1 512 2 view .LVU142
 519:../../../mod/sensor/sensor.c **** 	bool imu_gyro_read;
 454              		.loc 1 519 2 view .LVU143
 520:../../../mod/sensor/sensor.c **** 	bool imu_mag_read;
 455              		.loc 1 520 2 view .LVU144
 521:../../../mod/sensor/sensor.c **** #endif
 456              		.loc 1 521 2 view .LVU145
 527:../../../mod/sensor/sensor.c **** sensor_id         = *(sensor_id_ptr   );
 457              		.loc 1 527 1 view .LVU146
 458              	.LVL36:
 528:../../../mod/sensor/sensor.c **** 
 459              		.loc 1 528 1 view .LVU147
 528:../../../mod/sensor/sensor.c **** 
 460              		.loc 1 528 19 is_stmt 0 view .LVU148
 461 000a 0D78     		ldrb	r5, [r1]	@ zero_extendqisi2
 462              	.LVL37:
 532:../../../mod/sensor/sensor.c **** 	baro_status   = BARO_OK;
 463              		.loc 1 532 2 is_stmt 1 view .LVU149
 533:../../../mod/sensor/sensor.c **** #elif defined( ENGINE_CONTROLLER )
 464              		.loc 1 533 2 view .LVU150
 540:../../../mod/sensor/sensor.c **** 	imu_gyro_read  = false;
 465              		.loc 1 540 2 view .LVU151
 541:../../../mod/sensor/sensor.c **** 	imu_mag_read   = false;
 466              		.loc 1 541 2 view .LVU152
 542:../../../mod/sensor/sensor.c **** #endif
 467              		.loc 1 542 2 view .LVU153
 551:../../../mod/sensor/sensor.c **** 	{
 468              		.loc 1 551 1 view .LVU154
 469              	.LBB3:
 551:../../../mod/sensor/sensor.c **** 	{
 470              		.loc 1 551 7 view .LVU155
 551:../../../mod/sensor/sensor.c **** 	{
 471              		.loc 1 551 11 is_stmt 0 view .LVU156
 472 000c 0024     		movs	r4, #0
 473              	.LBE3:
 542:../../../mod/sensor/sensor.c **** #endif
 474              		.loc 1 542 17 view .LVU157
 475 000e A346     		mov	fp, r4
 541:../../../mod/sensor/sensor.c **** 	imu_mag_read   = false;
 476              		.loc 1 541 17 view .LVU158
 477 0010 A246     		mov	r10, r4
 540:../../../mod/sensor/sensor.c **** 	imu_gyro_read  = false;
ARM GAS  /tmp/ccN84Bm3.s 			page 27


 478              		.loc 1 540 17 view .LVU159
 479 0012 A146     		mov	r9, r4
 480              	.LBB4:
 551:../../../mod/sensor/sensor.c **** 	{
 481              		.loc 1 551 1 view .LVU160
 482 0014 6BE0     		b	.L22
 483              	.LVL38:
 484              	.L36:
 560:../../../mod/sensor/sensor.c **** 					{
 485              		.loc 1 560 5 is_stmt 1 view .LVU161
 560:../../../mod/sensor/sensor.c **** 					{
 486              		.loc 1 560 8 is_stmt 0 view .LVU162
 487 0016 B9F1000F 		cmp	r9, #0
 488 001a 65D1     		bne	.L37
 562:../../../mod/sensor/sensor.c **** 					if ( imu_status != IMU_OK )
 489              		.loc 1 562 6 is_stmt 1 view .LVU163
 562:../../../mod/sensor/sensor.c **** 					if ( imu_status != IMU_OK )
 490              		.loc 1 562 19 is_stmt 0 view .LVU164
 491 001c 4046     		mov	r0, r8
 492 001e FFF7FEFF 		bl	imu_get_accel_xyz
 493              	.LVL39:
 563:../../../mod/sensor/sensor.c **** 						{
 494              		.loc 1 563 6 is_stmt 1 view .LVU165
 563:../../../mod/sensor/sensor.c **** 						{
 495              		.loc 1 563 9 is_stmt 0 view .LVU166
 496 0022 0028     		cmp	r0, #0
 497 0024 40F09D80 		bne	.L40
 567:../../../mod/sensor/sensor.c **** 					}
 498              		.loc 1 567 21 view .LVU167
 499 0028 4FF00109 		mov	r9, #1
 500              	.LVL40:
 567:../../../mod/sensor/sensor.c **** 					}
 501              		.loc 1 567 21 view .LVU168
 502 002c 5CE0     		b	.L37
 503              	.LVL41:
 504              	.L35:
 574:../../../mod/sensor/sensor.c **** 					{
 505              		.loc 1 574 5 is_stmt 1 view .LVU169
 574:../../../mod/sensor/sensor.c **** 					{
 506              		.loc 1 574 8 is_stmt 0 view .LVU170
 507 002e B9F1000F 		cmp	r9, #0
 508 0032 59D1     		bne	.L37
 576:../../../mod/sensor/sensor.c **** 					if ( imu_status != IMU_OK )
 509              		.loc 1 576 6 is_stmt 1 view .LVU171
 576:../../../mod/sensor/sensor.c **** 					if ( imu_status != IMU_OK )
 510              		.loc 1 576 19 is_stmt 0 view .LVU172
 511 0034 4046     		mov	r0, r8
 512 0036 FFF7FEFF 		bl	imu_get_accel_xyz
 513              	.LVL42:
 577:../../../mod/sensor/sensor.c **** 						{
 514              		.loc 1 577 6 is_stmt 1 view .LVU173
 577:../../../mod/sensor/sensor.c **** 						{
 515              		.loc 1 577 9 is_stmt 0 view .LVU174
 516 003a 0028     		cmp	r0, #0
 517 003c 40F09380 		bne	.L41
 581:../../../mod/sensor/sensor.c **** 					}
 518              		.loc 1 581 21 view .LVU175
ARM GAS  /tmp/ccN84Bm3.s 			page 28


 519 0040 4FF00109 		mov	r9, #1
 520              	.LVL43:
 581:../../../mod/sensor/sensor.c **** 					}
 521              		.loc 1 581 21 view .LVU176
 522 0044 50E0     		b	.L37
 523              	.LVL44:
 524              	.L34:
 588:../../../mod/sensor/sensor.c **** 					{
 525              		.loc 1 588 5 is_stmt 1 view .LVU177
 588:../../../mod/sensor/sensor.c **** 					{
 526              		.loc 1 588 8 is_stmt 0 view .LVU178
 527 0046 B9F1000F 		cmp	r9, #0
 528 004a 4DD1     		bne	.L37
 590:../../../mod/sensor/sensor.c **** 					if ( imu_status != IMU_OK )
 529              		.loc 1 590 6 is_stmt 1 view .LVU179
 590:../../../mod/sensor/sensor.c **** 					if ( imu_status != IMU_OK )
 530              		.loc 1 590 19 is_stmt 0 view .LVU180
 531 004c 4046     		mov	r0, r8
 532 004e FFF7FEFF 		bl	imu_get_accel_xyz
 533              	.LVL45:
 591:../../../mod/sensor/sensor.c **** 						{
 534              		.loc 1 591 6 is_stmt 1 view .LVU181
 591:../../../mod/sensor/sensor.c **** 						{
 535              		.loc 1 591 9 is_stmt 0 view .LVU182
 536 0052 0028     		cmp	r0, #0
 537 0054 40F08980 		bne	.L42
 595:../../../mod/sensor/sensor.c **** 					}
 538              		.loc 1 595 21 view .LVU183
 539 0058 4FF00109 		mov	r9, #1
 540              	.LVL46:
 595:../../../mod/sensor/sensor.c **** 					}
 541              		.loc 1 595 21 view .LVU184
 542 005c 44E0     		b	.L37
 543              	.LVL47:
 544              	.L33:
 602:../../../mod/sensor/sensor.c **** 					{
 545              		.loc 1 602 5 is_stmt 1 view .LVU185
 602:../../../mod/sensor/sensor.c **** 					{
 546              		.loc 1 602 8 is_stmt 0 view .LVU186
 547 005e BAF1000F 		cmp	r10, #0
 548 0062 41D1     		bne	.L37
 604:../../../mod/sensor/sensor.c **** 					if ( imu_status != IMU_OK )
 549              		.loc 1 604 6 is_stmt 1 view .LVU187
 604:../../../mod/sensor/sensor.c **** 					if ( imu_status != IMU_OK )
 550              		.loc 1 604 19 is_stmt 0 view .LVU188
 551 0064 4046     		mov	r0, r8
 552 0066 FFF7FEFF 		bl	imu_get_gyro_xyz
 553              	.LVL48:
 605:../../../mod/sensor/sensor.c **** 						{
 554              		.loc 1 605 6 is_stmt 1 view .LVU189
 605:../../../mod/sensor/sensor.c **** 						{
 555              		.loc 1 605 9 is_stmt 0 view .LVU190
 556 006a 0028     		cmp	r0, #0
 557 006c 7FD1     		bne	.L43
 609:../../../mod/sensor/sensor.c **** 					}
 558              		.loc 1 609 20 view .LVU191
 559 006e 4FF0010A 		mov	r10, #1
ARM GAS  /tmp/ccN84Bm3.s 			page 29


 560              	.LVL49:
 609:../../../mod/sensor/sensor.c **** 					}
 561              		.loc 1 609 20 view .LVU192
 562 0072 39E0     		b	.L37
 563              	.LVL50:
 564              	.L32:
 616:../../../mod/sensor/sensor.c **** 					{
 565              		.loc 1 616 5 is_stmt 1 view .LVU193
 616:../../../mod/sensor/sensor.c **** 					{
 566              		.loc 1 616 8 is_stmt 0 view .LVU194
 567 0074 BAF1000F 		cmp	r10, #0
 568 0078 36D1     		bne	.L37
 618:../../../mod/sensor/sensor.c **** 					if ( imu_status != IMU_OK )
 569              		.loc 1 618 6 is_stmt 1 view .LVU195
 618:../../../mod/sensor/sensor.c **** 					if ( imu_status != IMU_OK )
 570              		.loc 1 618 19 is_stmt 0 view .LVU196
 571 007a 4046     		mov	r0, r8
 572 007c FFF7FEFF 		bl	imu_get_gyro_xyz
 573              	.LVL51:
 619:../../../mod/sensor/sensor.c **** 						{
 574              		.loc 1 619 6 is_stmt 1 view .LVU197
 619:../../../mod/sensor/sensor.c **** 						{
 575              		.loc 1 619 9 is_stmt 0 view .LVU198
 576 0080 0028     		cmp	r0, #0
 577 0082 76D1     		bne	.L44
 623:../../../mod/sensor/sensor.c **** 					}
 578              		.loc 1 623 20 view .LVU199
 579 0084 4FF0010A 		mov	r10, #1
 580              	.LVL52:
 623:../../../mod/sensor/sensor.c **** 					}
 581              		.loc 1 623 20 view .LVU200
 582 0088 2EE0     		b	.L37
 583              	.LVL53:
 584              	.L31:
 630:../../../mod/sensor/sensor.c **** 					{
 585              		.loc 1 630 5 is_stmt 1 view .LVU201
 630:../../../mod/sensor/sensor.c **** 					{
 586              		.loc 1 630 8 is_stmt 0 view .LVU202
 587 008a BAF1000F 		cmp	r10, #0
 588 008e 2BD1     		bne	.L37
 632:../../../mod/sensor/sensor.c **** 					if ( imu_status != IMU_OK )
 589              		.loc 1 632 6 is_stmt 1 view .LVU203
 632:../../../mod/sensor/sensor.c **** 					if ( imu_status != IMU_OK )
 590              		.loc 1 632 19 is_stmt 0 view .LVU204
 591 0090 4046     		mov	r0, r8
 592 0092 FFF7FEFF 		bl	imu_get_gyro_xyz
 593              	.LVL54:
 633:../../../mod/sensor/sensor.c **** 						{
 594              		.loc 1 633 6 is_stmt 1 view .LVU205
 633:../../../mod/sensor/sensor.c **** 						{
 595              		.loc 1 633 9 is_stmt 0 view .LVU206
 596 0096 0028     		cmp	r0, #0
 597 0098 6DD1     		bne	.L45
 637:../../../mod/sensor/sensor.c **** 					}
 598              		.loc 1 637 20 view .LVU207
 599 009a 4FF0010A 		mov	r10, #1
 600              	.LVL55:
ARM GAS  /tmp/ccN84Bm3.s 			page 30


 637:../../../mod/sensor/sensor.c **** 					}
 601              		.loc 1 637 20 view .LVU208
 602 009e 23E0     		b	.L37
 603              	.LVL56:
 604              	.L30:
 644:../../../mod/sensor/sensor.c **** 					{
 605              		.loc 1 644 5 is_stmt 1 view .LVU209
 644:../../../mod/sensor/sensor.c **** 					{
 606              		.loc 1 644 8 is_stmt 0 view .LVU210
 607 00a0 BBF1000F 		cmp	fp, #0
 608 00a4 20D1     		bne	.L37
 646:../../../mod/sensor/sensor.c **** 					if ( imu_status != IMU_OK )
 609              		.loc 1 646 6 is_stmt 1 view .LVU211
 646:../../../mod/sensor/sensor.c **** 					if ( imu_status != IMU_OK )
 610              		.loc 1 646 19 is_stmt 0 view .LVU212
 611 00a6 4046     		mov	r0, r8
 612 00a8 FFF7FEFF 		bl	imu_get_mag_xyz
 613              	.LVL57:
 647:../../../mod/sensor/sensor.c **** 						{
 614              		.loc 1 647 6 is_stmt 1 view .LVU213
 647:../../../mod/sensor/sensor.c **** 						{
 615              		.loc 1 647 9 is_stmt 0 view .LVU214
 616 00ac 0028     		cmp	r0, #0
 617 00ae 64D1     		bne	.L46
 651:../../../mod/sensor/sensor.c **** 					}
 618              		.loc 1 651 19 view .LVU215
 619 00b0 4FF0010B 		mov	fp, #1
 620              	.LVL58:
 651:../../../mod/sensor/sensor.c **** 					}
 621              		.loc 1 651 19 view .LVU216
 622 00b4 18E0     		b	.L37
 623              	.LVL59:
 624              	.L29:
 658:../../../mod/sensor/sensor.c **** 					{
 625              		.loc 1 658 5 is_stmt 1 view .LVU217
 658:../../../mod/sensor/sensor.c **** 					{
 626              		.loc 1 658 8 is_stmt 0 view .LVU218
 627 00b6 BBF1000F 		cmp	fp, #0
 628 00ba 15D1     		bne	.L37
 660:../../../mod/sensor/sensor.c **** 					if ( imu_status != IMU_OK )
 629              		.loc 1 660 6 is_stmt 1 view .LVU219
 660:../../../mod/sensor/sensor.c **** 					if ( imu_status != IMU_OK )
 630              		.loc 1 660 19 is_stmt 0 view .LVU220
 631 00bc 4046     		mov	r0, r8
 632 00be FFF7FEFF 		bl	imu_get_mag_xyz
 633              	.LVL60:
 661:../../../mod/sensor/sensor.c **** 						{
 634              		.loc 1 661 6 is_stmt 1 view .LVU221
 661:../../../mod/sensor/sensor.c **** 						{
 635              		.loc 1 661 9 is_stmt 0 view .LVU222
 636 00c2 0028     		cmp	r0, #0
 637 00c4 48D1     		bne	.L23
 665:../../../mod/sensor/sensor.c **** 					}
 638              		.loc 1 665 19 view .LVU223
 639 00c6 4FF0010B 		mov	fp, #1
 640              	.LVL61:
 665:../../../mod/sensor/sensor.c **** 					}
ARM GAS  /tmp/ccN84Bm3.s 			page 31


 641              		.loc 1 665 19 view .LVU224
 642 00ca 0DE0     		b	.L37
 643              	.LVL62:
 644              	.L28:
 672:../../../mod/sensor/sensor.c **** 					{
 645              		.loc 1 672 5 is_stmt 1 view .LVU225
 672:../../../mod/sensor/sensor.c **** 					{
 646              		.loc 1 672 8 is_stmt 0 view .LVU226
 647 00cc BBF1000F 		cmp	fp, #0
 648 00d0 0AD1     		bne	.L37
 674:../../../mod/sensor/sensor.c **** 					if ( imu_status != IMU_OK )
 649              		.loc 1 674 6 is_stmt 1 view .LVU227
 674:../../../mod/sensor/sensor.c **** 					if ( imu_status != IMU_OK )
 650              		.loc 1 674 19 is_stmt 0 view .LVU228
 651 00d2 4046     		mov	r0, r8
 652 00d4 FFF7FEFF 		bl	imu_get_mag_xyz
 653              	.LVL63:
 675:../../../mod/sensor/sensor.c **** 						{
 654              		.loc 1 675 6 is_stmt 1 view .LVU229
 675:../../../mod/sensor/sensor.c **** 						{
 655              		.loc 1 675 9 is_stmt 0 view .LVU230
 656 00d8 0028     		cmp	r0, #0
 657 00da 50D1     		bne	.L47
 679:../../../mod/sensor/sensor.c **** 					}
 658              		.loc 1 679 19 view .LVU231
 659 00dc 4FF0010B 		mov	fp, #1
 660              	.LVL64:
 679:../../../mod/sensor/sensor.c **** 					}
 661              		.loc 1 679 19 view .LVU232
 662 00e0 02E0     		b	.L37
 663              	.LVL65:
 664              	.L27:
 686:../../../mod/sensor/sensor.c **** 				break;
 665              		.loc 1 686 5 is_stmt 1 view .LVU233
 686:../../../mod/sensor/sensor.c **** 				break;
 666              		.loc 1 686 38 is_stmt 0 view .LVU234
 667 00e2 0023     		movs	r3, #0
 668 00e4 A8F81230 		strh	r3, [r8, #18]	@ movhi
 687:../../../mod/sensor/sensor.c **** 				}
 669              		.loc 1 687 5 is_stmt 1 view .LVU235
 670              	.LVL66:
 671              	.L37:
 791:../../../mod/sensor/sensor.c **** 		sensor_id        = *(sensor_id_ptr   );
 672              		.loc 1 791 3 discriminator 2 view .LVU236
 792:../../../mod/sensor/sensor.c **** 
 673              		.loc 1 792 3 discriminator 2 view .LVU237
 792:../../../mod/sensor/sensor.c **** 
 674              		.loc 1 792 20 is_stmt 0 discriminator 2 view .LVU238
 675 00e8 16F8015F 		ldrb	r5, [r6, #1]!	@ zero_extendqisi2
 676              	.LVL67:
 551:../../../mod/sensor/sensor.c **** 	{
 677              		.loc 1 551 35 is_stmt 1 discriminator 2 view .LVU239
 678 00ec 0134     		adds	r4, r4, #1
 679              	.LVL68:
 680              	.L22:
 551:../../../mod/sensor/sensor.c **** 	{
 681              		.loc 1 551 20 discriminator 1 view .LVU240
ARM GAS  /tmp/ccN84Bm3.s 			page 32


 682 00ee A742     		cmp	r7, r4
 683 00f0 31DD     		ble	.L52
 555:../../../mod/sensor/sensor.c **** 		{
 684              		.loc 1 555 2 view .LVU241
 685 00f2 0B2D     		cmp	r5, #11
 686 00f4 33D8     		bhi	.L39
 687 00f6 01A3     		adr	r3, .L25
 688 00f8 53F825F0 		ldr	pc, [r3, r5, lsl #2]
 689              		.p2align 2
 690              	.L25:
 691 00fc 17000000 		.word	.L36+1
 692 0100 2F000000 		.word	.L35+1
 693 0104 47000000 		.word	.L34+1
 694 0108 5F000000 		.word	.L33+1
 695 010c 75000000 		.word	.L32+1
 696 0110 8B000000 		.word	.L31+1
 697 0114 A1000000 		.word	.L30+1
 698 0118 B7000000 		.word	.L29+1
 699 011c CD000000 		.word	.L28+1
 700 0120 E3000000 		.word	.L27+1
 701 0124 2D010000 		.word	.L26+1
 702 0128 47010000 		.word	.L24+1
 703              		.p2align 1
 704              	.L26:
 692:../../../mod/sensor/sensor.c **** 				if ( baro_status != BARO_OK )
 705              		.loc 1 692 5 view .LVU242
 692:../../../mod/sensor/sensor.c **** 				if ( baro_status != BARO_OK )
 706              		.loc 1 692 19 is_stmt 0 view .LVU243
 707 012c 08F11800 		add	r0, r8, #24
 708 0130 FFF7FEFF 		bl	baro_get_temp
 709              	.LVL69:
 693:../../../mod/sensor/sensor.c **** 					{
 710              		.loc 1 693 5 is_stmt 1 view .LVU244
 693:../../../mod/sensor/sensor.c **** 					{
 711              		.loc 1 693 8 is_stmt 0 view .LVU245
 712 0134 28BB     		cbnz	r0, .L48
 697:../../../mod/sensor/sensor.c **** 				if ( baro_status != BARO_OK )
 713              		.loc 1 697 5 is_stmt 1 view .LVU246
 697:../../../mod/sensor/sensor.c **** 				if ( baro_status != BARO_OK )
 714              		.loc 1 697 19 is_stmt 0 view .LVU247
 715 0136 08F11400 		add	r0, r8, #20
 716              	.LVL70:
 697:../../../mod/sensor/sensor.c **** 				if ( baro_status != BARO_OK )
 717              		.loc 1 697 19 view .LVU248
 718 013a FFF7FEFF 		bl	baro_get_pressure
 719              	.LVL71:
 698:../../../mod/sensor/sensor.c **** 					{
 720              		.loc 1 698 5 is_stmt 1 view .LVU249
 698:../../../mod/sensor/sensor.c **** 					{
 721              		.loc 1 698 8 is_stmt 0 view .LVU250
 722 013e 0028     		cmp	r0, #0
 723 0140 D2D0     		beq	.L37
 700:../../../mod/sensor/sensor.c **** 					}
 724              		.loc 1 700 13 view .LVU251
 725 0142 0925     		movs	r5, #9
 726              	.LVL72:
 700:../../../mod/sensor/sensor.c **** 					}
ARM GAS  /tmp/ccN84Bm3.s 			page 33


 727              		.loc 1 700 13 view .LVU252
 728 0144 08E0     		b	.L23
 729              	.LVL73:
 730              	.L24:
 707:../../../mod/sensor/sensor.c **** 				if ( baro_status != BARO_OK )
 731              		.loc 1 707 5 is_stmt 1 view .LVU253
 707:../../../mod/sensor/sensor.c **** 				if ( baro_status != BARO_OK )
 732              		.loc 1 707 19 is_stmt 0 view .LVU254
 733 0146 08F11800 		add	r0, r8, #24
 734 014a FFF7FEFF 		bl	baro_get_temp
 735              	.LVL74:
 708:../../../mod/sensor/sensor.c **** 					{
 736              		.loc 1 708 5 is_stmt 1 view .LVU255
 708:../../../mod/sensor/sensor.c **** 					{
 737              		.loc 1 708 8 is_stmt 0 view .LVU256
 738 014e 0028     		cmp	r0, #0
 739 0150 CAD0     		beq	.L37
 710:../../../mod/sensor/sensor.c **** 					}
 740              		.loc 1 710 13 view .LVU257
 741 0152 0925     		movs	r5, #9
 742              	.LVL75:
 710:../../../mod/sensor/sensor.c **** 					}
 743              		.loc 1 710 13 view .LVU258
 744 0154 00E0     		b	.L23
 745              	.LVL76:
 746              	.L52:
 710:../../../mod/sensor/sensor.c **** 					}
 747              		.loc 1 710 13 view .LVU259
 748              	.LBE4:
 796:../../../mod/sensor/sensor.c **** } /* sensor_poll */
 749              		.loc 1 796 8 view .LVU260
 750 0156 0025     		movs	r5, #0
 751              	.LVL77:
 752              	.L23:
 797:../../../mod/sensor/sensor.c **** #endif /* #if defined( TERMINAL ) */
 753              		.loc 1 797 1 view .LVU261
 754 0158 2846     		mov	r0, r5
 755 015a BDE8F88F 		pop	{r3, r4, r5, r6, r7, r8, r9, r10, fp, pc}
 756              	.LVL78:
 757              	.L39:
 758              	.LBB5:
 555:../../../mod/sensor/sensor.c **** 		{
 759              		.loc 1 555 2 view .LVU262
 760 015e 0B25     		movs	r5, #11
 761              	.LVL79:
 555:../../../mod/sensor/sensor.c **** 		{
 762              		.loc 1 555 2 view .LVU263
 763 0160 FAE7     		b	.L23
 764              	.LVL80:
 765              	.L40:
 565:../../../mod/sensor/sensor.c **** 						}
 766              		.loc 1 565 14 view .LVU264
 767 0162 0625     		movs	r5, #6
 768              	.LVL81:
 565:../../../mod/sensor/sensor.c **** 						}
 769              		.loc 1 565 14 view .LVU265
 770 0164 F8E7     		b	.L23
ARM GAS  /tmp/ccN84Bm3.s 			page 34


 771              	.LVL82:
 772              	.L41:
 579:../../../mod/sensor/sensor.c **** 						}
 773              		.loc 1 579 14 view .LVU266
 774 0166 0625     		movs	r5, #6
 775              	.LVL83:
 579:../../../mod/sensor/sensor.c **** 						}
 776              		.loc 1 579 14 view .LVU267
 777 0168 F6E7     		b	.L23
 778              	.LVL84:
 779              	.L42:
 593:../../../mod/sensor/sensor.c **** 						}
 780              		.loc 1 593 14 view .LVU268
 781 016a 0625     		movs	r5, #6
 782              	.LVL85:
 593:../../../mod/sensor/sensor.c **** 						}
 783              		.loc 1 593 14 view .LVU269
 784 016c F4E7     		b	.L23
 785              	.LVL86:
 786              	.L43:
 607:../../../mod/sensor/sensor.c **** 						}
 787              		.loc 1 607 14 view .LVU270
 788 016e 0725     		movs	r5, #7
 789              	.LVL87:
 607:../../../mod/sensor/sensor.c **** 						}
 790              		.loc 1 607 14 view .LVU271
 791 0170 F2E7     		b	.L23
 792              	.LVL88:
 793              	.L44:
 621:../../../mod/sensor/sensor.c **** 						}
 794              		.loc 1 621 14 view .LVU272
 795 0172 0725     		movs	r5, #7
 796              	.LVL89:
 621:../../../mod/sensor/sensor.c **** 						}
 797              		.loc 1 621 14 view .LVU273
 798 0174 F0E7     		b	.L23
 799              	.LVL90:
 800              	.L45:
 635:../../../mod/sensor/sensor.c **** 						}
 801              		.loc 1 635 14 view .LVU274
 802 0176 0725     		movs	r5, #7
 803              	.LVL91:
 635:../../../mod/sensor/sensor.c **** 						}
 804              		.loc 1 635 14 view .LVU275
 805 0178 EEE7     		b	.L23
 806              	.LVL92:
 807              	.L46:
 649:../../../mod/sensor/sensor.c **** 						}
 808              		.loc 1 649 14 view .LVU276
 809 017a 0725     		movs	r5, #7
 810              	.LVL93:
 649:../../../mod/sensor/sensor.c **** 						}
 811              		.loc 1 649 14 view .LVU277
 812 017c ECE7     		b	.L23
 813              	.LVL94:
 814              	.L47:
 677:../../../mod/sensor/sensor.c **** 						}
ARM GAS  /tmp/ccN84Bm3.s 			page 35


 815              		.loc 1 677 14 view .LVU278
 816 017e 0725     		movs	r5, #7
 817              	.LVL95:
 677:../../../mod/sensor/sensor.c **** 						}
 818              		.loc 1 677 14 view .LVU279
 819 0180 EAE7     		b	.L23
 820              	.LVL96:
 821              	.L48:
 695:../../../mod/sensor/sensor.c **** 					}
 822              		.loc 1 695 13 view .LVU280
 823 0182 0925     		movs	r5, #9
 824              	.LVL97:
 695:../../../mod/sensor/sensor.c **** 					}
 825              		.loc 1 695 13 view .LVU281
 826 0184 E8E7     		b	.L23
 827              	.LBE5:
 828              		.cfi_endproc
 829              	.LFE147:
 831 0186 00BF     		.section	.text.sensor_cmd_execute,"ax",%progbits
 832              		.align	1
 833              		.global	sensor_cmd_execute
 834              		.syntax unified
 835              		.thumb
 836              		.thumb_func
 838              	sensor_cmd_execute:
 839              	.LVL98:
 840              	.LFB145:
 173:../../../mod/sensor/sensor.c **** 
 841              		.loc 1 173 1 is_stmt 1 view -0
 842              		.cfi_startproc
 843              		@ args = 0, pretend = 0, frame = 72
 844              		@ frame_needed = 0, uses_anonymous_args = 0
 173:../../../mod/sensor/sensor.c **** 
 845              		.loc 1 173 1 is_stmt 0 view .LVU283
 846 0000 30B5     		push	{r4, r5, lr}
 847              	.LCFI7:
 848              		.cfi_def_cfa_offset 12
 849              		.cfi_offset 4, -12
 850              		.cfi_offset 5, -8
 851              		.cfi_offset 14, -4
 852 0002 95B0     		sub	sp, sp, #84
 853              	.LCFI8:
 854              		.cfi_def_cfa_offset 96
 178:../../../mod/sensor/sensor.c ****                                                        subcommand function 
 855              		.loc 1 178 1 is_stmt 1 view .LVU284
 181:../../../mod/sensor/sensor.c **** SENSOR_DATA   sensor_data;                           /* Struct with all sensor 
 856              		.loc 1 181 1 view .LVU285
 182:../../../mod/sensor/sensor.c ****                                                         data                  */
 857              		.loc 1 182 1 view .LVU286
 184:../../../mod/sensor/sensor.c ****                                                        readouts               */
 858              		.loc 1 184 1 view .LVU287
 186:../../../mod/sensor/sensor.c **** uint8_t       num_sensors;                           /* Number of sensors to 
 859              		.loc 1 186 1 view .LVU288
 186:../../../mod/sensor/sensor.c **** uint8_t       num_sensors;                           /* Number of sensors to 
 860              		.loc 1 186 15 is_stmt 0 view .LVU289
 861 0004 1C23     		movs	r3, #28
 862 0006 8DF81730 		strb	r3, [sp, #23]
ARM GAS  /tmp/ccN84Bm3.s 			page 36


 187:../../../mod/sensor/sensor.c ****                                                         use for polling       */
 863              		.loc 1 187 1 is_stmt 1 view .LVU290
 189:../../../mod/sensor/sensor.c ****                                                         be polled             */
 864              		.loc 1 189 1 view .LVU291
 191:../../../mod/sensor/sensor.c ****                                                         sensor poll           */
 865              		.loc 1 191 1 view .LVU292
 197:../../../mod/sensor/sensor.c **** sensor_status   = SENSOR_OK;
 866              		.loc 1 197 1 view .LVU293
 867              	.LVL99:
 198:../../../mod/sensor/sensor.c **** num_sensors     = 0;
 868              		.loc 1 198 1 view .LVU294
 199:../../../mod/sensor/sensor.c **** sensor_poll_cmd = 0;
 869              		.loc 1 199 1 view .LVU295
 199:../../../mod/sensor/sensor.c **** sensor_poll_cmd = 0;
 870              		.loc 1 199 17 is_stmt 0 view .LVU296
 871 000a 0023     		movs	r3, #0
 872 000c 8DF81630 		strb	r3, [sp, #22]
 200:../../../mod/sensor/sensor.c **** memset( &sensor_data_bytes[0], 0, sizeof( sensor_data_bytes ) );
 873              		.loc 1 200 1 is_stmt 1 view .LVU297
 200:../../../mod/sensor/sensor.c **** memset( &sensor_data_bytes[0], 0, sizeof( sensor_data_bytes ) );
 874              		.loc 1 200 17 is_stmt 0 view .LVU298
 875 0010 8DF80F30 		strb	r3, [sp, #15]
 201:../../../mod/sensor/sensor.c **** memset( &sensor_data         , 0, sizeof( sensor_data       ) );
 876              		.loc 1 201 1 is_stmt 1 view .LVU299
 877 0014 0693     		str	r3, [sp, #24]
 878 0016 0793     		str	r3, [sp, #28]
 879 0018 0893     		str	r3, [sp, #32]
 880 001a 0993     		str	r3, [sp, #36]
 881 001c 0A93     		str	r3, [sp, #40]
 882 001e 0B93     		str	r3, [sp, #44]
 883 0020 0C93     		str	r3, [sp, #48]
 202:../../../mod/sensor/sensor.c **** memset( &poll_sensors[0]     , 0, sizeof( poll_sensors      ) );
 884              		.loc 1 202 1 view .LVU300
 885 0022 0D93     		str	r3, [sp, #52]
 886 0024 0E93     		str	r3, [sp, #56]
 887 0026 0F93     		str	r3, [sp, #60]
 888 0028 1093     		str	r3, [sp, #64]
 889 002a 1193     		str	r3, [sp, #68]
 890 002c 1293     		str	r3, [sp, #72]
 891 002e 1393     		str	r3, [sp, #76]
 203:../../../mod/sensor/sensor.c **** 
 892              		.loc 1 203 1 view .LVU301
 893 0030 0493     		str	r3, [sp, #16]
 894 0032 8DF81430 		strb	r3, [sp, #20]
 209:../../../mod/sensor/sensor.c **** 	{
 895              		.loc 1 209 1 view .LVU302
 896 0036 0128     		cmp	r0, #1
 897 0038 61D0     		beq	.L54
 898 003a 0228     		cmp	r0, #2
 899 003c 40F08180 		bne	.L64
 217:../../../mod/sensor/sensor.c **** 		                          sizeof( num_sensors ), 
 900              		.loc 1 217 3 view .LVU303
 217:../../../mod/sensor/sensor.c **** 		                          sizeof( num_sensors ), 
 901              		.loc 1 217 16 is_stmt 0 view .LVU304
 902 0040 4FF0FF32 		mov	r2, #-1
 903 0044 0121     		movs	r1, #1
 904 0046 0DF11600 		add	r0, sp, #22
ARM GAS  /tmp/ccN84Bm3.s 			page 37


 905              	.LVL100:
 217:../../../mod/sensor/sensor.c **** 		                          sizeof( num_sensors ), 
 906              		.loc 1 217 16 view .LVU305
 907 004a FFF7FEFF 		bl	usb_receive
 908              	.LVL101:
 220:../../../mod/sensor/sensor.c **** 			{
 909              		.loc 1 220 3 is_stmt 1 view .LVU306
 220:../../../mod/sensor/sensor.c **** 			{
 910              		.loc 1 220 6 is_stmt 0 view .LVU307
 911 004e 0028     		cmp	r0, #0
 912 0050 7BD1     		bne	.L65
 226:../../../mod/sensor/sensor.c **** 		                          num_sensors     , 
 913              		.loc 1 226 3 is_stmt 1 view .LVU308
 226:../../../mod/sensor/sensor.c **** 		                          num_sensors     , 
 914              		.loc 1 226 16 is_stmt 0 view .LVU309
 915 0052 4FF0FF32 		mov	r2, #-1
 916 0056 9DF81610 		ldrb	r1, [sp, #22]	@ zero_extendqisi2
 917 005a 04A8     		add	r0, sp, #16
 918              	.LVL102:
 226:../../../mod/sensor/sensor.c **** 		                          num_sensors     , 
 919              		.loc 1 226 16 view .LVU310
 920 005c FFF7FEFF 		bl	usb_receive
 921              	.LVL103:
 229:../../../mod/sensor/sensor.c **** 			{
 922              		.loc 1 229 3 is_stmt 1 view .LVU311
 229:../../../mod/sensor/sensor.c **** 			{
 923              		.loc 1 229 6 is_stmt 0 view .LVU312
 924 0060 0028     		cmp	r0, #0
 925 0062 74D1     		bne	.L66
 235:../../../mod/sensor/sensor.c **** 		                           sizeof( sensor_poll_cmd ),
 926              		.loc 1 235 3 is_stmt 1 view .LVU313
 235:../../../mod/sensor/sensor.c **** 		                           sizeof( sensor_poll_cmd ),
 927              		.loc 1 235 16 is_stmt 0 view .LVU314
 928 0064 4FF0FF32 		mov	r2, #-1
 929 0068 0121     		movs	r1, #1
 930 006a 0DF10F00 		add	r0, sp, #15
 931              	.LVL104:
 235:../../../mod/sensor/sensor.c **** 		                           sizeof( sensor_poll_cmd ),
 932              		.loc 1 235 16 view .LVU315
 933 006e FFF7FEFF 		bl	usb_receive
 934              	.LVL105:
 238:../../../mod/sensor/sensor.c **** 			{
 935              		.loc 1 238 3 is_stmt 1 view .LVU316
 238:../../../mod/sensor/sensor.c **** 			{
 936              		.loc 1 238 11 is_stmt 0 view .LVU317
 937 0072 0446     		mov	r4, r0
 938 0074 0028     		cmp	r0, #0
 939 0076 6CD1     		bne	.L67
 242:../../../mod/sensor/sensor.c **** 			{
 940              		.loc 1 242 8 is_stmt 1 view .LVU318
 242:../../../mod/sensor/sensor.c **** 			{
 941              		.loc 1 242 29 is_stmt 0 view .LVU319
 942 0078 9DF80F30 		ldrb	r3, [sp, #15]	@ zero_extendqisi2
 242:../../../mod/sensor/sensor.c **** 			{
 943              		.loc 1 242 11 view .LVU320
 944 007c F32B     		cmp	r3, #243
 945 007e 27D0     		beq	.L58
ARM GAS  /tmp/ccN84Bm3.s 			page 38


 245:../../../mod/sensor/sensor.c **** 			}
 946              		.loc 1 245 11 view .LVU321
 947 0080 0C24     		movs	r4, #12
 948 0082 5FE0     		b	.L55
 949              	.LVL106:
 950              	.L57:
 267:../../../mod/sensor/sensor.c **** 												 &poll_sensors[0],
 951              		.loc 1 267 6 is_stmt 1 view .LVU322
 267:../../../mod/sensor/sensor.c **** 												 &poll_sensors[0],
 952              		.loc 1 267 22 is_stmt 0 view .LVU323
 953 0084 9DF81620 		ldrb	r2, [sp, #22]	@ zero_extendqisi2
 954 0088 04A9     		add	r1, sp, #16
 955 008a 0DA8     		add	r0, sp, #52
 956              	.LVL107:
 267:../../../mod/sensor/sensor.c **** 												 &poll_sensors[0],
 957              		.loc 1 267 22 view .LVU324
 958 008c FFF7FEFF 		bl	sensor_poll
 959              	.LVL108:
 270:../../../mod/sensor/sensor.c **** 						{
 960              		.loc 1 270 6 is_stmt 1 view .LVU325
 270:../../../mod/sensor/sensor.c **** 						{
 961              		.loc 1 270 9 is_stmt 0 view .LVU326
 962 0090 0446     		mov	r4, r0
 963 0092 0028     		cmp	r0, #0
 964 0094 61D1     		bne	.L70
 277:../../../mod/sensor/sensor.c **** 						                      &poll_sensors[0],
 965              		.loc 1 277 7 is_stmt 1 view .LVU327
 966 0096 0DF11703 		add	r3, sp, #23
 967 009a 0093     		str	r3, [sp]
 968 009c 06AB     		add	r3, sp, #24
 969 009e 9DF81620 		ldrb	r2, [sp, #22]	@ zero_extendqisi2
 970 00a2 04A9     		add	r1, sp, #16
 971 00a4 0DA8     		add	r0, sp, #52
 972              	.LVL109:
 277:../../../mod/sensor/sensor.c **** 						                      &poll_sensors[0],
 973              		.loc 1 277 7 is_stmt 0 view .LVU328
 974 00a6 FFF7FEFF 		bl	extract_sensor_bytes
 975              	.LVL110:
 284:../../../mod/sensor/sensor.c **** 						              num_sensor_bytes     ,
 976              		.loc 1 284 7 is_stmt 1 view .LVU329
 977 00aa 4FF0FF32 		mov	r2, #-1
 978 00ae 9DF81710 		ldrb	r1, [sp, #23]	@ zero_extendqisi2
 979 00b2 06A8     		add	r0, sp, #24
 980 00b4 FFF7FEFF 		bl	usb_transmit
 981              	.LVL111:
 288:../../../mod/sensor/sensor.c **** 						}
 982              		.loc 1 288 7 view .LVU330
 983 00b8 0AE0     		b	.L58
 984              	.LVL112:
 985              	.L62:
 305:../../../mod/sensor/sensor.c **** 						             sizeof( sensor_poll_cmd ),
 986              		.loc 1 305 7 view .LVU331
 987 00ba 4FF0FF32 		mov	r2, #-1
 988 00be 0121     		movs	r1, #1
 989 00c0 0DF10F00 		add	r0, sp, #15
 990 00c4 FFF7FEFF 		bl	usb_receive
 991              	.LVL113:
ARM GAS  /tmp/ccN84Bm3.s 			page 39


 992              	.L59:
 303:../../../mod/sensor/sensor.c **** 						{
 993              		.loc 1 303 29 view .LVU332
 994 00c8 9DF80F30 		ldrb	r3, [sp, #15]	@ zero_extendqisi2
 995 00cc EF2B     		cmp	r3, #239
 996 00ce F4D1     		bne	.L62
 997              	.LVL114:
 998              	.L58:
 249:../../../mod/sensor/sensor.c **** 			{
 999              		.loc 1 249 27 view .LVU333
 1000 00d0 9DF80F30 		ldrb	r3, [sp, #15]	@ zero_extendqisi2
 1001 00d4 742B     		cmp	r3, #116
 1002 00d6 35D0     		beq	.L55
 252:../../../mod/sensor/sensor.c **** 			                          sizeof( sensor_poll_cmd ),
 1003              		.loc 1 252 4 view .LVU334
 252:../../../mod/sensor/sensor.c **** 			                          sizeof( sensor_poll_cmd ),
 1004              		.loc 1 252 17 is_stmt 0 view .LVU335
 1005 00d8 4FF0FF32 		mov	r2, #-1
 1006 00dc 0121     		movs	r1, #1
 1007 00de 0DF10F00 		add	r0, sp, #15
 1008 00e2 FFF7FEFF 		bl	usb_receive
 1009              	.LVL115:
 255:../../../mod/sensor/sensor.c **** 				{
 1010              		.loc 1 255 4 is_stmt 1 view .LVU336
 255:../../../mod/sensor/sensor.c **** 				{
 1011              		.loc 1 255 7 is_stmt 0 view .LVU337
 1012 00e6 B0BB     		cbnz	r0, .L69
 261:../../../mod/sensor/sensor.c **** 				{
 1013              		.loc 1 261 4 is_stmt 1 view .LVU338
 1014 00e8 9DF80F30 		ldrb	r3, [sp, #15]	@ zero_extendqisi2
 1015 00ec 512B     		cmp	r3, #81
 1016 00ee C9D0     		beq	.L57
 1017 00f0 742B     		cmp	r3, #116
 1018 00f2 EDD0     		beq	.L58
 1019 00f4 442B     		cmp	r3, #68
 1020 00f6 E7D0     		beq	.L59
 315:../../../mod/sensor/sensor.c **** 					break;
 1021              		.loc 1 315 6 view .LVU339
 1022 00f8 FFF7FEFF 		bl	Error_Handler
 1023              	.LVL116:
 316:../../../mod/sensor/sensor.c **** 					}
 1024              		.loc 1 316 6 view .LVU340
 1025 00fc E8E7     		b	.L58
 1026              	.LVL117:
 1027              	.L54:
 331:../../../mod/sensor/sensor.c ****                       sizeof( num_sensor_bytes ), 
 1028              		.loc 1 331 3 view .LVU341
 1029 00fe 4FF0FF32 		mov	r2, #-1
 1030 0102 0121     		movs	r1, #1
 1031 0104 0DF11700 		add	r0, sp, #23
 1032              	.LVL118:
 331:../../../mod/sensor/sensor.c ****                       sizeof( num_sensor_bytes ), 
 1033              		.loc 1 331 3 is_stmt 0 view .LVU342
 1034 0108 FFF7FEFF 		bl	usb_transmit
 1035              	.LVL119:
 336:../../../mod/sensor/sensor.c **** 
 1036              		.loc 1 336 6 is_stmt 1 view .LVU343
ARM GAS  /tmp/ccN84Bm3.s 			page 40


 336:../../../mod/sensor/sensor.c **** 
 1037              		.loc 1 336 22 is_stmt 0 view .LVU344
 1038 010c 0DA8     		add	r0, sp, #52
 1039 010e FFF7FEFF 		bl	sensor_dump
 1040              	.LVL120:
 1041 0112 0546     		mov	r5, r0
 1042              	.LVL121:
 339:../../../mod/sensor/sensor.c **** 
 1043              		.loc 1 339 3 is_stmt 1 view .LVU345
 1044 0114 0DF1180E 		add	lr, sp, #24
 1045 0118 0DF1340C 		add	ip, sp, #52
 1046 011c BCE80F00 		ldmia	ip!, {r0, r1, r2, r3}
 1047 0120 AEE80F00 		stmia	lr!, {r0, r1, r2, r3}
 1048 0124 9CE80700 		ldm	ip, {r0, r1, r2}
 1049 0128 8EE80700 		stm	lr, {r0, r1, r2}
 342:../../../mod/sensor/sensor.c **** 			{
 1050              		.loc 1 342 3 view .LVU346
 342:../../../mod/sensor/sensor.c **** 			{
 1051              		.loc 1 342 6 is_stmt 0 view .LVU347
 1052 012c 2C46     		mov	r4, r5
 1053 012e 0DB1     		cbz	r5, .L74
 352:../../../mod/sensor/sensor.c ****             }
 1054              		.loc 1 352 10 view .LVU348
 1055 0130 0E24     		movs	r4, #14
 1056 0132 07E0     		b	.L55
 1057              	.L74:
 344:../../../mod/sensor/sensor.c ****                           sizeof( sensor_data_bytes ), 
 1058              		.loc 1 344 4 is_stmt 1 view .LVU349
 1059 0134 4FF0FF32 		mov	r2, #-1
 1060 0138 1C21     		movs	r1, #28
 1061 013a 06A8     		add	r0, sp, #24
 1062 013c FFF7FEFF 		bl	usb_transmit
 1063              	.LVL122:
 347:../../../mod/sensor/sensor.c ****             }
 1064              		.loc 1 347 4 view .LVU350
 347:../../../mod/sensor/sensor.c ****             }
 1065              		.loc 1 347 11 is_stmt 0 view .LVU351
 1066 0140 00E0     		b	.L55
 1067              	.LVL123:
 1068              	.L64:
 209:../../../mod/sensor/sensor.c **** 	{
 1069              		.loc 1 209 1 view .LVU352
 1070 0142 0124     		movs	r4, #1
 1071              	.LVL124:
 1072              	.L55:
 365:../../../mod/sensor/sensor.c **** 
 1073              		.loc 1 365 1 view .LVU353
 1074 0144 2046     		mov	r0, r4
 1075 0146 15B0     		add	sp, sp, #84
 1076              	.LCFI9:
 1077              		.cfi_remember_state
 1078              		.cfi_def_cfa_offset 12
 1079              		@ sp needed
 1080 0148 30BD     		pop	{r4, r5, pc}
 1081              	.LVL125:
 1082              	.L65:
 1083              	.LCFI10:
ARM GAS  /tmp/ccN84Bm3.s 			page 41


 1084              		.cfi_restore_state
 222:../../../mod/sensor/sensor.c **** 			}
 1085              		.loc 1 222 11 view .LVU354
 1086 014a 0A24     		movs	r4, #10
 1087 014c FAE7     		b	.L55
 1088              	.L66:
 231:../../../mod/sensor/sensor.c **** 			}
 1089              		.loc 1 231 11 view .LVU355
 1090 014e 0A24     		movs	r4, #10
 1091 0150 F8E7     		b	.L55
 1092              	.L67:
 240:../../../mod/sensor/sensor.c **** 			}
 1093              		.loc 1 240 11 view .LVU356
 1094 0152 0A24     		movs	r4, #10
 1095 0154 F6E7     		b	.L55
 1096              	.LVL126:
 1097              	.L69:
 257:../../../mod/sensor/sensor.c **** 				}
 1098              		.loc 1 257 12 view .LVU357
 1099 0156 0A24     		movs	r4, #10
 1100              	.LVL127:
 257:../../../mod/sensor/sensor.c **** 				}
 1101              		.loc 1 257 12 view .LVU358
 1102 0158 F4E7     		b	.L55
 1103              	.LVL128:
 1104              	.L70:
 272:../../../mod/sensor/sensor.c **** 						}
 1105              		.loc 1 272 14 view .LVU359
 1106 015a 0D24     		movs	r4, #13
 1107 015c F2E7     		b	.L55
 1108              		.cfi_endproc
 1109              	.LFE145:
 1111              		.section	.bss.sensor_size_offsets_table,"aw",%nobits
 1112              		.align	2
 1115              	sensor_size_offsets_table:
 1116 0000 00000000 		.space	96
 1116      00000000 
 1116      00000000 
 1116      00000000 
 1116      00000000 
 1117              		.text
 1118              	.Letext0:
 1119              		.file 2 "/usr/lib/gcc/arm-none-eabi/12.2.0/include/stddef.h"
 1120              		.file 3 "/usr/arm-none-eabi/include/machine/_default_types.h"
 1121              		.file 4 "/usr/arm-none-eabi/include/sys/_stdint.h"
 1122              		.file 5 "../../../mod/imu/imu.h"
 1123              		.file 6 "../../../mod/baro/baro.h"
 1124              		.file 7 "../../../mod/usb/usb.h"
 1125              		.file 8 "../../../mod/sensor/sensor.h"
 1126              		.file 9 "/usr/arm-none-eabi/include/string.h"
 1127              		.file 10 "./main.h"
 1128              		.file 11 "<built-in>"
ARM GAS  /tmp/ccN84Bm3.s 			page 42


DEFINED SYMBOLS
                            *ABS*:0000000000000000 sensor.c
     /tmp/ccN84Bm3.s:20     .text.sensor_map:0000000000000000 $t
     /tmp/ccN84Bm3.s:25     .text.sensor_map:0000000000000000 sensor_map
     /tmp/ccN84Bm3.s:64     .text.sensor_map:000000000000001c $d
     /tmp/ccN84Bm3.s:1115   .bss.sensor_size_offsets_table:0000000000000000 sensor_size_offsets_table
     /tmp/ccN84Bm3.s:69     .text.extract_sensor_bytes:0000000000000000 $t
     /tmp/ccN84Bm3.s:74     .text.extract_sensor_bytes:0000000000000000 extract_sensor_bytes
     /tmp/ccN84Bm3.s:191    .text.sensor_init:0000000000000000 $t
     /tmp/ccN84Bm3.s:197    .text.sensor_init:0000000000000000 sensor_init
     /tmp/ccN84Bm3.s:294    .text.sensor_init:000000000000005c $d
     /tmp/ccN84Bm3.s:299    .text.sensor_dump:0000000000000000 $t
     /tmp/ccN84Bm3.s:305    .text.sensor_dump:0000000000000000 sensor_dump
     /tmp/ccN84Bm3.s:420    .text.sensor_poll:0000000000000000 $t
     /tmp/ccN84Bm3.s:426    .text.sensor_poll:0000000000000000 sensor_poll
     /tmp/ccN84Bm3.s:691    .text.sensor_poll:00000000000000fc $d
     /tmp/ccN84Bm3.s:703    .text.sensor_poll:000000000000012c $t
     /tmp/ccN84Bm3.s:832    .text.sensor_cmd_execute:0000000000000000 $t
     /tmp/ccN84Bm3.s:838    .text.sensor_cmd_execute:0000000000000000 sensor_cmd_execute
     /tmp/ccN84Bm3.s:1112   .bss.sensor_size_offsets_table:0000000000000000 $d

UNDEFINED SYMBOLS
memcpy
imu_get_accel_xyz
imu_get_gyro_xyz
imu_get_mag_xyz
baro_get_temp
baro_get_pressure
usb_receive
usb_transmit
Error_Handler
