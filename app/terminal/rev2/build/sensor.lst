ARM GAS  C:\Users\tnguy\AppData\Local\Temp\cchyHwKV.s 			page 1


   1              		.cpu cortex-m7
   2              		.arch armv7e-m
   3              		.fpu fpv5-d16
   4              		.eabi_attribute 28, 1
   5              		.eabi_attribute 20, 1
   6              		.eabi_attribute 21, 1
   7              		.eabi_attribute 23, 3
   8              		.eabi_attribute 24, 1
   9              		.eabi_attribute 25, 1
  10              		.eabi_attribute 26, 1
  11              		.eabi_attribute 30, 1
  12              		.eabi_attribute 34, 1
  13              		.eabi_attribute 18, 4
  14              		.file	"sensor.c"
  15              		.text
  16              	.Ltext0:
  17              		.cfi_sections	.debug_frame
  18              		.section	.text.sensor_map,"ax",%progbits
  19              		.align	1
  20              		.syntax unified
  21              		.thumb
  22              		.thumb_func
  24              	sensor_map:
  25              	.LVL0:
  26              	.LFB148:
  27              		.file 1 "../../../mod/sensor/sensor.c"
   1:../../../mod/sensor/sensor.c **** /*******************************************************************************
   2:../../../mod/sensor/sensor.c **** *
   3:../../../mod/sensor/sensor.c **** * FILE: 
   4:../../../mod/sensor/sensor.c **** * 		sensor.c
   5:../../../mod/sensor/sensor.c **** *
   6:../../../mod/sensor/sensor.c **** * DESCRIPTION: 
   7:../../../mod/sensor/sensor.c **** * 		Contains functions to interface between sdec terminal commands and SDR
   8:../../../mod/sensor/sensor.c **** *       sensor APIs
   9:../../../mod/sensor/sensor.c **** *
  10:../../../mod/sensor/sensor.c **** *******************************************************************************/
  11:../../../mod/sensor/sensor.c **** 
  12:../../../mod/sensor/sensor.c **** 
  13:../../../mod/sensor/sensor.c **** /*------------------------------------------------------------------------------
  14:../../../mod/sensor/sensor.c ****  Standard Includes                                                                     
  15:../../../mod/sensor/sensor.c **** ------------------------------------------------------------------------------*/
  16:../../../mod/sensor/sensor.c **** #include <string.h>
  17:../../../mod/sensor/sensor.c **** #include <stdbool.h>
  18:../../../mod/sensor/sensor.c **** 
  19:../../../mod/sensor/sensor.c **** 
  20:../../../mod/sensor/sensor.c **** /*------------------------------------------------------------------------------
  21:../../../mod/sensor/sensor.c ****  MCU Pins 
  22:../../../mod/sensor/sensor.c **** ------------------------------------------------------------------------------*/
  23:../../../mod/sensor/sensor.c **** #if   defined( FLIGHT_COMPUTER      )
  24:../../../mod/sensor/sensor.c **** 	#include "sdr_pin_defines_A0002.h"
  25:../../../mod/sensor/sensor.c **** #elif defined( ENGINE_CONTROLLER    )
  26:../../../mod/sensor/sensor.c **** 	#include "sdr_pin_defines_L0002.h"
  27:../../../mod/sensor/sensor.c **** #elif defined( FLIGHT_COMPUTER_LITE )
  28:../../../mod/sensor/sensor.c **** 	#include "sdr_pin_defines_A0007.h"
  29:../../../mod/sensor/sensor.c **** #elif defined( VALVE_CONTROLLER     )
  30:../../../mod/sensor/sensor.c **** 	#include "sdr_pin_defines_L0005.h"
  31:../../../mod/sensor/sensor.c **** #endif 
ARM GAS  C:\Users\tnguy\AppData\Local\Temp\cchyHwKV.s 			page 2


  32:../../../mod/sensor/sensor.c **** 
  33:../../../mod/sensor/sensor.c **** 
  34:../../../mod/sensor/sensor.c **** /*------------------------------------------------------------------------------
  35:../../../mod/sensor/sensor.c ****  Project Includes                                                                     
  36:../../../mod/sensor/sensor.c **** ------------------------------------------------------------------------------*/
  37:../../../mod/sensor/sensor.c **** #include "main.h"
  38:../../../mod/sensor/sensor.c **** #if defined( FLIGHT_COMPUTER )
  39:../../../mod/sensor/sensor.c **** 	#include "imu.h"
  40:../../../mod/sensor/sensor.c **** 	#include "baro.h"
  41:../../../mod/sensor/sensor.c **** #elif defined( FLIGHT_COMPUTER_LITE )
  42:../../../mod/sensor/sensor.c **** 	#include "baro.h"
  43:../../../mod/sensor/sensor.c **** #endif
  44:../../../mod/sensor/sensor.c **** #include "usb.h"
  45:../../../mod/sensor/sensor.c **** #include "sensor.h"
  46:../../../mod/sensor/sensor.c **** #if defined( ENGINE_CONTROLLER )
  47:../../../mod/sensor/sensor.c **** 	#include "pressure.h"
  48:../../../mod/sensor/sensor.c **** 	#include "loadcell.h"
  49:../../../mod/sensor/sensor.c **** 	#include "temp.h"
  50:../../../mod/sensor/sensor.c **** #endif
  51:../../../mod/sensor/sensor.c **** #if defined( VALVE_CONTROLLER  )
  52:../../../mod/sensor/sensor.c **** 	#include "valve.h"
  53:../../../mod/sensor/sensor.c **** #endif
  54:../../../mod/sensor/sensor.c **** 
  55:../../../mod/sensor/sensor.c **** 
  56:../../../mod/sensor/sensor.c **** /*------------------------------------------------------------------------------
  57:../../../mod/sensor/sensor.c ****  Global Variables 
  58:../../../mod/sensor/sensor.c **** ------------------------------------------------------------------------------*/
  59:../../../mod/sensor/sensor.c **** 
  60:../../../mod/sensor/sensor.c **** /* Hash table of sensor readout sizes and offsets */
  61:../../../mod/sensor/sensor.c **** static SENSOR_DATA_SIZE_OFFSETS sensor_size_offsets_table[ NUM_SENSORS ];
  62:../../../mod/sensor/sensor.c **** 
  63:../../../mod/sensor/sensor.c **** 
  64:../../../mod/sensor/sensor.c **** /*------------------------------------------------------------------------------
  65:../../../mod/sensor/sensor.c ****  Internal function prototypes 
  66:../../../mod/sensor/sensor.c **** ------------------------------------------------------------------------------*/
  67:../../../mod/sensor/sensor.c **** 
  68:../../../mod/sensor/sensor.c **** /* Sensor ID to size and pointer mapping */
  69:../../../mod/sensor/sensor.c **** void static sensor_map
  70:../../../mod/sensor/sensor.c **** 	(
  71:../../../mod/sensor/sensor.c **** 	SENSOR_DATA* sensor_data_ptr,
  72:../../../mod/sensor/sensor.c **** 	SENSOR_ID    sensor_id      ,
  73:../../../mod/sensor/sensor.c **** 	uint8_t**    sensorid_pptr  ,
  74:../../../mod/sensor/sensor.c **** 	size_t*      sensor_size
  75:../../../mod/sensor/sensor.c **** 	);
  76:../../../mod/sensor/sensor.c **** 
  77:../../../mod/sensor/sensor.c **** /* Extract bytes for export from SENSOR_ID struct */
  78:../../../mod/sensor/sensor.c **** void static extract_sensor_bytes 
  79:../../../mod/sensor/sensor.c **** 	(
  80:../../../mod/sensor/sensor.c **** 	SENSOR_DATA* sensor_data_ptr      ,
  81:../../../mod/sensor/sensor.c **** 	SENSOR_ID*   sensor_ids_ptr       ,
  82:../../../mod/sensor/sensor.c **** 	uint8_t      num_sensors          ,
  83:../../../mod/sensor/sensor.c **** 	uint8_t*     sensor_data_bytes_ptr,
  84:../../../mod/sensor/sensor.c **** 	uint8_t*     num_sensor_bytes
  85:../../../mod/sensor/sensor.c **** 	);
  86:../../../mod/sensor/sensor.c **** 
  87:../../../mod/sensor/sensor.c **** 
  88:../../../mod/sensor/sensor.c **** /*------------------------------------------------------------------------------
ARM GAS  C:\Users\tnguy\AppData\Local\Temp\cchyHwKV.s 			page 3


  89:../../../mod/sensor/sensor.c ****  API Functions 
  90:../../../mod/sensor/sensor.c **** ------------------------------------------------------------------------------*/
  91:../../../mod/sensor/sensor.c **** 
  92:../../../mod/sensor/sensor.c **** /*******************************************************************************
  93:../../../mod/sensor/sensor.c **** *                                                                              *
  94:../../../mod/sensor/sensor.c **** * PROCEDURE:                                                                   *
  95:../../../mod/sensor/sensor.c **** * 		sensor_init                                                            *
  96:../../../mod/sensor/sensor.c **** *                                                                              *
  97:../../../mod/sensor/sensor.c **** * DESCRIPTION:                                                                 *
  98:../../../mod/sensor/sensor.c **** *       Initialize the sensor module                                           *
  99:../../../mod/sensor/sensor.c **** *                                                                              *
 100:../../../mod/sensor/sensor.c **** *******************************************************************************/
 101:../../../mod/sensor/sensor.c **** void sensor_init 
 102:../../../mod/sensor/sensor.c **** 	(
 103:../../../mod/sensor/sensor.c **** 	void
 104:../../../mod/sensor/sensor.c **** 	)
 105:../../../mod/sensor/sensor.c **** {
 106:../../../mod/sensor/sensor.c **** /* Setup the sensor id hash table */
 107:../../../mod/sensor/sensor.c **** #if defined( FLIGHT_COMPUTER )
 108:../../../mod/sensor/sensor.c **** 	/* Sensor offsets */
 109:../../../mod/sensor/sensor.c **** 	sensor_size_offsets_table[ 0  ].offset = 0;  /* SENSOR_ACCX  */
 110:../../../mod/sensor/sensor.c **** 	sensor_size_offsets_table[ 1  ].offset = 2;  /* SENSOR_ACCY  */
 111:../../../mod/sensor/sensor.c **** 	sensor_size_offsets_table[ 2  ].offset = 4;  /* SENSOR_ACCZ  */
 112:../../../mod/sensor/sensor.c **** 	sensor_size_offsets_table[ 3  ].offset = 6;  /* SENSOR_GYROX */
 113:../../../mod/sensor/sensor.c **** 	sensor_size_offsets_table[ 4  ].offset = 8;  /* SENSOR_GYROY */
 114:../../../mod/sensor/sensor.c **** 	sensor_size_offsets_table[ 5  ].offset = 10; /* SENSOR_GYROZ */
 115:../../../mod/sensor/sensor.c **** 	sensor_size_offsets_table[ 6  ].offset = 12; /* SENSOR_MAGX  */
 116:../../../mod/sensor/sensor.c **** 	sensor_size_offsets_table[ 7  ].offset = 14; /* SENSOR_MAGY  */
 117:../../../mod/sensor/sensor.c **** 	sensor_size_offsets_table[ 8  ].offset = 16; /* SENSOR_MAGZ  */
 118:../../../mod/sensor/sensor.c **** 	sensor_size_offsets_table[ 9  ].offset = 18; /* SENSOR_IMUT  */
 119:../../../mod/sensor/sensor.c **** 	sensor_size_offsets_table[ 10 ].offset = 20; /* SENSOR_PRES  */
 120:../../../mod/sensor/sensor.c **** 	sensor_size_offsets_table[ 11 ].offset = 24; /* SENSOR_TEMP  */
 121:../../../mod/sensor/sensor.c **** 
 122:../../../mod/sensor/sensor.c **** 	/* Sensor Sizes   */
 123:../../../mod/sensor/sensor.c **** 	sensor_size_offsets_table[ 0  ].size   = 2;  /* SENSOR_ACCX  */
 124:../../../mod/sensor/sensor.c **** 	sensor_size_offsets_table[ 1  ].size   = 2;  /* SENSOR_ACCY  */
 125:../../../mod/sensor/sensor.c **** 	sensor_size_offsets_table[ 2  ].size   = 2;  /* SENSOR_ACCZ  */
 126:../../../mod/sensor/sensor.c **** 	sensor_size_offsets_table[ 3  ].size   = 2;  /* SENSOR_GYROX */
 127:../../../mod/sensor/sensor.c **** 	sensor_size_offsets_table[ 4  ].size   = 2;  /* SENSOR_GYROY */
 128:../../../mod/sensor/sensor.c **** 	sensor_size_offsets_table[ 5  ].size   = 2;  /* SENSOR_GYROZ */
 129:../../../mod/sensor/sensor.c **** 	sensor_size_offsets_table[ 6  ].size   = 2;  /* SENSOR_MAGX  */
 130:../../../mod/sensor/sensor.c **** 	sensor_size_offsets_table[ 7  ].size   = 2;  /* SENSOR_MAGY  */
 131:../../../mod/sensor/sensor.c **** 	sensor_size_offsets_table[ 8  ].size   = 2;  /* SENSOR_MAGZ  */
 132:../../../mod/sensor/sensor.c **** 	sensor_size_offsets_table[ 9  ].size   = 2;  /* SENSOR_IMUT  */
 133:../../../mod/sensor/sensor.c **** 	sensor_size_offsets_table[ 10 ].size   = 4;  /* SENSOR_PRES  */
 134:../../../mod/sensor/sensor.c **** 	sensor_size_offsets_table[ 11 ].size   = 4;  /* SENSOR_TEMP  */
 135:../../../mod/sensor/sensor.c **** #elif defined( ENGINE_CONTROLLER )
 136:../../../mod/sensor/sensor.c **** 	/* Sensor offsets */
 137:../../../mod/sensor/sensor.c **** 	sensor_size_offsets_table[ 0  ].offset = 0;  /* SENSOR_PT0  */
 138:../../../mod/sensor/sensor.c **** 	sensor_size_offsets_table[ 1  ].offset = 4;  /* SENSOR_PT1  */
 139:../../../mod/sensor/sensor.c **** 	sensor_size_offsets_table[ 2  ].offset = 8;  /* SENSOR_PT2  */
 140:../../../mod/sensor/sensor.c **** 	sensor_size_offsets_table[ 3  ].offset = 12; /* SENSOR_PT3  */
 141:../../../mod/sensor/sensor.c **** 	sensor_size_offsets_table[ 4  ].offset = 16; /* SENSOR_PT4  */
 142:../../../mod/sensor/sensor.c **** 	sensor_size_offsets_table[ 5  ].offset = 20; /* SENSOR_PT5  */
 143:../../../mod/sensor/sensor.c **** 	sensor_size_offsets_table[ 6  ].offset = 24; /* SENSOR_PT6  */
 144:../../../mod/sensor/sensor.c **** 	sensor_size_offsets_table[ 7  ].offset = 28; /* SENSOR_PT7  */
 145:../../../mod/sensor/sensor.c **** 	sensor_size_offsets_table[ 8  ].offset = 36; /* SENSOR_TC   */
ARM GAS  C:\Users\tnguy\AppData\Local\Temp\cchyHwKV.s 			page 4


 146:../../../mod/sensor/sensor.c **** 	sensor_size_offsets_table[ 9  ].offset = 32; /* SENSOR_LC   */
 147:../../../mod/sensor/sensor.c **** 
 148:../../../mod/sensor/sensor.c **** 	/* Sensor Sizes   */
 149:../../../mod/sensor/sensor.c **** 	sensor_size_offsets_table[ 0  ].size   = 4;  /* SENSOR_PT0  */
 150:../../../mod/sensor/sensor.c **** 	sensor_size_offsets_table[ 1  ].size   = 4;  /* SENSOR_PT1  */
 151:../../../mod/sensor/sensor.c **** 	sensor_size_offsets_table[ 2  ].size   = 4;  /* SENSOR_PT2  */
 152:../../../mod/sensor/sensor.c **** 	sensor_size_offsets_table[ 3  ].size   = 4;  /* SENSOR_PT3  */
 153:../../../mod/sensor/sensor.c **** 	sensor_size_offsets_table[ 4  ].size   = 4;  /* SENSOR_PT4  */
 154:../../../mod/sensor/sensor.c **** 	sensor_size_offsets_table[ 5  ].size   = 4;  /* SENSOR_PT5  */
 155:../../../mod/sensor/sensor.c **** 	sensor_size_offsets_table[ 6  ].size   = 4;  /* SENSOR_PT6  */
 156:../../../mod/sensor/sensor.c **** 	sensor_size_offsets_table[ 7  ].size   = 4;  /* SENSOR_PT7  */
 157:../../../mod/sensor/sensor.c **** 	sensor_size_offsets_table[ 8  ].size   = 4;  /* SENSOR_TC   */
 158:../../../mod/sensor/sensor.c **** 	sensor_size_offsets_table[ 9  ].size   = 4;  /* SENSOR_LC   */
 159:../../../mod/sensor/sensor.c **** #elif defined( FLIGHT_COMPUTER_LITE )
 160:../../../mod/sensor/sensor.c **** 	/* Sensor offsets */
 161:../../../mod/sensor/sensor.c **** 	sensor_size_offsets_table[ 0 ].offset = 0; /* SENSOR_PRES  */
 162:../../../mod/sensor/sensor.c **** 	sensor_size_offsets_table[ 1 ].offset = 4; /* SENSOR_TEMP  */
 163:../../../mod/sensor/sensor.c **** 
 164:../../../mod/sensor/sensor.c **** 	/* Sensor Sizes   */
 165:../../../mod/sensor/sensor.c **** 	sensor_size_offsets_table[ 0 ].size   = 4;  /* SENSOR_PRES  */
 166:../../../mod/sensor/sensor.c **** 	sensor_size_offsets_table[ 1 ].size   = 4;  /* SENSOR_TEMP  */
 167:../../../mod/sensor/sensor.c **** #elif defined( VALVE_CONTROLLER     )
 168:../../../mod/sensor/sensor.c **** 	/* Sensor offsets */
 169:../../../mod/sensor/sensor.c **** 	sensor_size_offsets_table[ 0 ].offset = 0;  /* SENSOR_ENCO  */
 170:../../../mod/sensor/sensor.c **** 	sensor_size_offsets_table[ 1 ].offset = 4;  /* SENSOR_ENCF  */
 171:../../../mod/sensor/sensor.c **** 
 172:../../../mod/sensor/sensor.c **** 	/* Sensor sizes */
 173:../../../mod/sensor/sensor.c **** 	sensor_size_offsets_table[ 0 ].size   = 4;  /* SENSOR_ENCO */
 174:../../../mod/sensor/sensor.c **** 	sensor_size_offsets_table[ 1 ].size   = 4;  /* SENSOR_ENCF */
 175:../../../mod/sensor/sensor.c **** #endif
 176:../../../mod/sensor/sensor.c **** 
 177:../../../mod/sensor/sensor.c **** } /* sensor_init */
 178:../../../mod/sensor/sensor.c **** 
 179:../../../mod/sensor/sensor.c **** 
 180:../../../mod/sensor/sensor.c **** /*******************************************************************************
 181:../../../mod/sensor/sensor.c **** *                                                                              *
 182:../../../mod/sensor/sensor.c **** * PROCEDURE:                                                                   *
 183:../../../mod/sensor/sensor.c **** * 		sensor_cmd_execute                                                     *
 184:../../../mod/sensor/sensor.c **** *                                                                              *
 185:../../../mod/sensor/sensor.c **** * DESCRIPTION:                                                                 *
 186:../../../mod/sensor/sensor.c **** *       Executes a sensor subcommand                                           *
 187:../../../mod/sensor/sensor.c **** *                                                                              *
 188:../../../mod/sensor/sensor.c **** *******************************************************************************/
 189:../../../mod/sensor/sensor.c **** SENSOR_STATUS sensor_cmd_execute 
 190:../../../mod/sensor/sensor.c **** 	(
 191:../../../mod/sensor/sensor.c **** 	#ifndef VALVE_CONTROLLER
 192:../../../mod/sensor/sensor.c **** 		uint8_t subcommand 
 193:../../../mod/sensor/sensor.c **** 	#else
 194:../../../mod/sensor/sensor.c **** 		uint8_t    subcommand,   /* SDEC subcommand         */
 195:../../../mod/sensor/sensor.c **** 		CMD_SOURCE cmd_source    /* Serial interface source */
 196:../../../mod/sensor/sensor.c **** 	#endif
 197:../../../mod/sensor/sensor.c ****     )
 198:../../../mod/sensor/sensor.c **** {
 199:../../../mod/sensor/sensor.c **** 
 200:../../../mod/sensor/sensor.c **** /*------------------------------------------------------------------------------
 201:../../../mod/sensor/sensor.c ****  Local Variables  
 202:../../../mod/sensor/sensor.c **** ------------------------------------------------------------------------------*/
ARM GAS  C:\Users\tnguy\AppData\Local\Temp\cchyHwKV.s 			page 5


 203:../../../mod/sensor/sensor.c **** SENSOR_STATUS sensor_status;                         /* Status indicating if 
 204:../../../mod/sensor/sensor.c ****                                                        subcommand function 
 205:../../../mod/sensor/sensor.c ****                                                        returned properly      */
 206:../../../mod/sensor/sensor.c **** USB_STATUS    usb_status;                            /* USB return codes      */
 207:../../../mod/sensor/sensor.c **** SENSOR_DATA   sensor_data;                           /* Struct with all sensor 
 208:../../../mod/sensor/sensor.c ****                                                         data                  */
 209:../../../mod/sensor/sensor.c **** uint8_t       sensor_data_bytes[ SENSOR_DATA_SIZE ]; /* Byte array with sensor 
 210:../../../mod/sensor/sensor.c ****                                                        readouts               */
 211:../../../mod/sensor/sensor.c **** uint8_t       num_sensor_bytes = SENSOR_DATA_SIZE;   /* Size of data in bytes */
 212:../../../mod/sensor/sensor.c **** uint8_t       num_sensors;                           /* Number of sensors to 
 213:../../../mod/sensor/sensor.c ****                                                         use for polling       */
 214:../../../mod/sensor/sensor.c **** uint8_t       poll_sensors[ SENSOR_MAX_NUM_POLL ];   /* Codes for sensors to
 215:../../../mod/sensor/sensor.c ****                                                         be polled             */
 216:../../../mod/sensor/sensor.c **** uint8_t       sensor_poll_cmd;                       /* Command codes used by 
 217:../../../mod/sensor/sensor.c ****                                                         sensor poll           */
 218:../../../mod/sensor/sensor.c **** #ifdef VALVE_CONTROLLER
 219:../../../mod/sensor/sensor.c **** 	VALVE_STATUS valve_status; /* status codes from valve API */
 220:../../../mod/sensor/sensor.c **** #endif
 221:../../../mod/sensor/sensor.c **** 
 222:../../../mod/sensor/sensor.c **** /*------------------------------------------------------------------------------
 223:../../../mod/sensor/sensor.c ****  Initializations  
 224:../../../mod/sensor/sensor.c **** ------------------------------------------------------------------------------*/
 225:../../../mod/sensor/sensor.c **** usb_status      = USB_OK;
 226:../../../mod/sensor/sensor.c **** sensor_status   = SENSOR_OK;
 227:../../../mod/sensor/sensor.c **** #ifdef VALVE_CONTROLLER
 228:../../../mod/sensor/sensor.c **** 	valve_status = VALVE_OK;
 229:../../../mod/sensor/sensor.c **** #endif
 230:../../../mod/sensor/sensor.c **** num_sensors     = 0;
 231:../../../mod/sensor/sensor.c **** sensor_poll_cmd = 0;
 232:../../../mod/sensor/sensor.c **** memset( &sensor_data_bytes[0], 0, sizeof( sensor_data_bytes ) );
 233:../../../mod/sensor/sensor.c **** memset( &sensor_data         , 0, sizeof( sensor_data       ) );
 234:../../../mod/sensor/sensor.c **** memset( &poll_sensors[0]     , 0, sizeof( poll_sensors      ) );
 235:../../../mod/sensor/sensor.c **** 
 236:../../../mod/sensor/sensor.c **** 
 237:../../../mod/sensor/sensor.c **** /*------------------------------------------------------------------------------
 238:../../../mod/sensor/sensor.c ****  Implementation 
 239:../../../mod/sensor/sensor.c **** ------------------------------------------------------------------------------*/
 240:../../../mod/sensor/sensor.c **** switch ( subcommand )
 241:../../../mod/sensor/sensor.c **** 	{
 242:../../../mod/sensor/sensor.c **** 	/*--------------------------------------------------------------------------
 243:../../../mod/sensor/sensor.c **** 	 SENSOR POLL 
 244:../../../mod/sensor/sensor.c **** 	--------------------------------------------------------------------------*/
 245:../../../mod/sensor/sensor.c ****     case SENSOR_POLL_CODE:
 246:../../../mod/sensor/sensor.c **** 		{
 247:../../../mod/sensor/sensor.c **** 		/* Determine the number of sensors to poll */
 248:../../../mod/sensor/sensor.c **** 		#ifndef VALVE_CONTROLLER 
 249:../../../mod/sensor/sensor.c **** 			usb_status = usb_receive( &num_sensors, 
 250:../../../mod/sensor/sensor.c **** 									sizeof( num_sensors ), 
 251:../../../mod/sensor/sensor.c **** 									HAL_DEFAULT_TIMEOUT );
 252:../../../mod/sensor/sensor.c **** 			if ( usb_status != USB_OK )
 253:../../../mod/sensor/sensor.c **** 				{
 254:../../../mod/sensor/sensor.c **** 				return SENSOR_USB_FAIL;
 255:../../../mod/sensor/sensor.c **** 				}
 256:../../../mod/sensor/sensor.c **** 		#else
 257:../../../mod/sensor/sensor.c **** 			if ( cmd_source == CMD_SOURCE_USB )
 258:../../../mod/sensor/sensor.c **** 				{
 259:../../../mod/sensor/sensor.c **** 				usb_status = usb_receive( &num_sensors, 
ARM GAS  C:\Users\tnguy\AppData\Local\Temp\cchyHwKV.s 			page 6


 260:../../../mod/sensor/sensor.c **** 										sizeof( num_sensors ), 
 261:../../../mod/sensor/sensor.c **** 										HAL_DEFAULT_TIMEOUT );
 262:../../../mod/sensor/sensor.c **** 				if ( usb_status != USB_OK )
 263:../../../mod/sensor/sensor.c **** 					{
 264:../../../mod/sensor/sensor.c **** 					return SENSOR_USB_FAIL;
 265:../../../mod/sensor/sensor.c **** 					}
 266:../../../mod/sensor/sensor.c **** 				}
 267:../../../mod/sensor/sensor.c **** 			else
 268:../../../mod/sensor/sensor.c **** 				{
 269:../../../mod/sensor/sensor.c **** 				valve_status = valve_receive( &num_sensors, 
 270:../../../mod/sensor/sensor.c **** 				                              sizeof( num_sensors ), 
 271:../../../mod/sensor/sensor.c **** 											  HAL_DEFAULT_TIMEOUT );
 272:../../../mod/sensor/sensor.c **** 				if ( valve_status != VALVE_OK )
 273:../../../mod/sensor/sensor.c **** 					{
 274:../../../mod/sensor/sensor.c **** 					return SENSOR_VALVE_UART_ERROR;
 275:../../../mod/sensor/sensor.c **** 					}
 276:../../../mod/sensor/sensor.c **** 				}
 277:../../../mod/sensor/sensor.c **** 		#endif /* #ifdef VALVE_CONTROLLER */
 278:../../../mod/sensor/sensor.c **** 
 279:../../../mod/sensor/sensor.c **** 		/* Determine which sensors to poll */
 280:../../../mod/sensor/sensor.c **** 		#ifndef VALVE_CONTROLLER 
 281:../../../mod/sensor/sensor.c **** 			usb_status = usb_receive( &poll_sensors[0],
 282:../../../mod/sensor/sensor.c **** 									num_sensors     , 
 283:../../../mod/sensor/sensor.c **** 									HAL_SENSOR_TIMEOUT );
 284:../../../mod/sensor/sensor.c **** 			if ( usb_status != USB_OK )
 285:../../../mod/sensor/sensor.c **** 				{
 286:../../../mod/sensor/sensor.c **** 				return SENSOR_USB_FAIL;
 287:../../../mod/sensor/sensor.c **** 				}
 288:../../../mod/sensor/sensor.c **** 		#else
 289:../../../mod/sensor/sensor.c **** 			if ( cmd_source == CMD_SOURCE_USB )
 290:../../../mod/sensor/sensor.c **** 				{
 291:../../../mod/sensor/sensor.c **** 				usb_status = usb_receive( &poll_sensors[0],
 292:../../../mod/sensor/sensor.c **** 										num_sensors     , 
 293:../../../mod/sensor/sensor.c **** 										HAL_SENSOR_TIMEOUT );
 294:../../../mod/sensor/sensor.c **** 				if ( usb_status != USB_OK )
 295:../../../mod/sensor/sensor.c **** 					{
 296:../../../mod/sensor/sensor.c **** 					return SENSOR_USB_FAIL;
 297:../../../mod/sensor/sensor.c **** 					}
 298:../../../mod/sensor/sensor.c **** 				}
 299:../../../mod/sensor/sensor.c **** 			else
 300:../../../mod/sensor/sensor.c **** 				{
 301:../../../mod/sensor/sensor.c **** 				valve_status = valve_receive( &poll_sensors[0],
 302:../../../mod/sensor/sensor.c **** 											num_sensors     ,
 303:../../../mod/sensor/sensor.c **** 											HAL_SENSOR_TIMEOUT );
 304:../../../mod/sensor/sensor.c **** 				if ( valve_status != VALVE_OK )
 305:../../../mod/sensor/sensor.c **** 					{
 306:../../../mod/sensor/sensor.c **** 					return SENSOR_VALVE_UART_ERROR;
 307:../../../mod/sensor/sensor.c **** 					}
 308:../../../mod/sensor/sensor.c **** 				}
 309:../../../mod/sensor/sensor.c **** 		#endif /* #ifndef VALVE_CONTROLLER */
 310:../../../mod/sensor/sensor.c **** 
 311:../../../mod/sensor/sensor.c **** 		/* Receive initiating command code  */
 312:../../../mod/sensor/sensor.c **** 		#ifndef VALVE_CONTROLLER
 313:../../../mod/sensor/sensor.c **** 			usb_status = usb_receive( &sensor_poll_cmd,
 314:../../../mod/sensor/sensor.c **** 									sizeof( sensor_poll_cmd ),
 315:../../../mod/sensor/sensor.c **** 									HAL_DEFAULT_TIMEOUT );
 316:../../../mod/sensor/sensor.c **** 			if      ( usb_status      != USB_OK            )
ARM GAS  C:\Users\tnguy\AppData\Local\Temp\cchyHwKV.s 			page 7


 317:../../../mod/sensor/sensor.c **** 				{
 318:../../../mod/sensor/sensor.c **** 				return SENSOR_USB_FAIL; /* USB error */
 319:../../../mod/sensor/sensor.c **** 				}
 320:../../../mod/sensor/sensor.c **** 			else if ( sensor_poll_cmd != SENSOR_POLL_START )
 321:../../../mod/sensor/sensor.c **** 				{
 322:../../../mod/sensor/sensor.c **** 				/* SDEC fails to initiate sensor poll */
 323:../../../mod/sensor/sensor.c **** 				return SENSOR_POLL_FAIL_TO_START;
 324:../../../mod/sensor/sensor.c **** 				}
 325:../../../mod/sensor/sensor.c **** 		#else
 326:../../../mod/sensor/sensor.c **** 			if ( cmd_source == CMD_SOURCE_USB )
 327:../../../mod/sensor/sensor.c **** 				{
 328:../../../mod/sensor/sensor.c **** 				usb_status = usb_receive( &sensor_poll_cmd,
 329:../../../mod/sensor/sensor.c **** 										sizeof( sensor_poll_cmd ),
 330:../../../mod/sensor/sensor.c **** 										HAL_DEFAULT_TIMEOUT );
 331:../../../mod/sensor/sensor.c **** 				if      ( usb_status      != USB_OK            )
 332:../../../mod/sensor/sensor.c **** 					{
 333:../../../mod/sensor/sensor.c **** 					return SENSOR_USB_FAIL; /* USB error */
 334:../../../mod/sensor/sensor.c **** 					}
 335:../../../mod/sensor/sensor.c **** 				else if ( sensor_poll_cmd != SENSOR_POLL_START )
 336:../../../mod/sensor/sensor.c **** 					{
 337:../../../mod/sensor/sensor.c **** 					/* SDEC fails to initiate sensor poll */
 338:../../../mod/sensor/sensor.c **** 					return SENSOR_POLL_FAIL_TO_START;
 339:../../../mod/sensor/sensor.c **** 					}
 340:../../../mod/sensor/sensor.c **** 				}
 341:../../../mod/sensor/sensor.c **** 			else
 342:../../../mod/sensor/sensor.c **** 				{
 343:../../../mod/sensor/sensor.c **** 				valve_status = valve_receive( &sensor_poll_cmd, 
 344:../../../mod/sensor/sensor.c **** 											sizeof( sensor_poll_cmd ), 
 345:../../../mod/sensor/sensor.c **** 											HAL_DEFAULT_TIMEOUT );
 346:../../../mod/sensor/sensor.c **** 				if ( valve_status != VALVE_OK )
 347:../../../mod/sensor/sensor.c **** 					{
 348:../../../mod/sensor/sensor.c **** 					return SENSOR_VALVE_UART_ERROR;
 349:../../../mod/sensor/sensor.c **** 					}
 350:../../../mod/sensor/sensor.c **** 				else if ( sensor_poll_cmd != SENSOR_POLL_START )
 351:../../../mod/sensor/sensor.c **** 					{
 352:../../../mod/sensor/sensor.c **** 					return SENSOR_POLL_FAIL_TO_START;
 353:../../../mod/sensor/sensor.c **** 					}
 354:../../../mod/sensor/sensor.c **** 				}
 355:../../../mod/sensor/sensor.c **** 		#endif
 356:../../../mod/sensor/sensor.c **** 
 357:../../../mod/sensor/sensor.c **** 		/* Start polling sensors */
 358:../../../mod/sensor/sensor.c **** 		while ( sensor_poll_cmd != SENSOR_POLL_STOP )
 359:../../../mod/sensor/sensor.c **** 			{
 360:../../../mod/sensor/sensor.c **** 			/* Get command code */
 361:../../../mod/sensor/sensor.c **** 			#ifndef VALVE_CONTROLLER 
 362:../../../mod/sensor/sensor.c **** 				usb_status = usb_receive( &sensor_poll_cmd         ,
 363:../../../mod/sensor/sensor.c **** 										sizeof( sensor_poll_cmd ),
 364:../../../mod/sensor/sensor.c **** 										HAL_DEFAULT_TIMEOUT );
 365:../../../mod/sensor/sensor.c **** 				if ( usb_status != USB_OK ) 
 366:../../../mod/sensor/sensor.c **** 					{
 367:../../../mod/sensor/sensor.c **** 					return SENSOR_USB_FAIL;
 368:../../../mod/sensor/sensor.c **** 					}
 369:../../../mod/sensor/sensor.c **** 			#else
 370:../../../mod/sensor/sensor.c **** 				if ( cmd_source == CMD_SOURCE_USB )
 371:../../../mod/sensor/sensor.c **** 					{
 372:../../../mod/sensor/sensor.c **** 					usb_status = usb_receive( &sensor_poll_cmd         ,
 373:../../../mod/sensor/sensor.c **** 											sizeof( sensor_poll_cmd ),
ARM GAS  C:\Users\tnguy\AppData\Local\Temp\cchyHwKV.s 			page 8


 374:../../../mod/sensor/sensor.c **** 											HAL_DEFAULT_TIMEOUT );
 375:../../../mod/sensor/sensor.c **** 					if ( usb_status != USB_OK ) 
 376:../../../mod/sensor/sensor.c **** 						{
 377:../../../mod/sensor/sensor.c **** 						return SENSOR_USB_FAIL;
 378:../../../mod/sensor/sensor.c **** 						}
 379:../../../mod/sensor/sensor.c **** 					}
 380:../../../mod/sensor/sensor.c **** 				else
 381:../../../mod/sensor/sensor.c **** 					{
 382:../../../mod/sensor/sensor.c **** 					valve_status = valve_receive( &sensor_poll_cmd         , 
 383:../../../mod/sensor/sensor.c **** 					                              sizeof( sensor_poll_cmd ), 
 384:../../../mod/sensor/sensor.c **** 												  HAL_DEFAULT_TIMEOUT );
 385:../../../mod/sensor/sensor.c **** 					if ( valve_status != VALVE_OK )
 386:../../../mod/sensor/sensor.c **** 						{
 387:../../../mod/sensor/sensor.c **** 						return SENSOR_VALVE_UART_ERROR;
 388:../../../mod/sensor/sensor.c **** 						}
 389:../../../mod/sensor/sensor.c **** 					}
 390:../../../mod/sensor/sensor.c **** 			#endif /* #ifndef VALVE_CONTROLLER */
 391:../../../mod/sensor/sensor.c **** 			
 392:../../../mod/sensor/sensor.c **** 			/* Execute command */
 393:../../../mod/sensor/sensor.c **** 			switch ( sensor_poll_cmd )
 394:../../../mod/sensor/sensor.c **** 				{
 395:../../../mod/sensor/sensor.c **** 
 396:../../../mod/sensor/sensor.c **** 				/* Poll Sensors */
 397:../../../mod/sensor/sensor.c **** 				case SENSOR_POLL_REQUEST:
 398:../../../mod/sensor/sensor.c **** 					{
 399:../../../mod/sensor/sensor.c **** 					sensor_status = sensor_poll( &sensor_data    , 
 400:../../../mod/sensor/sensor.c **** 												 &poll_sensors[0],
 401:../../../mod/sensor/sensor.c **** 												 num_sensors );
 402:../../../mod/sensor/sensor.c **** 					if ( sensor_status != SENSOR_OK )
 403:../../../mod/sensor/sensor.c **** 						{
 404:../../../mod/sensor/sensor.c **** 						return SENSOR_POLL_FAIL;
 405:../../../mod/sensor/sensor.c **** 						}
 406:../../../mod/sensor/sensor.c **** 					else
 407:../../../mod/sensor/sensor.c **** 						{
 408:../../../mod/sensor/sensor.c **** 						/* Copy over sensor data into buffer */
 409:../../../mod/sensor/sensor.c **** 						extract_sensor_bytes( &sensor_data, 
 410:../../../mod/sensor/sensor.c **** 						                      &poll_sensors[0],
 411:../../../mod/sensor/sensor.c **** 											  num_sensors     ,
 412:../../../mod/sensor/sensor.c **** 											  &sensor_data_bytes[0],
 413:../../../mod/sensor/sensor.c **** 											  &num_sensor_bytes );
 414:../../../mod/sensor/sensor.c **** 
 415:../../../mod/sensor/sensor.c **** 						/* Transmit sensor bytes back to SDEC */
 416:../../../mod/sensor/sensor.c **** 						usb_transmit( &sensor_data_bytes[0],
 417:../../../mod/sensor/sensor.c **** 						              num_sensor_bytes     ,
 418:../../../mod/sensor/sensor.c **** 									  HAL_SENSOR_TIMEOUT );
 419:../../../mod/sensor/sensor.c **** 								
 420:../../../mod/sensor/sensor.c **** 						break;
 421:../../../mod/sensor/sensor.c **** 						}
 422:../../../mod/sensor/sensor.c **** 					} /* case SENSOR_POLL_REQUEST */
 423:../../../mod/sensor/sensor.c **** 
 424:../../../mod/sensor/sensor.c **** 				/* STOP Executtion */
 425:../../../mod/sensor/sensor.c **** 				case SENSOR_POLL_STOP:
 426:../../../mod/sensor/sensor.c **** 					{
 427:../../../mod/sensor/sensor.c **** 					/* Do nothing */
 428:../../../mod/sensor/sensor.c **** 					break;
 429:../../../mod/sensor/sensor.c **** 					} /* case SENSOR_POLL_STOP */
 430:../../../mod/sensor/sensor.c **** 
ARM GAS  C:\Users\tnguy\AppData\Local\Temp\cchyHwKV.s 			page 9


 431:../../../mod/sensor/sensor.c **** 				/* WAIT, Pause execution */
 432:../../../mod/sensor/sensor.c **** 				case SENSOR_POLL_WAIT:
 433:../../../mod/sensor/sensor.c **** 					{
 434:../../../mod/sensor/sensor.c **** 					/* Poll USB port until resume signal arrives */
 435:../../../mod/sensor/sensor.c **** 					while( sensor_poll_cmd != SENSOR_POLL_RESUME )
 436:../../../mod/sensor/sensor.c **** 						{
 437:../../../mod/sensor/sensor.c **** 						#ifndef VALVE_CONTROLLER
 438:../../../mod/sensor/sensor.c **** 							usb_receive( &sensor_poll_cmd, 
 439:../../../mod/sensor/sensor.c **** 										sizeof( sensor_poll_cmd ),
 440:../../../mod/sensor/sensor.c **** 										HAL_DEFAULT_TIMEOUT );
 441:../../../mod/sensor/sensor.c **** 						#else
 442:../../../mod/sensor/sensor.c **** 							if ( cmd_source == CMD_SOURCE_USB )
 443:../../../mod/sensor/sensor.c **** 								{
 444:../../../mod/sensor/sensor.c **** 								usb_receive( &sensor_poll_cmd, 
 445:../../../mod/sensor/sensor.c **** 											sizeof( sensor_poll_cmd ),
 446:../../../mod/sensor/sensor.c **** 											HAL_DEFAULT_TIMEOUT );
 447:../../../mod/sensor/sensor.c **** 								}
 448:../../../mod/sensor/sensor.c **** 							else
 449:../../../mod/sensor/sensor.c **** 								{
 450:../../../mod/sensor/sensor.c **** 								valve_receive( &sensor_poll_cmd         , 
 451:../../../mod/sensor/sensor.c **** 								               sizeof( sensor_poll_cmd ), 
 452:../../../mod/sensor/sensor.c **** 											   HAL_DEFAULT_TIMEOUT );
 453:../../../mod/sensor/sensor.c **** 								}
 454:../../../mod/sensor/sensor.c **** 						#endif
 455:../../../mod/sensor/sensor.c **** 						}
 456:../../../mod/sensor/sensor.c **** 					break;
 457:../../../mod/sensor/sensor.c **** 					} /* case SENSOR_POLL_WAIT */
 458:../../../mod/sensor/sensor.c **** 
 459:../../../mod/sensor/sensor.c **** 				/* Erroneous Command*/
 460:../../../mod/sensor/sensor.c **** 				default:
 461:../../../mod/sensor/sensor.c **** 					{
 462:../../../mod/sensor/sensor.c **** 					return SENSOR_POLL_UNRECOGNIZED_CMD;
 463:../../../mod/sensor/sensor.c **** 					}
 464:../../../mod/sensor/sensor.c **** 				} /* switch( sensor_poll_cmd ) */
 465:../../../mod/sensor/sensor.c **** 
 466:../../../mod/sensor/sensor.c **** 			} /* while( sensor_poll_cmd != SENSOR_POLL_STOP ) */
 467:../../../mod/sensor/sensor.c **** 		
 468:../../../mod/sensor/sensor.c **** 		return sensor_status ;
 469:../../../mod/sensor/sensor.c ****         } /* SENSOR_POLL_CODE */ 
 470:../../../mod/sensor/sensor.c **** 
 471:../../../mod/sensor/sensor.c **** 	/*--------------------------------------------------------------------------
 472:../../../mod/sensor/sensor.c **** 	 SENSOR DUMP 
 473:../../../mod/sensor/sensor.c **** 	--------------------------------------------------------------------------*/
 474:../../../mod/sensor/sensor.c **** 	case SENSOR_DUMP_CODE: 
 475:../../../mod/sensor/sensor.c **** 		{
 476:../../../mod/sensor/sensor.c **** 		/* Tell the PC how many bytes to expect */
 477:../../../mod/sensor/sensor.c **** 		#ifndef VALVE_CONTROLLER 
 478:../../../mod/sensor/sensor.c **** 			usb_transmit( &num_sensor_bytes,
 479:../../../mod/sensor/sensor.c **** 						sizeof( num_sensor_bytes ), 
 480:../../../mod/sensor/sensor.c **** 						HAL_DEFAULT_TIMEOUT );
 481:../../../mod/sensor/sensor.c **** 		#else
 482:../../../mod/sensor/sensor.c **** 			if ( cmd_source == CMD_SOURCE_USB )
 483:../../../mod/sensor/sensor.c **** 				{
 484:../../../mod/sensor/sensor.c **** 				usb_transmit( &num_sensor_bytes,
 485:../../../mod/sensor/sensor.c **** 							sizeof( num_sensor_bytes ), 
 486:../../../mod/sensor/sensor.c **** 							HAL_DEFAULT_TIMEOUT );
 487:../../../mod/sensor/sensor.c **** 				}
ARM GAS  C:\Users\tnguy\AppData\Local\Temp\cchyHwKV.s 			page 10


 488:../../../mod/sensor/sensor.c **** 			else
 489:../../../mod/sensor/sensor.c **** 				{
 490:../../../mod/sensor/sensor.c **** 				valve_transmit( &num_sensor_bytes, 
 491:../../../mod/sensor/sensor.c **** 				                sizeof( num_sensor_bytes ), 
 492:../../../mod/sensor/sensor.c **** 								HAL_DEFAULT_TIMEOUT );
 493:../../../mod/sensor/sensor.c **** 				}
 494:../../../mod/sensor/sensor.c **** 		#endif /* #ifndef VALVE_CONTROLLER */
 495:../../../mod/sensor/sensor.c **** 
 496:../../../mod/sensor/sensor.c **** 		/* Get the sensor readings */
 497:../../../mod/sensor/sensor.c **** 	    sensor_status = sensor_dump( &sensor_data );	
 498:../../../mod/sensor/sensor.c **** 
 499:../../../mod/sensor/sensor.c **** 		/* Convert to byte array */
 500:../../../mod/sensor/sensor.c **** 		memcpy( &(sensor_data_bytes[0]), &sensor_data, sizeof( sensor_data ) );
 501:../../../mod/sensor/sensor.c **** 
 502:../../../mod/sensor/sensor.c **** 		/* Transmit sensor readings to PC */
 503:../../../mod/sensor/sensor.c **** 		if ( sensor_status == SENSOR_OK )
 504:../../../mod/sensor/sensor.c **** 			{
 505:../../../mod/sensor/sensor.c **** 			#ifndef VALVE_CONTROLLER
 506:../../../mod/sensor/sensor.c **** 				usb_transmit( &sensor_data_bytes[0]      , 
 507:../../../mod/sensor/sensor.c **** 							sizeof( sensor_data_bytes ), 
 508:../../../mod/sensor/sensor.c **** 							HAL_SENSOR_TIMEOUT );
 509:../../../mod/sensor/sensor.c **** 			#else
 510:../../../mod/sensor/sensor.c **** 				if ( cmd_source == CMD_SOURCE_USB )
 511:../../../mod/sensor/sensor.c **** 					{
 512:../../../mod/sensor/sensor.c **** 					usb_transmit( &sensor_data_bytes[0]      , 
 513:../../../mod/sensor/sensor.c **** 								sizeof( sensor_data_bytes ), 
 514:../../../mod/sensor/sensor.c **** 								HAL_SENSOR_TIMEOUT );
 515:../../../mod/sensor/sensor.c **** 					}
 516:../../../mod/sensor/sensor.c **** 				else
 517:../../../mod/sensor/sensor.c **** 					{
 518:../../../mod/sensor/sensor.c **** 					valve_transmit( &sensor_data_bytes[0],
 519:../../../mod/sensor/sensor.c **** 					                sizeof( sensor_data_bytes ), 
 520:../../../mod/sensor/sensor.c **** 									HAL_SENSOR_TIMEOUT );
 521:../../../mod/sensor/sensor.c **** 					}
 522:../../../mod/sensor/sensor.c **** 			#endif /* #ifndef VALVE_CONTROLLER */
 523:../../../mod/sensor/sensor.c **** 			return ( sensor_status );
 524:../../../mod/sensor/sensor.c ****             }
 525:../../../mod/sensor/sensor.c **** 		else
 526:../../../mod/sensor/sensor.c **** 			{
 527:../../../mod/sensor/sensor.c **** 			/* Sensor readings not recieved */
 528:../../../mod/sensor/sensor.c **** 			return( SENSOR_FAIL );
 529:../../../mod/sensor/sensor.c ****             }
 530:../../../mod/sensor/sensor.c ****         } /* SENSOR_DUMP_CODE */
 531:../../../mod/sensor/sensor.c **** 
 532:../../../mod/sensor/sensor.c **** 	/*--------------------------------------------------------------------------
 533:../../../mod/sensor/sensor.c **** 	 UNRECOGNIZED SUBCOMMAND 
 534:../../../mod/sensor/sensor.c **** 	--------------------------------------------------------------------------*/
 535:../../../mod/sensor/sensor.c **** 	default:
 536:../../../mod/sensor/sensor.c **** 		{
 537:../../../mod/sensor/sensor.c **** 		return ( SENSOR_UNRECOGNIZED_OP );
 538:../../../mod/sensor/sensor.c ****         }
 539:../../../mod/sensor/sensor.c ****     }
 540:../../../mod/sensor/sensor.c **** 
 541:../../../mod/sensor/sensor.c **** } /* sensor_cmd_execute */
 542:../../../mod/sensor/sensor.c **** 
 543:../../../mod/sensor/sensor.c **** 
 544:../../../mod/sensor/sensor.c **** /*******************************************************************************
ARM GAS  C:\Users\tnguy\AppData\Local\Temp\cchyHwKV.s 			page 11


 545:../../../mod/sensor/sensor.c **** *                                                                              *
 546:../../../mod/sensor/sensor.c **** * PROCEDURE:                                                                   * 
 547:../../../mod/sensor/sensor.c **** * 		sensor_dump                                                            *
 548:../../../mod/sensor/sensor.c **** *                                                                              *
 549:../../../mod/sensor/sensor.c **** * DESCRIPTION:                                                                 * 
 550:../../../mod/sensor/sensor.c **** *       reads from all sensors and fill in the sensor data structure           *
 551:../../../mod/sensor/sensor.c **** *                                                                              *
 552:../../../mod/sensor/sensor.c **** *******************************************************************************/
 553:../../../mod/sensor/sensor.c **** SENSOR_STATUS sensor_dump 
 554:../../../mod/sensor/sensor.c **** 	(
 555:../../../mod/sensor/sensor.c ****     SENSOR_DATA*        sensor_data_ptr /* Pointer to the sensor data struct should 
 556:../../../mod/sensor/sensor.c ****                                         be written */ 
 557:../../../mod/sensor/sensor.c ****     )
 558:../../../mod/sensor/sensor.c **** {
 559:../../../mod/sensor/sensor.c **** /*------------------------------------------------------------------------------
 560:../../../mod/sensor/sensor.c ****  Local variables 
 561:../../../mod/sensor/sensor.c **** ------------------------------------------------------------------------------*/
 562:../../../mod/sensor/sensor.c **** #if   defined( FLIGHT_COMPUTER      )
 563:../../../mod/sensor/sensor.c **** 	IMU_STATUS      accel_status;           /* IMU sensor status codes     */       
 564:../../../mod/sensor/sensor.c **** 	IMU_STATUS      gyro_status;
 565:../../../mod/sensor/sensor.c **** 	IMU_STATUS      mag_status; 
 566:../../../mod/sensor/sensor.c **** 	BARO_STATUS     press_status;           /* Baro Sensor status codes    */
 567:../../../mod/sensor/sensor.c **** 	BARO_STATUS     temp_status;
 568:../../../mod/sensor/sensor.c **** #elif defined( ENGINE_CONTROLLER    )
 569:../../../mod/sensor/sensor.c **** 	PRESSURE_STATUS pt_status;              /* Pressure status codes       */
 570:../../../mod/sensor/sensor.c **** 	THERMO_STATUS   tc_status;              /* Thermocouple status codes   */
 571:../../../mod/sensor/sensor.c **** 	LOADCELL_STATUS lc_status;              /* Loadcell status codes       */
 572:../../../mod/sensor/sensor.c **** #elif defined( FLIGHT_COMPUTER_LITE )
 573:../../../mod/sensor/sensor.c **** 	BARO_STATUS     press_status;           /* Baro Sensor status codes    */
 574:../../../mod/sensor/sensor.c **** 	BARO_STATUS     temp_status;
 575:../../../mod/sensor/sensor.c **** #endif
 576:../../../mod/sensor/sensor.c **** 
 577:../../../mod/sensor/sensor.c **** /*------------------------------------------------------------------------------
 578:../../../mod/sensor/sensor.c ****  Initializations 
 579:../../../mod/sensor/sensor.c **** ------------------------------------------------------------------------------*/
 580:../../../mod/sensor/sensor.c **** #if   defined( FLIGHT_COMPUTER      )
 581:../../../mod/sensor/sensor.c **** 	accel_status = IMU_OK;         
 582:../../../mod/sensor/sensor.c **** 	gyro_status  = IMU_OK;
 583:../../../mod/sensor/sensor.c **** 	mag_status   = IMU_OK; 
 584:../../../mod/sensor/sensor.c **** 	press_status = BARO_OK;           
 585:../../../mod/sensor/sensor.c **** 	temp_status  = BARO_OK;
 586:../../../mod/sensor/sensor.c **** #elif defined( ENGINE_CONTROLLER    )
 587:../../../mod/sensor/sensor.c **** 	pt_status    = PRESSURE_OK;          
 588:../../../mod/sensor/sensor.c **** 	tc_status    = THERMO_OK;        
 589:../../../mod/sensor/sensor.c **** #elif defined( FLIGHT_COMPUTER_LITE )
 590:../../../mod/sensor/sensor.c **** 	press_status = BARO_OK;           
 591:../../../mod/sensor/sensor.c **** 	temp_status  = BARO_OK;
 592:../../../mod/sensor/sensor.c **** #endif
 593:../../../mod/sensor/sensor.c **** 
 594:../../../mod/sensor/sensor.c **** /*------------------------------------------------------------------------------
 595:../../../mod/sensor/sensor.c ****  Call sensor API functions 
 596:../../../mod/sensor/sensor.c **** ------------------------------------------------------------------------------*/
 597:../../../mod/sensor/sensor.c **** 
 598:../../../mod/sensor/sensor.c **** /* Poll Sensors  */
 599:../../../mod/sensor/sensor.c **** #if defined( FLIGHT_COMPUTER )
 600:../../../mod/sensor/sensor.c **** 	/* IMU sensors */
 601:../../../mod/sensor/sensor.c **** 	accel_status = imu_get_accel_xyz( &(sensor_data_ptr->imu_data) ); 
ARM GAS  C:\Users\tnguy\AppData\Local\Temp\cchyHwKV.s 			page 12


 602:../../../mod/sensor/sensor.c **** 	gyro_status  = imu_get_gyro_xyz ( &(sensor_data_ptr->imu_data) );
 603:../../../mod/sensor/sensor.c **** 	mag_status   = imu_get_mag_xyz  ( &(sensor_data_ptr->imu_data) );
 604:../../../mod/sensor/sensor.c **** 	sensor_data_ptr -> imu_data.temp = 0;     // Figure out what to do with this 
 605:../../../mod/sensor/sensor.c **** 											  // readout, temporarily being used 
 606:../../../mod/sensor/sensor.c **** 											  // as struct padding
 607:../../../mod/sensor/sensor.c **** 
 608:../../../mod/sensor/sensor.c **** 	/* Baro sensors */
 609:../../../mod/sensor/sensor.c **** 	temp_status  = baro_get_temp    ( &(sensor_data_ptr -> baro_temp     ) );
 610:../../../mod/sensor/sensor.c **** 	press_status = baro_get_pressure( &(sensor_data_ptr -> baro_pressure ) );
 611:../../../mod/sensor/sensor.c **** 
 612:../../../mod/sensor/sensor.c **** #elif defined( ENGINE_CONTROLLER )
 613:../../../mod/sensor/sensor.c **** 	/* Pressure Transducers */
 614:../../../mod/sensor/sensor.c **** 	pt_status    = pressure_poll_pts( &( sensor_data_ptr -> pt_pressures[0] ) );
 615:../../../mod/sensor/sensor.c **** 
 616:../../../mod/sensor/sensor.c **** 	/* Load cell */
 617:../../../mod/sensor/sensor.c **** 	lc_status    = loadcell_get_reading( &( sensor_data_ptr -> load_cell_force ) );
 618:../../../mod/sensor/sensor.c **** 
 619:../../../mod/sensor/sensor.c **** 	/* Thermocouple */
 620:../../../mod/sensor/sensor.c **** 	tc_status    = temp_get_temp( &( sensor_data_ptr -> tc_temp ), 
 621:../../../mod/sensor/sensor.c **** 	                              THERMO_HOT_JUNCTION );
 622:../../../mod/sensor/sensor.c **** #elif defined( FLIGHT_COMPUTER_LITE )
 623:../../../mod/sensor/sensor.c **** 	/* Baro sensors */
 624:../../../mod/sensor/sensor.c **** 	temp_status  = baro_get_temp    ( &(sensor_data_ptr -> baro_temp     ) );
 625:../../../mod/sensor/sensor.c **** 	press_status = baro_get_pressure( &(sensor_data_ptr -> baro_pressure ) );
 626:../../../mod/sensor/sensor.c **** 
 627:../../../mod/sensor/sensor.c **** #elif defined( VALVE_CONTROLLER     )
 628:../../../mod/sensor/sensor.c **** 	/* Main Valve encoders */
 629:../../../mod/sensor/sensor.c **** 	sensor_data_ptr -> lox_valve_pos  = valve_get_ox_valve_pos();
 630:../../../mod/sensor/sensor.c **** 	sensor_data_ptr -> fuel_valve_pos = valve_get_fuel_valve_pos();
 631:../../../mod/sensor/sensor.c **** #endif
 632:../../../mod/sensor/sensor.c **** 
 633:../../../mod/sensor/sensor.c **** 
 634:../../../mod/sensor/sensor.c **** /*------------------------------------------------------------------------------
 635:../../../mod/sensor/sensor.c ****  Set command status from sensor API returns 
 636:../../../mod/sensor/sensor.c **** ------------------------------------------------------------------------------*/
 637:../../../mod/sensor/sensor.c **** #if defined( FLIGHT_COMPUTER )
 638:../../../mod/sensor/sensor.c **** 	if      ( accel_status != IMU_OK )
 639:../../../mod/sensor/sensor.c **** 		{
 640:../../../mod/sensor/sensor.c **** 		return SENSOR_ACCEL_ERROR;
 641:../../../mod/sensor/sensor.c **** 		}
 642:../../../mod/sensor/sensor.c **** 	else if ( gyro_status  != IMU_OK )
 643:../../../mod/sensor/sensor.c **** 		{
 644:../../../mod/sensor/sensor.c **** 		return SENSOR_GYRO_ERROR;
 645:../../../mod/sensor/sensor.c **** 		}
 646:../../../mod/sensor/sensor.c **** 	else if ( mag_status   != IMU_OK )
 647:../../../mod/sensor/sensor.c **** 		{
 648:../../../mod/sensor/sensor.c **** 		return SENSOR_MAG_ERROR;	
 649:../../../mod/sensor/sensor.c **** 		}
 650:../../../mod/sensor/sensor.c **** 	else if ( press_status != BARO_OK ||
 651:../../../mod/sensor/sensor.c **** 			temp_status  != BARO_OK  )
 652:../../../mod/sensor/sensor.c **** 		{
 653:../../../mod/sensor/sensor.c **** 		return SENSOR_BARO_ERROR;
 654:../../../mod/sensor/sensor.c **** 		}
 655:../../../mod/sensor/sensor.c **** 	else
 656:../../../mod/sensor/sensor.c **** 		{
 657:../../../mod/sensor/sensor.c **** 		return SENSOR_OK;
 658:../../../mod/sensor/sensor.c **** 		}
ARM GAS  C:\Users\tnguy\AppData\Local\Temp\cchyHwKV.s 			page 13


 659:../../../mod/sensor/sensor.c **** #elif defined( ENGINE_CONTROLLER )
 660:../../../mod/sensor/sensor.c **** 	if      ( pt_status != PRESSURE_OK )
 661:../../../mod/sensor/sensor.c **** 		{
 662:../../../mod/sensor/sensor.c **** 		return SENSOR_PT_ERROR;
 663:../../../mod/sensor/sensor.c **** 		}
 664:../../../mod/sensor/sensor.c **** 	else if ( tc_status != THERMO_OK   )
 665:../../../mod/sensor/sensor.c **** 		{
 666:../../../mod/sensor/sensor.c **** 		return SENSOR_TC_ERROR;
 667:../../../mod/sensor/sensor.c **** 		}
 668:../../../mod/sensor/sensor.c **** 	else if ( lc_status != LOADCELL_OK )
 669:../../../mod/sensor/sensor.c **** 		{
 670:../../../mod/sensor/sensor.c **** 		return SENSOR_LC_ERROR;
 671:../../../mod/sensor/sensor.c **** 		}
 672:../../../mod/sensor/sensor.c **** 	else
 673:../../../mod/sensor/sensor.c **** 		{
 674:../../../mod/sensor/sensor.c **** 		return SENSOR_OK;
 675:../../../mod/sensor/sensor.c **** 		}
 676:../../../mod/sensor/sensor.c **** #elif defined( FLIGHT_COMPUTER_LITE )
 677:../../../mod/sensor/sensor.c **** 	if ( press_status != BARO_OK ||
 678:../../../mod/sensor/sensor.c **** 		 temp_status  != BARO_OK  )
 679:../../../mod/sensor/sensor.c **** 		{
 680:../../../mod/sensor/sensor.c **** 		return SENSOR_BARO_ERROR;
 681:../../../mod/sensor/sensor.c **** 		}
 682:../../../mod/sensor/sensor.c **** 	else
 683:../../../mod/sensor/sensor.c **** 		{
 684:../../../mod/sensor/sensor.c **** 		return SENSOR_OK;
 685:../../../mod/sensor/sensor.c **** 		}
 686:../../../mod/sensor/sensor.c **** #elif defined( VALVE_CONTROLLER     )
 687:../../../mod/sensor/sensor.c **** 	return SENSOR_OK;
 688:../../../mod/sensor/sensor.c **** #endif /* #elif defined( ENGINE_CONTROLLER )*/
 689:../../../mod/sensor/sensor.c **** 
 690:../../../mod/sensor/sensor.c **** } /* sensor_dump */
 691:../../../mod/sensor/sensor.c **** 
 692:../../../mod/sensor/sensor.c **** 
 693:../../../mod/sensor/sensor.c **** /*******************************************************************************
 694:../../../mod/sensor/sensor.c **** *                                                                              *
 695:../../../mod/sensor/sensor.c **** * PROCEDURE:                                                                   *
 696:../../../mod/sensor/sensor.c **** * 		sensor_poll                                                            *
 697:../../../mod/sensor/sensor.c **** *                                                                              *
 698:../../../mod/sensor/sensor.c **** * DESCRIPTION:                                                                 *
 699:../../../mod/sensor/sensor.c **** *       Poll specific sensors on the board                                     *
 700:../../../mod/sensor/sensor.c **** *                                                                              *
 701:../../../mod/sensor/sensor.c **** *******************************************************************************/
 702:../../../mod/sensor/sensor.c **** SENSOR_STATUS sensor_poll
 703:../../../mod/sensor/sensor.c **** 	(
 704:../../../mod/sensor/sensor.c **** 	SENSOR_DATA* sensor_data_ptr, /* Data Export target               */
 705:../../../mod/sensor/sensor.c **** 	SENSOR_ID*   sensor_ids_ptr , /* Array containing sensor IDS      */
 706:../../../mod/sensor/sensor.c **** 	uint8_t      num_sensors      /* Number of sensors to poll        */
 707:../../../mod/sensor/sensor.c **** 	)
 708:../../../mod/sensor/sensor.c **** {
 709:../../../mod/sensor/sensor.c **** /*------------------------------------------------------------------------------
 710:../../../mod/sensor/sensor.c ****  Local Variables  
 711:../../../mod/sensor/sensor.c **** ------------------------------------------------------------------------------*/
 712:../../../mod/sensor/sensor.c **** SENSOR_ID  sensor_id;        /* ID of sensor currently being polled */
 713:../../../mod/sensor/sensor.c **** SENSOR_ID* sensor_id_ptr;    /* Pointer to sensor id                */
 714:../../../mod/sensor/sensor.c **** 
 715:../../../mod/sensor/sensor.c **** /* Module return codes */
ARM GAS  C:\Users\tnguy\AppData\Local\Temp\cchyHwKV.s 			page 14


 716:../../../mod/sensor/sensor.c **** #if   defined( FLIGHT_COMPUTER   )
 717:../../../mod/sensor/sensor.c **** 	IMU_STATUS      imu_status;      /* IMU Module return codes   */ 
 718:../../../mod/sensor/sensor.c **** 	BARO_STATUS     baro_status;     /* Baro module return codes  */
 719:../../../mod/sensor/sensor.c **** #elif defined( ENGINE_CONTROLLER )
 720:../../../mod/sensor/sensor.c **** 	THERMO_STATUS   thermo_status;   /* Thermocouple return codes */
 721:../../../mod/sensor/sensor.c **** 	LOADCELL_STATUS lc_status;       /* Loadcell return codes     */
 722:../../../mod/sensor/sensor.c **** 	PRESSURE_STATUS pt_status;       /* PT return codes           */
 723:../../../mod/sensor/sensor.c **** #elif defined( FLIGHT_COMPUTER_LITE )
 724:../../../mod/sensor/sensor.c **** 	BARO_STATUS     baro_status;     /* Baro module return codes  */
 725:../../../mod/sensor/sensor.c **** #endif
 726:../../../mod/sensor/sensor.c **** 
 727:../../../mod/sensor/sensor.c **** /* Sensor poll memory to prevent multiple calls to same API function */
 728:../../../mod/sensor/sensor.c **** #if defined( FLIGHT_COMPUTER )
 729:../../../mod/sensor/sensor.c **** 	bool imu_accel_read;
 730:../../../mod/sensor/sensor.c **** 	bool imu_gyro_read;
 731:../../../mod/sensor/sensor.c **** 	bool imu_mag_read;
 732:../../../mod/sensor/sensor.c **** #endif
 733:../../../mod/sensor/sensor.c **** 
 734:../../../mod/sensor/sensor.c **** /*------------------------------------------------------------------------------
 735:../../../mod/sensor/sensor.c ****  Initializations 
 736:../../../mod/sensor/sensor.c **** ------------------------------------------------------------------------------*/
 737:../../../mod/sensor/sensor.c **** sensor_id_ptr     = sensor_ids_ptr;
 738:../../../mod/sensor/sensor.c **** sensor_id         = *(sensor_id_ptr   );
 739:../../../mod/sensor/sensor.c **** 
 740:../../../mod/sensor/sensor.c **** /* Module return codes */
 741:../../../mod/sensor/sensor.c **** #if   defined( FLIGHT_COMPUTER   )
 742:../../../mod/sensor/sensor.c **** 	imu_status    = IMU_OK;
 743:../../../mod/sensor/sensor.c **** 	baro_status   = BARO_OK;
 744:../../../mod/sensor/sensor.c **** #elif defined( ENGINE_CONTROLLER )
 745:../../../mod/sensor/sensor.c **** 	thermo_status = THERMO_OK;
 746:../../../mod/sensor/sensor.c **** 	lc_status     = LOADCELL_OK;
 747:../../../mod/sensor/sensor.c **** 	pt_status     = PRESSURE_OK;
 748:../../../mod/sensor/sensor.c **** #elif defined( FLIGHT_COMPUTER_LITE )
 749:../../../mod/sensor/sensor.c **** 	baro_status   = BARO_OK;
 750:../../../mod/sensor/sensor.c **** #endif
 751:../../../mod/sensor/sensor.c **** 
 752:../../../mod/sensor/sensor.c **** /* Sensor poll memory */
 753:../../../mod/sensor/sensor.c **** #if defined( FLIGHT_COMPUTER )
 754:../../../mod/sensor/sensor.c **** 	imu_accel_read = false;
 755:../../../mod/sensor/sensor.c **** 	imu_gyro_read  = false;
 756:../../../mod/sensor/sensor.c **** 	imu_mag_read   = false;
 757:../../../mod/sensor/sensor.c **** #endif
 758:../../../mod/sensor/sensor.c **** 
 759:../../../mod/sensor/sensor.c **** 
 760:../../../mod/sensor/sensor.c **** /*------------------------------------------------------------------------------
 761:../../../mod/sensor/sensor.c ****  API function implementation
 762:../../../mod/sensor/sensor.c **** ------------------------------------------------------------------------------*/
 763:../../../mod/sensor/sensor.c **** 
 764:../../../mod/sensor/sensor.c **** /* Iterate over each sensor readout */
 765:../../../mod/sensor/sensor.c **** for ( int i = 0; i < num_sensors; ++i )
 766:../../../mod/sensor/sensor.c **** 	{
 767:../../../mod/sensor/sensor.c **** 	
 768:../../../mod/sensor/sensor.c **** 	/* Poll sensor */
 769:../../../mod/sensor/sensor.c **** 	switch ( sensor_id )
 770:../../../mod/sensor/sensor.c **** 		{
 771:../../../mod/sensor/sensor.c **** 		#if defined( FLIGHT_COMPUTER )
 772:../../../mod/sensor/sensor.c **** 			case SENSOR_ACCX:
ARM GAS  C:\Users\tnguy\AppData\Local\Temp\cchyHwKV.s 			page 15


 773:../../../mod/sensor/sensor.c **** 				{
 774:../../../mod/sensor/sensor.c **** 				if ( !imu_accel_read )
 775:../../../mod/sensor/sensor.c **** 					{
 776:../../../mod/sensor/sensor.c **** 					imu_status = imu_get_accel_xyz( &( sensor_data_ptr -> imu_data ) );
 777:../../../mod/sensor/sensor.c **** 					if ( imu_status != IMU_OK )
 778:../../../mod/sensor/sensor.c **** 						{
 779:../../../mod/sensor/sensor.c **** 						return SENSOR_ACCEL_ERROR;
 780:../../../mod/sensor/sensor.c **** 						}
 781:../../../mod/sensor/sensor.c **** 					imu_accel_read = true;
 782:../../../mod/sensor/sensor.c **** 					}
 783:../../../mod/sensor/sensor.c **** 				break;
 784:../../../mod/sensor/sensor.c **** 				}
 785:../../../mod/sensor/sensor.c **** 
 786:../../../mod/sensor/sensor.c **** 			case SENSOR_ACCY:
 787:../../../mod/sensor/sensor.c **** 				{
 788:../../../mod/sensor/sensor.c **** 				if ( !imu_accel_read )
 789:../../../mod/sensor/sensor.c **** 					{
 790:../../../mod/sensor/sensor.c **** 					imu_status = imu_get_accel_xyz( &( sensor_data_ptr -> imu_data ) );
 791:../../../mod/sensor/sensor.c **** 					if ( imu_status != IMU_OK )
 792:../../../mod/sensor/sensor.c **** 						{
 793:../../../mod/sensor/sensor.c **** 						return SENSOR_ACCEL_ERROR;
 794:../../../mod/sensor/sensor.c **** 						}
 795:../../../mod/sensor/sensor.c **** 					imu_accel_read = true;
 796:../../../mod/sensor/sensor.c **** 					}
 797:../../../mod/sensor/sensor.c **** 				break;
 798:../../../mod/sensor/sensor.c **** 				}
 799:../../../mod/sensor/sensor.c **** 
 800:../../../mod/sensor/sensor.c **** 			case SENSOR_ACCZ:
 801:../../../mod/sensor/sensor.c **** 				{
 802:../../../mod/sensor/sensor.c **** 				if ( !imu_accel_read )
 803:../../../mod/sensor/sensor.c **** 					{
 804:../../../mod/sensor/sensor.c **** 					imu_status = imu_get_accel_xyz( &( sensor_data_ptr -> imu_data ) );
 805:../../../mod/sensor/sensor.c **** 					if ( imu_status != IMU_OK )
 806:../../../mod/sensor/sensor.c **** 						{
 807:../../../mod/sensor/sensor.c **** 						return SENSOR_ACCEL_ERROR;
 808:../../../mod/sensor/sensor.c **** 						}
 809:../../../mod/sensor/sensor.c **** 					imu_accel_read = true;
 810:../../../mod/sensor/sensor.c **** 					}
 811:../../../mod/sensor/sensor.c **** 				break;
 812:../../../mod/sensor/sensor.c **** 				}
 813:../../../mod/sensor/sensor.c **** 
 814:../../../mod/sensor/sensor.c **** 			case SENSOR_GYROX:
 815:../../../mod/sensor/sensor.c **** 				{
 816:../../../mod/sensor/sensor.c **** 				if ( !imu_gyro_read )
 817:../../../mod/sensor/sensor.c **** 					{
 818:../../../mod/sensor/sensor.c **** 					imu_status = imu_get_gyro_xyz( &( sensor_data_ptr -> imu_data ) );
 819:../../../mod/sensor/sensor.c **** 					if ( imu_status != IMU_OK )
 820:../../../mod/sensor/sensor.c **** 						{
 821:../../../mod/sensor/sensor.c **** 						return SENSOR_GYRO_ERROR;
 822:../../../mod/sensor/sensor.c **** 						}
 823:../../../mod/sensor/sensor.c **** 					imu_gyro_read = true;
 824:../../../mod/sensor/sensor.c **** 					}
 825:../../../mod/sensor/sensor.c **** 				break;
 826:../../../mod/sensor/sensor.c **** 				}
 827:../../../mod/sensor/sensor.c **** 
 828:../../../mod/sensor/sensor.c **** 			case SENSOR_GYROY:
 829:../../../mod/sensor/sensor.c **** 				{
ARM GAS  C:\Users\tnguy\AppData\Local\Temp\cchyHwKV.s 			page 16


 830:../../../mod/sensor/sensor.c **** 				if ( !imu_gyro_read )
 831:../../../mod/sensor/sensor.c **** 					{
 832:../../../mod/sensor/sensor.c **** 					imu_status = imu_get_gyro_xyz( &( sensor_data_ptr -> imu_data ) );
 833:../../../mod/sensor/sensor.c **** 					if ( imu_status != IMU_OK )
 834:../../../mod/sensor/sensor.c **** 						{
 835:../../../mod/sensor/sensor.c **** 						return SENSOR_GYRO_ERROR;
 836:../../../mod/sensor/sensor.c **** 						}
 837:../../../mod/sensor/sensor.c **** 					imu_gyro_read = true;
 838:../../../mod/sensor/sensor.c **** 					}
 839:../../../mod/sensor/sensor.c **** 				break;
 840:../../../mod/sensor/sensor.c **** 				}
 841:../../../mod/sensor/sensor.c **** 
 842:../../../mod/sensor/sensor.c **** 			case SENSOR_GYROZ:
 843:../../../mod/sensor/sensor.c **** 				{
 844:../../../mod/sensor/sensor.c **** 				if ( !imu_gyro_read )
 845:../../../mod/sensor/sensor.c **** 					{
 846:../../../mod/sensor/sensor.c **** 					imu_status = imu_get_gyro_xyz( &( sensor_data_ptr -> imu_data ) );
 847:../../../mod/sensor/sensor.c **** 					if ( imu_status != IMU_OK )
 848:../../../mod/sensor/sensor.c **** 						{
 849:../../../mod/sensor/sensor.c **** 						return SENSOR_GYRO_ERROR;
 850:../../../mod/sensor/sensor.c **** 						}
 851:../../../mod/sensor/sensor.c **** 					imu_gyro_read = true;
 852:../../../mod/sensor/sensor.c **** 					}
 853:../../../mod/sensor/sensor.c **** 				break;
 854:../../../mod/sensor/sensor.c **** 				}
 855:../../../mod/sensor/sensor.c **** 
 856:../../../mod/sensor/sensor.c **** 			case SENSOR_MAGX:
 857:../../../mod/sensor/sensor.c **** 				{
 858:../../../mod/sensor/sensor.c **** 				if ( !imu_mag_read )
 859:../../../mod/sensor/sensor.c **** 					{
 860:../../../mod/sensor/sensor.c **** 					imu_status = imu_get_mag_xyz( &( sensor_data_ptr -> imu_data ) );
 861:../../../mod/sensor/sensor.c **** 					if ( imu_status != IMU_OK )
 862:../../../mod/sensor/sensor.c **** 						{
 863:../../../mod/sensor/sensor.c **** 						return SENSOR_GYRO_ERROR;
 864:../../../mod/sensor/sensor.c **** 						}
 865:../../../mod/sensor/sensor.c **** 					imu_mag_read = true;
 866:../../../mod/sensor/sensor.c **** 					}
 867:../../../mod/sensor/sensor.c **** 				break;
 868:../../../mod/sensor/sensor.c **** 				}
 869:../../../mod/sensor/sensor.c **** 
 870:../../../mod/sensor/sensor.c **** 			case SENSOR_MAGY:
 871:../../../mod/sensor/sensor.c **** 				{
 872:../../../mod/sensor/sensor.c **** 				if ( !imu_mag_read )
 873:../../../mod/sensor/sensor.c **** 					{
 874:../../../mod/sensor/sensor.c **** 					imu_status = imu_get_mag_xyz( &( sensor_data_ptr -> imu_data ) );
 875:../../../mod/sensor/sensor.c **** 					if ( imu_status != IMU_OK )
 876:../../../mod/sensor/sensor.c **** 						{
 877:../../../mod/sensor/sensor.c **** 						return SENSOR_GYRO_ERROR;
 878:../../../mod/sensor/sensor.c **** 						}
 879:../../../mod/sensor/sensor.c **** 					imu_mag_read = true;
 880:../../../mod/sensor/sensor.c **** 					}
 881:../../../mod/sensor/sensor.c **** 				break;
 882:../../../mod/sensor/sensor.c **** 				}
 883:../../../mod/sensor/sensor.c **** 
 884:../../../mod/sensor/sensor.c **** 			case SENSOR_MAGZ:
 885:../../../mod/sensor/sensor.c **** 				{
 886:../../../mod/sensor/sensor.c **** 				if ( !imu_mag_read )
ARM GAS  C:\Users\tnguy\AppData\Local\Temp\cchyHwKV.s 			page 17


 887:../../../mod/sensor/sensor.c **** 					{
 888:../../../mod/sensor/sensor.c **** 					imu_status = imu_get_mag_xyz( &( sensor_data_ptr -> imu_data ) );
 889:../../../mod/sensor/sensor.c **** 					if ( imu_status != IMU_OK )
 890:../../../mod/sensor/sensor.c **** 						{
 891:../../../mod/sensor/sensor.c **** 						return SENSOR_GYRO_ERROR;
 892:../../../mod/sensor/sensor.c **** 						}
 893:../../../mod/sensor/sensor.c **** 					imu_mag_read = true;
 894:../../../mod/sensor/sensor.c **** 					}
 895:../../../mod/sensor/sensor.c **** 				break;
 896:../../../mod/sensor/sensor.c **** 				}
 897:../../../mod/sensor/sensor.c **** 
 898:../../../mod/sensor/sensor.c **** 			case SENSOR_IMUT:
 899:../../../mod/sensor/sensor.c **** 				{
 900:../../../mod/sensor/sensor.c **** 				sensor_data_ptr -> imu_data.temp = 0;
 901:../../../mod/sensor/sensor.c **** 				break;
 902:../../../mod/sensor/sensor.c **** 				}
 903:../../../mod/sensor/sensor.c **** 		#endif /* #if defined( FLIGHT_COMPUTER ) */
 904:../../../mod/sensor/sensor.c **** 
 905:../../../mod/sensor/sensor.c **** 		#if ( defined( FLIGHT_COMPUTER )  || defined( FLIGHT_COMPUTER_LITE ) )
 906:../../../mod/sensor/sensor.c **** 			case SENSOR_PRES:
 907:../../../mod/sensor/sensor.c **** 				{
 908:../../../mod/sensor/sensor.c **** 				baro_status = baro_get_temp(     &( sensor_data_ptr -> baro_temp     ) );
 909:../../../mod/sensor/sensor.c **** 				if ( baro_status != BARO_OK )
 910:../../../mod/sensor/sensor.c **** 					{
 911:../../../mod/sensor/sensor.c **** 					return SENSOR_BARO_ERROR;
 912:../../../mod/sensor/sensor.c **** 					}
 913:../../../mod/sensor/sensor.c **** 				baro_status = baro_get_pressure( &( sensor_data_ptr -> baro_pressure ) );
 914:../../../mod/sensor/sensor.c **** 				if ( baro_status != BARO_OK )
 915:../../../mod/sensor/sensor.c **** 					{
 916:../../../mod/sensor/sensor.c **** 					return SENSOR_BARO_ERROR;
 917:../../../mod/sensor/sensor.c **** 					}
 918:../../../mod/sensor/sensor.c **** 				break;
 919:../../../mod/sensor/sensor.c **** 				}
 920:../../../mod/sensor/sensor.c **** 
 921:../../../mod/sensor/sensor.c **** 			case SENSOR_TEMP:
 922:../../../mod/sensor/sensor.c **** 				{
 923:../../../mod/sensor/sensor.c **** 				baro_status = baro_get_temp( &( sensor_data_ptr -> baro_temp ) );
 924:../../../mod/sensor/sensor.c **** 				if ( baro_status != BARO_OK )
 925:../../../mod/sensor/sensor.c **** 					{
 926:../../../mod/sensor/sensor.c **** 					return SENSOR_BARO_ERROR;
 927:../../../mod/sensor/sensor.c **** 					}
 928:../../../mod/sensor/sensor.c **** 				break;
 929:../../../mod/sensor/sensor.c **** 				}
 930:../../../mod/sensor/sensor.c **** 		#endif /* if defined( FLIGHT_COMPUTER ) || defined( FLIGHT_COMPUTER_LITE ) */
 931:../../../mod/sensor/sensor.c **** 
 932:../../../mod/sensor/sensor.c **** 		#if defined( ENGINE_CONTROLLER )
 933:../../../mod/sensor/sensor.c **** 			case SENSOR_PT0:
 934:../../../mod/sensor/sensor.c **** 				{
 935:../../../mod/sensor/sensor.c **** 				pt_status = pressure_get_pt_reading( PT_NUM0, 
 936:../../../mod/sensor/sensor.c **** 				                                    &( sensor_data_ptr -> pt_pressures[0]) );
 937:../../../mod/sensor/sensor.c **** 				if ( pt_status != PRESSURE_OK )
 938:../../../mod/sensor/sensor.c **** 					{
 939:../../../mod/sensor/sensor.c **** 					return SENSOR_PT_ERROR;
 940:../../../mod/sensor/sensor.c **** 					}
 941:../../../mod/sensor/sensor.c **** 				break;
 942:../../../mod/sensor/sensor.c **** 				}
 943:../../../mod/sensor/sensor.c **** 
ARM GAS  C:\Users\tnguy\AppData\Local\Temp\cchyHwKV.s 			page 18


 944:../../../mod/sensor/sensor.c **** 			case SENSOR_PT1:
 945:../../../mod/sensor/sensor.c **** 				{
 946:../../../mod/sensor/sensor.c **** 				pt_status = pressure_get_pt_reading( PT_NUM1, 
 947:../../../mod/sensor/sensor.c **** 				                                    &( sensor_data_ptr -> pt_pressures[0]) );
 948:../../../mod/sensor/sensor.c **** 				if ( pt_status != PRESSURE_OK )
 949:../../../mod/sensor/sensor.c **** 					{
 950:../../../mod/sensor/sensor.c **** 					return SENSOR_PT_ERROR;
 951:../../../mod/sensor/sensor.c **** 					}
 952:../../../mod/sensor/sensor.c **** 				break;
 953:../../../mod/sensor/sensor.c **** 				}
 954:../../../mod/sensor/sensor.c **** 
 955:../../../mod/sensor/sensor.c **** 			case SENSOR_PT2:
 956:../../../mod/sensor/sensor.c **** 				{
 957:../../../mod/sensor/sensor.c **** 				pt_status = pressure_get_pt_reading( PT_NUM2, 
 958:../../../mod/sensor/sensor.c **** 				                                    &( sensor_data_ptr -> pt_pressures[0]) );
 959:../../../mod/sensor/sensor.c **** 				if ( pt_status != PRESSURE_OK )
 960:../../../mod/sensor/sensor.c **** 					{
 961:../../../mod/sensor/sensor.c **** 					return SENSOR_PT_ERROR;
 962:../../../mod/sensor/sensor.c **** 					}
 963:../../../mod/sensor/sensor.c **** 				break;
 964:../../../mod/sensor/sensor.c **** 				}
 965:../../../mod/sensor/sensor.c **** 
 966:../../../mod/sensor/sensor.c **** 			case SENSOR_PT3:
 967:../../../mod/sensor/sensor.c **** 				{
 968:../../../mod/sensor/sensor.c **** 				pt_status = pressure_get_pt_reading( PT_NUM3, 
 969:../../../mod/sensor/sensor.c **** 				                                    &( sensor_data_ptr -> pt_pressures[0]) );
 970:../../../mod/sensor/sensor.c **** 				if ( pt_status != PRESSURE_OK )
 971:../../../mod/sensor/sensor.c **** 					{
 972:../../../mod/sensor/sensor.c **** 					return SENSOR_PT_ERROR;
 973:../../../mod/sensor/sensor.c **** 					}
 974:../../../mod/sensor/sensor.c **** 				break;
 975:../../../mod/sensor/sensor.c **** 				}
 976:../../../mod/sensor/sensor.c **** 
 977:../../../mod/sensor/sensor.c **** 			case SENSOR_PT4:
 978:../../../mod/sensor/sensor.c **** 				{
 979:../../../mod/sensor/sensor.c **** 				pt_status = pressure_get_pt_reading( PT_NUM4, 
 980:../../../mod/sensor/sensor.c **** 				                                    &( sensor_data_ptr -> pt_pressures[0]) );
 981:../../../mod/sensor/sensor.c **** 				if ( pt_status != PRESSURE_OK )
 982:../../../mod/sensor/sensor.c **** 					{
 983:../../../mod/sensor/sensor.c **** 					return SENSOR_PT_ERROR;
 984:../../../mod/sensor/sensor.c **** 					}
 985:../../../mod/sensor/sensor.c **** 				break;
 986:../../../mod/sensor/sensor.c **** 				}
 987:../../../mod/sensor/sensor.c **** 
 988:../../../mod/sensor/sensor.c **** 			case SENSOR_PT5:
 989:../../../mod/sensor/sensor.c **** 				{
 990:../../../mod/sensor/sensor.c **** 				pt_status = pressure_get_pt_reading( PT_NUM5, 
 991:../../../mod/sensor/sensor.c **** 				                                    &( sensor_data_ptr -> pt_pressures[0]) );
 992:../../../mod/sensor/sensor.c **** 				if ( pt_status != PRESSURE_OK )
 993:../../../mod/sensor/sensor.c **** 					{
 994:../../../mod/sensor/sensor.c **** 					return SENSOR_PT_ERROR;
 995:../../../mod/sensor/sensor.c **** 					}
 996:../../../mod/sensor/sensor.c **** 				break;
 997:../../../mod/sensor/sensor.c **** 				}
 998:../../../mod/sensor/sensor.c **** 
 999:../../../mod/sensor/sensor.c **** 			case SENSOR_PT6:
1000:../../../mod/sensor/sensor.c **** 				{
ARM GAS  C:\Users\tnguy\AppData\Local\Temp\cchyHwKV.s 			page 19


1001:../../../mod/sensor/sensor.c **** 				pt_status = pressure_get_pt_reading( PT_NUM6, 
1002:../../../mod/sensor/sensor.c **** 				                                    &( sensor_data_ptr -> pt_pressures[0]) );
1003:../../../mod/sensor/sensor.c **** 				if ( pt_status != PRESSURE_OK )
1004:../../../mod/sensor/sensor.c **** 					{
1005:../../../mod/sensor/sensor.c **** 					return SENSOR_PT_ERROR;
1006:../../../mod/sensor/sensor.c **** 					}
1007:../../../mod/sensor/sensor.c **** 				break;
1008:../../../mod/sensor/sensor.c **** 				}
1009:../../../mod/sensor/sensor.c **** 
1010:../../../mod/sensor/sensor.c **** 			case SENSOR_PT7:
1011:../../../mod/sensor/sensor.c **** 				{
1012:../../../mod/sensor/sensor.c **** 				pt_status = pressure_get_pt_reading( PT_NUM7, 
1013:../../../mod/sensor/sensor.c **** 				                                    &( sensor_data_ptr -> pt_pressures[0]) );
1014:../../../mod/sensor/sensor.c **** 				if ( pt_status != PRESSURE_OK )
1015:../../../mod/sensor/sensor.c **** 					{
1016:../../../mod/sensor/sensor.c **** 					return SENSOR_PT_ERROR;
1017:../../../mod/sensor/sensor.c **** 					}
1018:../../../mod/sensor/sensor.c **** 				break;
1019:../../../mod/sensor/sensor.c **** 				}
1020:../../../mod/sensor/sensor.c **** 
1021:../../../mod/sensor/sensor.c **** 			case SENSOR_TC:
1022:../../../mod/sensor/sensor.c **** 				{
1023:../../../mod/sensor/sensor.c **** 				thermo_status = temp_get_temp( &( sensor_data_ptr -> tc_temp ),
1024:../../../mod/sensor/sensor.c **** 				                               THERMO_HOT_JUNCTION );
1025:../../../mod/sensor/sensor.c **** 				if ( thermo_status != THERMO_OK )
1026:../../../mod/sensor/sensor.c **** 					{
1027:../../../mod/sensor/sensor.c **** 					return SENSOR_TC_ERROR;
1028:../../../mod/sensor/sensor.c **** 					}
1029:../../../mod/sensor/sensor.c **** 				break;
1030:../../../mod/sensor/sensor.c **** 				}
1031:../../../mod/sensor/sensor.c **** 
1032:../../../mod/sensor/sensor.c **** 			case SENSOR_LC:
1033:../../../mod/sensor/sensor.c **** 				{
1034:../../../mod/sensor/sensor.c **** 				lc_status = loadcell_get_reading( &( sensor_data_ptr -> load_cell_force ) );
1035:../../../mod/sensor/sensor.c **** 				if ( lc_status != LOADCELL_OK )
1036:../../../mod/sensor/sensor.c **** 					{
1037:../../../mod/sensor/sensor.c **** 					return SENSOR_LC_ERROR;
1038:../../../mod/sensor/sensor.c **** 					}
1039:../../../mod/sensor/sensor.c **** 				break;
1040:../../../mod/sensor/sensor.c **** 				}
1041:../../../mod/sensor/sensor.c **** 		
1042:../../../mod/sensor/sensor.c **** 		#elif defined( VALVE_CONTROLLER )
1043:../../../mod/sensor/sensor.c **** 
1044:../../../mod/sensor/sensor.c **** 			case SENSOR_ENCO:
1045:../../../mod/sensor/sensor.c **** 				{
1046:../../../mod/sensor/sensor.c **** 				sensor_data_ptr -> lox_valve_pos = valve_get_ox_valve_pos();
1047:../../../mod/sensor/sensor.c **** 				break;
1048:../../../mod/sensor/sensor.c **** 				}
1049:../../../mod/sensor/sensor.c **** 
1050:../../../mod/sensor/sensor.c **** 			case SENSOR_ENCF:
1051:../../../mod/sensor/sensor.c **** 				{
1052:../../../mod/sensor/sensor.c **** 				sensor_data_ptr -> fuel_valve_pos = valve_get_fuel_valve_pos();
1053:../../../mod/sensor/sensor.c **** 				break;
1054:../../../mod/sensor/sensor.c **** 				}
1055:../../../mod/sensor/sensor.c **** 
1056:../../../mod/sensor/sensor.c **** 		#endif /* #if defined( ENGINE_CONTROLLER ) */
1057:../../../mod/sensor/sensor.c **** 
ARM GAS  C:\Users\tnguy\AppData\Local\Temp\cchyHwKV.s 			page 20


1058:../../../mod/sensor/sensor.c **** 		default:
1059:../../../mod/sensor/sensor.c **** 			{
1060:../../../mod/sensor/sensor.c **** 			/* Unrecognized sensor id */
1061:../../../mod/sensor/sensor.c **** 			return SENSOR_UNRECOGNIZED_SENSOR_ID; 
1062:../../../mod/sensor/sensor.c **** 			}
1063:../../../mod/sensor/sensor.c **** 		} /* switch( sensor_id ) */
1064:../../../mod/sensor/sensor.c **** 
1065:../../../mod/sensor/sensor.c **** 		/* Go to next sensor */
1066:../../../mod/sensor/sensor.c **** 		sensor_id_ptr++;
1067:../../../mod/sensor/sensor.c **** 		sensor_id        = *(sensor_id_ptr   );
1068:../../../mod/sensor/sensor.c **** 
1069:../../../mod/sensor/sensor.c **** 	} /*  while( i < num_sensors ) */
1070:../../../mod/sensor/sensor.c **** 
1071:../../../mod/sensor/sensor.c **** return SENSOR_OK;
1072:../../../mod/sensor/sensor.c **** } /* sensor_poll */
1073:../../../mod/sensor/sensor.c **** 
1074:../../../mod/sensor/sensor.c **** 
1075:../../../mod/sensor/sensor.c **** /*------------------------------------------------------------------------------
1076:../../../mod/sensor/sensor.c ****  Internal procedures 
1077:../../../mod/sensor/sensor.c **** ------------------------------------------------------------------------------*/
1078:../../../mod/sensor/sensor.c **** 
1079:../../../mod/sensor/sensor.c **** /*******************************************************************************
1080:../../../mod/sensor/sensor.c **** *                                                                              *
1081:../../../mod/sensor/sensor.c **** * PROCEDURE:                                                                   *
1082:../../../mod/sensor/sensor.c **** * 		sensor_map                                                             *
1083:../../../mod/sensor/sensor.c **** *                                                                              *
1084:../../../mod/sensor/sensor.c **** * DESCRIPTION:                                                                 *
1085:../../../mod/sensor/sensor.c **** *       Sensor ID to size and pointer mapping                                  *
1086:../../../mod/sensor/sensor.c **** *                                                                              *
1087:../../../mod/sensor/sensor.c **** *******************************************************************************/
1088:../../../mod/sensor/sensor.c **** void static sensor_map
1089:../../../mod/sensor/sensor.c **** 	(
1090:../../../mod/sensor/sensor.c **** 	SENSOR_DATA* sensor_data_ptr, /* In:  Base pointer to sensor data   */
1091:../../../mod/sensor/sensor.c **** 	SENSOR_ID    sensor_id      , /* In:  Sensor id                    */
1092:../../../mod/sensor/sensor.c **** 	uint8_t**    sensorid_pptr  , /* Out: Pointer to sensor readout in 
1093:../../../mod/sensor/sensor.c **** 	                                      sensor_data_ptr              */
1094:../../../mod/sensor/sensor.c **** 	size_t*      sensor_size_ptr  /* Out: Size of readout in bytes     */
1095:../../../mod/sensor/sensor.c **** 	)
1096:../../../mod/sensor/sensor.c **** {
  28              		.loc 1 1096 1 view -0
  29              		.cfi_startproc
  30              		@ args = 0, pretend = 0, frame = 0
  31              		@ frame_needed = 0, uses_anonymous_args = 0
  32              		@ link register save eliminated.
  33              		.loc 1 1096 1 is_stmt 0 view .LVU1
  34 0000 30B4     		push	{r4, r5}
  35              	.LCFI0:
  36              		.cfi_def_cfa_offset 8
  37              		.cfi_offset 4, -8
  38              		.cfi_offset 5, -4
1097:../../../mod/sensor/sensor.c **** /* Lookup sensor offset and size from table */
1098:../../../mod/sensor/sensor.c **** *sensor_size_ptr = sensor_size_offsets_table[ sensor_id ].size;
  39              		.loc 1 1098 1 is_stmt 1 view .LVU2
  40              		.loc 1 1098 58 is_stmt 0 view .LVU3
  41 0002 064C     		ldr	r4, .L3
  42 0004 04EBC10C 		add	ip, r4, r1, lsl #3
  43 0008 DCF80450 		ldr	r5, [ip, #4]
ARM GAS  C:\Users\tnguy\AppData\Local\Temp\cchyHwKV.s 			page 21


  44 000c 1D60     		str	r5, [r3]
1099:../../../mod/sensor/sensor.c **** *sensorid_pptr   = ( (uint8_t*) sensor_data_ptr ) + 
  45              		.loc 1 1099 1 is_stmt 1 view .LVU4
1100:../../../mod/sensor/sensor.c ****                    sensor_size_offsets_table[ sensor_id ].offset;
  46              		.loc 1 1100 58 is_stmt 0 view .LVU5
  47 000e 14F83130 		ldrb	r3, [r4, r1, lsl #3]	@ zero_extendqisi2
  48              	.LVL1:
1099:../../../mod/sensor/sensor.c **** *sensorid_pptr   = ( (uint8_t*) sensor_data_ptr ) + 
  49              		.loc 1 1099 51 view .LVU6
  50 0012 1844     		add	r0, r0, r3
  51              	.LVL2:
1099:../../../mod/sensor/sensor.c **** *sensorid_pptr   = ( (uint8_t*) sensor_data_ptr ) + 
  52              		.loc 1 1099 18 view .LVU7
  53 0014 1060     		str	r0, [r2]
1101:../../../mod/sensor/sensor.c **** 
1102:../../../mod/sensor/sensor.c **** } /*  sensor_map */
  54              		.loc 1 1102 1 view .LVU8
  55 0016 30BC     		pop	{r4, r5}
  56              	.LCFI1:
  57              		.cfi_restore 5
  58              		.cfi_restore 4
  59              		.cfi_def_cfa_offset 0
  60 0018 7047     		bx	lr
  61              	.L4:
  62 001a 00BF     		.align	2
  63              	.L3:
  64 001c 00000000 		.word	.LANCHOR0
  65              		.cfi_endproc
  66              	.LFE148:
  68              		.section	.text.extract_sensor_bytes,"ax",%progbits
  69              		.align	1
  70              		.syntax unified
  71              		.thumb
  72              		.thumb_func
  74              	extract_sensor_bytes:
  75              	.LVL3:
  76              	.LFB149:
1103:../../../mod/sensor/sensor.c **** 
1104:../../../mod/sensor/sensor.c **** 
1105:../../../mod/sensor/sensor.c **** /*******************************************************************************
1106:../../../mod/sensor/sensor.c **** *                                                                              *
1107:../../../mod/sensor/sensor.c **** * PROCEDURE:                                                                   *
1108:../../../mod/sensor/sensor.c **** * 		extract_sensor_bytes                                                   *
1109:../../../mod/sensor/sensor.c **** *                                                                              *
1110:../../../mod/sensor/sensor.c **** * DESCRIPTION:                                                                 *
1111:../../../mod/sensor/sensor.c **** *       Extract bytes for export from SENSOR_ID struct                         *
1112:../../../mod/sensor/sensor.c **** *                                                                              *
1113:../../../mod/sensor/sensor.c **** *******************************************************************************/
1114:../../../mod/sensor/sensor.c **** void static extract_sensor_bytes 
1115:../../../mod/sensor/sensor.c **** 	(
1116:../../../mod/sensor/sensor.c **** 	SENSOR_DATA* sensor_data_ptr      , /* In:  Sensor data in struct         */
1117:../../../mod/sensor/sensor.c **** 	SENSOR_ID*   sensor_ids_ptr       , /* In:  Sensor ids                    */
1118:../../../mod/sensor/sensor.c **** 	uint8_t      num_sensors          , /* In:  Number of sensors polled      */
1119:../../../mod/sensor/sensor.c **** 	uint8_t*     sensor_data_bytes_ptr, /* Out: Sensor data in bytes          */
1120:../../../mod/sensor/sensor.c **** 	uint8_t*     num_sensor_bytes       /* Out: Size of output data           */
1121:../../../mod/sensor/sensor.c **** 	)
1122:../../../mod/sensor/sensor.c **** {
ARM GAS  C:\Users\tnguy\AppData\Local\Temp\cchyHwKV.s 			page 22


  77              		.loc 1 1122 1 is_stmt 1 view -0
  78              		.cfi_startproc
  79              		@ args = 4, pretend = 0, frame = 8
  80              		@ frame_needed = 0, uses_anonymous_args = 0
  81              		.loc 1 1122 1 is_stmt 0 view .LVU10
  82 0000 2DE9F047 		push	{r4, r5, r6, r7, r8, r9, r10, lr}
  83              	.LCFI2:
  84              		.cfi_def_cfa_offset 32
  85              		.cfi_offset 4, -32
  86              		.cfi_offset 5, -28
  87              		.cfi_offset 6, -24
  88              		.cfi_offset 7, -20
  89              		.cfi_offset 8, -16
  90              		.cfi_offset 9, -12
  91              		.cfi_offset 10, -8
  92              		.cfi_offset 14, -4
  93 0004 82B0     		sub	sp, sp, #8
  94              	.LCFI3:
  95              		.cfi_def_cfa_offset 40
  96 0006 8246     		mov	r10, r0
  97 0008 0F46     		mov	r7, r1
  98 000a 1646     		mov	r6, r2
  99 000c 1D46     		mov	r5, r3
 100 000e DDF82880 		ldr	r8, [sp, #40]
1123:../../../mod/sensor/sensor.c **** /*------------------------------------------------------------------------------
1124:../../../mod/sensor/sensor.c ****  Local Variables  
1125:../../../mod/sensor/sensor.c **** ------------------------------------------------------------------------------*/
1126:../../../mod/sensor/sensor.c **** uint8_t*   output_ptr;    /* Pointer to data export output                    */
 101              		.loc 1 1126 1 is_stmt 1 view .LVU11
1127:../../../mod/sensor/sensor.c **** uint8_t*   input_ptr;     /* Pointer to data within SENSOR_ID struct          */
 102              		.loc 1 1127 1 view .LVU12
1128:../../../mod/sensor/sensor.c **** size_t     sensor_size;   /* Size in bytes of current sensor readout          */
 103              		.loc 1 1128 1 view .LVU13
1129:../../../mod/sensor/sensor.c **** SENSOR_ID  sensor_id;     /* Current Sensor ID                                */
 104              		.loc 1 1129 1 view .LVU14
1130:../../../mod/sensor/sensor.c **** SENSOR_ID* sensor_id_ptr; /* Pointer to current sensor ID                     */
 105              		.loc 1 1130 1 view .LVU15
1131:../../../mod/sensor/sensor.c **** 
1132:../../../mod/sensor/sensor.c **** 
1133:../../../mod/sensor/sensor.c **** /*------------------------------------------------------------------------------
1134:../../../mod/sensor/sensor.c ****  Initializations  
1135:../../../mod/sensor/sensor.c **** ------------------------------------------------------------------------------*/
1136:../../../mod/sensor/sensor.c **** output_ptr        = sensor_data_bytes_ptr;
 106              		.loc 1 1136 1 view .LVU16
 107              	.LVL4:
1137:../../../mod/sensor/sensor.c **** sensor_id_ptr     = sensor_ids_ptr;
 108              		.loc 1 1137 1 view .LVU17
1138:../../../mod/sensor/sensor.c **** sensor_id         = *(sensor_id_ptr);
 109              		.loc 1 1138 1 view .LVU18
 110              		.loc 1 1138 19 is_stmt 0 view .LVU19
 111 0012 91F80090 		ldrb	r9, [r1]	@ zero_extendqisi2
 112              	.LVL5:
1139:../../../mod/sensor/sensor.c **** *num_sensor_bytes = 0;
 113              		.loc 1 1139 1 is_stmt 1 view .LVU20
 114              		.loc 1 1139 19 is_stmt 0 view .LVU21
 115 0016 0024     		movs	r4, #0
 116 0018 88F80040 		strb	r4, [r8]
ARM GAS  C:\Users\tnguy\AppData\Local\Temp\cchyHwKV.s 			page 23


1140:../../../mod/sensor/sensor.c **** 
1141:../../../mod/sensor/sensor.c **** 
1142:../../../mod/sensor/sensor.c **** /*------------------------------------------------------------------------------
1143:../../../mod/sensor/sensor.c ****  Implementation 
1144:../../../mod/sensor/sensor.c **** ------------------------------------------------------------------------------*/
1145:../../../mod/sensor/sensor.c **** for ( uint8_t i = 0; i < num_sensors; ++i )
 117              		.loc 1 1145 1 is_stmt 1 view .LVU22
 118              	.LBB2:
 119              		.loc 1 1145 7 view .LVU23
 120              	.LVL6:
 121              		.loc 1 1145 1 is_stmt 0 view .LVU24
 122 001c 01E0     		b	.L6
 123              	.LVL7:
 124              	.L7:
 125              		.loc 1 1145 39 is_stmt 1 discriminator 2 view .LVU25
 126 001e 0134     		adds	r4, r4, #1
 127              	.LVL8:
 128              		.loc 1 1145 39 is_stmt 0 discriminator 2 view .LVU26
 129 0020 E4B2     		uxtb	r4, r4
 130              	.LVL9:
 131              	.L6:
 132              		.loc 1 1145 22 is_stmt 1 discriminator 1 view .LVU27
 133              		.loc 1 1145 1 is_stmt 0 discriminator 1 view .LVU28
 134 0022 B442     		cmp	r4, r6
 135 0024 1AD2     		bcs	.L10
1146:../../../mod/sensor/sensor.c **** 	{
1147:../../../mod/sensor/sensor.c **** 	/* Get position info of sensor readout */
1148:../../../mod/sensor/sensor.c **** 	sensor_map( sensor_data_ptr, 
 136              		.loc 1 1148 2 is_stmt 1 view .LVU29
 137 0026 6B46     		mov	r3, sp
 138 0028 01AA     		add	r2, sp, #4
 139 002a 4946     		mov	r1, r9
 140 002c 5046     		mov	r0, r10
 141 002e FFF7FEFF 		bl	sensor_map
 142              	.LVL10:
1149:../../../mod/sensor/sensor.c **** 	            sensor_id      ,
1150:../../../mod/sensor/sensor.c **** 				&input_ptr      ,
1151:../../../mod/sensor/sensor.c **** 				&sensor_size );
1152:../../../mod/sensor/sensor.c **** 
1153:../../../mod/sensor/sensor.c **** 	/* Copy data into output buffer */
1154:../../../mod/sensor/sensor.c **** 	memcpy( output_ptr, input_ptr, sensor_size );
 143              		.loc 1 1154 2 view .LVU30
 144 0032 009A     		ldr	r2, [sp]
 145 0034 0199     		ldr	r1, [sp, #4]
 146 0036 2846     		mov	r0, r5
 147 0038 FFF7FEFF 		bl	memcpy
 148              	.LVL11:
1155:../../../mod/sensor/sensor.c **** 
1156:../../../mod/sensor/sensor.c **** 	/* Update size of output */
1157:../../../mod/sensor/sensor.c **** 	*num_sensor_bytes += (uint8_t) sensor_size;
 149              		.loc 1 1157 2 view .LVU31
 150              		.loc 1 1157 23 is_stmt 0 view .LVU32
 151 003c 9DF800C0 		ldrb	ip, [sp]	@ zero_extendqisi2
 152              		.loc 1 1157 20 view .LVU33
 153 0040 98F80030 		ldrb	r3, [r8]	@ zero_extendqisi2
 154 0044 9C44     		add	ip, ip, r3
 155 0046 88F800C0 		strb	ip, [r8]
ARM GAS  C:\Users\tnguy\AppData\Local\Temp\cchyHwKV.s 			page 24


1158:../../../mod/sensor/sensor.c **** 
1159:../../../mod/sensor/sensor.c **** 	/* Go to next sensor */ 
1160:../../../mod/sensor/sensor.c **** 	if ( i != ( num_sensors-1) )
 156              		.loc 1 1160 2 is_stmt 1 view .LVU34
 157              		.loc 1 1160 25 is_stmt 0 view .LVU35
 158 004a 731E     		subs	r3, r6, #1
 159              		.loc 1 1160 5 view .LVU36
 160 004c 9C42     		cmp	r4, r3
 161 004e E6D0     		beq	.L7
1161:../../../mod/sensor/sensor.c **** 		{
1162:../../../mod/sensor/sensor.c **** 		sensor_id_ptr++;
 162              		.loc 1 1162 3 is_stmt 1 view .LVU37
 163              	.LVL12:
1163:../../../mod/sensor/sensor.c **** 		sensor_id = *(sensor_id_ptr);
 164              		.loc 1 1163 3 view .LVU38
 165              		.loc 1 1163 13 is_stmt 0 view .LVU39
 166 0050 97F80190 		ldrb	r9, [r7, #1]	@ zero_extendqisi2
 167              	.LVL13:
1164:../../../mod/sensor/sensor.c **** 		output_ptr += sensor_size;
 168              		.loc 1 1164 3 is_stmt 1 view .LVU40
 169              		.loc 1 1164 14 is_stmt 0 view .LVU41
 170 0054 009B     		ldr	r3, [sp]
 171 0056 1D44     		add	r5, r5, r3
 172              	.LVL14:
1162:../../../mod/sensor/sensor.c **** 		sensor_id = *(sensor_id_ptr);
 173              		.loc 1 1162 16 view .LVU42
 174 0058 0137     		adds	r7, r7, #1
 175              	.LVL15:
1162:../../../mod/sensor/sensor.c **** 		sensor_id = *(sensor_id_ptr);
 176              		.loc 1 1162 16 view .LVU43
 177 005a E0E7     		b	.L7
 178              	.L10:
1162:../../../mod/sensor/sensor.c **** 		sensor_id = *(sensor_id_ptr);
 179              		.loc 1 1162 16 view .LVU44
 180              	.LBE2:
1165:../../../mod/sensor/sensor.c **** 		}
1166:../../../mod/sensor/sensor.c **** 	}
1167:../../../mod/sensor/sensor.c **** 
1168:../../../mod/sensor/sensor.c **** } /* extract_sensor_bytes */
 181              		.loc 1 1168 1 view .LVU45
 182 005c 02B0     		add	sp, sp, #8
 183              	.LCFI4:
 184              		.cfi_def_cfa_offset 32
 185              		@ sp needed
 186 005e BDE8F087 		pop	{r4, r5, r6, r7, r8, r9, r10, pc}
 187              		.loc 1 1168 1 view .LVU46
 188              		.cfi_endproc
 189              	.LFE149:
 191              		.section	.text.sensor_init,"ax",%progbits
 192              		.align	1
 193              		.global	sensor_init
 194              		.syntax unified
 195              		.thumb
 196              		.thumb_func
 198              	sensor_init:
 199              	.LFB144:
 105:../../../mod/sensor/sensor.c **** /* Setup the sensor id hash table */
ARM GAS  C:\Users\tnguy\AppData\Local\Temp\cchyHwKV.s 			page 25


 200              		.loc 1 105 1 is_stmt 1 view -0
 201              		.cfi_startproc
 202              		@ args = 0, pretend = 0, frame = 0
 203              		@ frame_needed = 0, uses_anonymous_args = 0
 204              		@ link register save eliminated.
 109:../../../mod/sensor/sensor.c **** 	sensor_size_offsets_table[ 1  ].offset = 2;  /* SENSOR_ACCY  */
 205              		.loc 1 109 2 view .LVU48
 109:../../../mod/sensor/sensor.c **** 	sensor_size_offsets_table[ 1  ].offset = 2;  /* SENSOR_ACCY  */
 206              		.loc 1 109 41 is_stmt 0 view .LVU49
 207 0000 164B     		ldr	r3, .L12
 208 0002 0022     		movs	r2, #0
 209 0004 1A70     		strb	r2, [r3]
 110:../../../mod/sensor/sensor.c **** 	sensor_size_offsets_table[ 2  ].offset = 4;  /* SENSOR_ACCZ  */
 210              		.loc 1 110 2 is_stmt 1 view .LVU50
 110:../../../mod/sensor/sensor.c **** 	sensor_size_offsets_table[ 2  ].offset = 4;  /* SENSOR_ACCZ  */
 211              		.loc 1 110 41 is_stmt 0 view .LVU51
 212 0006 0222     		movs	r2, #2
 213 0008 1A72     		strb	r2, [r3, #8]
 111:../../../mod/sensor/sensor.c **** 	sensor_size_offsets_table[ 3  ].offset = 6;  /* SENSOR_GYROX */
 214              		.loc 1 111 2 is_stmt 1 view .LVU52
 111:../../../mod/sensor/sensor.c **** 	sensor_size_offsets_table[ 3  ].offset = 6;  /* SENSOR_GYROX */
 215              		.loc 1 111 41 is_stmt 0 view .LVU53
 216 000a 0421     		movs	r1, #4
 217 000c 1974     		strb	r1, [r3, #16]
 112:../../../mod/sensor/sensor.c **** 	sensor_size_offsets_table[ 4  ].offset = 8;  /* SENSOR_GYROY */
 218              		.loc 1 112 2 is_stmt 1 view .LVU54
 112:../../../mod/sensor/sensor.c **** 	sensor_size_offsets_table[ 4  ].offset = 8;  /* SENSOR_GYROY */
 219              		.loc 1 112 41 is_stmt 0 view .LVU55
 220 000e 0620     		movs	r0, #6
 221 0010 1876     		strb	r0, [r3, #24]
 113:../../../mod/sensor/sensor.c **** 	sensor_size_offsets_table[ 5  ].offset = 10; /* SENSOR_GYROZ */
 222              		.loc 1 113 2 is_stmt 1 view .LVU56
 113:../../../mod/sensor/sensor.c **** 	sensor_size_offsets_table[ 5  ].offset = 10; /* SENSOR_GYROZ */
 223              		.loc 1 113 41 is_stmt 0 view .LVU57
 224 0012 0820     		movs	r0, #8
 225 0014 83F82000 		strb	r0, [r3, #32]
 114:../../../mod/sensor/sensor.c **** 	sensor_size_offsets_table[ 6  ].offset = 12; /* SENSOR_MAGX  */
 226              		.loc 1 114 2 is_stmt 1 view .LVU58
 114:../../../mod/sensor/sensor.c **** 	sensor_size_offsets_table[ 6  ].offset = 12; /* SENSOR_MAGX  */
 227              		.loc 1 114 41 is_stmt 0 view .LVU59
 228 0018 0A20     		movs	r0, #10
 229 001a 83F82800 		strb	r0, [r3, #40]
 115:../../../mod/sensor/sensor.c **** 	sensor_size_offsets_table[ 7  ].offset = 14; /* SENSOR_MAGY  */
 230              		.loc 1 115 2 is_stmt 1 view .LVU60
 115:../../../mod/sensor/sensor.c **** 	sensor_size_offsets_table[ 7  ].offset = 14; /* SENSOR_MAGY  */
 231              		.loc 1 115 41 is_stmt 0 view .LVU61
 232 001e 0C20     		movs	r0, #12
 233 0020 83F83000 		strb	r0, [r3, #48]
 116:../../../mod/sensor/sensor.c **** 	sensor_size_offsets_table[ 8  ].offset = 16; /* SENSOR_MAGZ  */
 234              		.loc 1 116 2 is_stmt 1 view .LVU62
 116:../../../mod/sensor/sensor.c **** 	sensor_size_offsets_table[ 8  ].offset = 16; /* SENSOR_MAGZ  */
 235              		.loc 1 116 41 is_stmt 0 view .LVU63
 236 0024 0E20     		movs	r0, #14
 237 0026 83F83800 		strb	r0, [r3, #56]
 117:../../../mod/sensor/sensor.c **** 	sensor_size_offsets_table[ 9  ].offset = 18; /* SENSOR_IMUT  */
 238              		.loc 1 117 2 is_stmt 1 view .LVU64
 117:../../../mod/sensor/sensor.c **** 	sensor_size_offsets_table[ 9  ].offset = 18; /* SENSOR_IMUT  */
ARM GAS  C:\Users\tnguy\AppData\Local\Temp\cchyHwKV.s 			page 26


 239              		.loc 1 117 41 is_stmt 0 view .LVU65
 240 002a 1020     		movs	r0, #16
 241 002c 83F84000 		strb	r0, [r3, #64]
 118:../../../mod/sensor/sensor.c **** 	sensor_size_offsets_table[ 10 ].offset = 20; /* SENSOR_PRES  */
 242              		.loc 1 118 2 is_stmt 1 view .LVU66
 118:../../../mod/sensor/sensor.c **** 	sensor_size_offsets_table[ 10 ].offset = 20; /* SENSOR_PRES  */
 243              		.loc 1 118 41 is_stmt 0 view .LVU67
 244 0030 1220     		movs	r0, #18
 245 0032 83F84800 		strb	r0, [r3, #72]
 119:../../../mod/sensor/sensor.c **** 	sensor_size_offsets_table[ 11 ].offset = 24; /* SENSOR_TEMP  */
 246              		.loc 1 119 2 is_stmt 1 view .LVU68
 119:../../../mod/sensor/sensor.c **** 	sensor_size_offsets_table[ 11 ].offset = 24; /* SENSOR_TEMP  */
 247              		.loc 1 119 41 is_stmt 0 view .LVU69
 248 0036 1420     		movs	r0, #20
 249 0038 83F85000 		strb	r0, [r3, #80]
 120:../../../mod/sensor/sensor.c **** 
 250              		.loc 1 120 2 is_stmt 1 view .LVU70
 120:../../../mod/sensor/sensor.c **** 
 251              		.loc 1 120 41 is_stmt 0 view .LVU71
 252 003c 1820     		movs	r0, #24
 253 003e 83F85800 		strb	r0, [r3, #88]
 123:../../../mod/sensor/sensor.c **** 	sensor_size_offsets_table[ 1  ].size   = 2;  /* SENSOR_ACCY  */
 254              		.loc 1 123 2 is_stmt 1 view .LVU72
 123:../../../mod/sensor/sensor.c **** 	sensor_size_offsets_table[ 1  ].size   = 2;  /* SENSOR_ACCY  */
 255              		.loc 1 123 41 is_stmt 0 view .LVU73
 256 0042 5A60     		str	r2, [r3, #4]
 124:../../../mod/sensor/sensor.c **** 	sensor_size_offsets_table[ 2  ].size   = 2;  /* SENSOR_ACCZ  */
 257              		.loc 1 124 2 is_stmt 1 view .LVU74
 124:../../../mod/sensor/sensor.c **** 	sensor_size_offsets_table[ 2  ].size   = 2;  /* SENSOR_ACCZ  */
 258              		.loc 1 124 41 is_stmt 0 view .LVU75
 259 0044 DA60     		str	r2, [r3, #12]
 125:../../../mod/sensor/sensor.c **** 	sensor_size_offsets_table[ 3  ].size   = 2;  /* SENSOR_GYROX */
 260              		.loc 1 125 2 is_stmt 1 view .LVU76
 125:../../../mod/sensor/sensor.c **** 	sensor_size_offsets_table[ 3  ].size   = 2;  /* SENSOR_GYROX */
 261              		.loc 1 125 41 is_stmt 0 view .LVU77
 262 0046 5A61     		str	r2, [r3, #20]
 126:../../../mod/sensor/sensor.c **** 	sensor_size_offsets_table[ 4  ].size   = 2;  /* SENSOR_GYROY */
 263              		.loc 1 126 2 is_stmt 1 view .LVU78
 126:../../../mod/sensor/sensor.c **** 	sensor_size_offsets_table[ 4  ].size   = 2;  /* SENSOR_GYROY */
 264              		.loc 1 126 41 is_stmt 0 view .LVU79
 265 0048 DA61     		str	r2, [r3, #28]
 127:../../../mod/sensor/sensor.c **** 	sensor_size_offsets_table[ 5  ].size   = 2;  /* SENSOR_GYROZ */
 266              		.loc 1 127 2 is_stmt 1 view .LVU80
 127:../../../mod/sensor/sensor.c **** 	sensor_size_offsets_table[ 5  ].size   = 2;  /* SENSOR_GYROZ */
 267              		.loc 1 127 41 is_stmt 0 view .LVU81
 268 004a 5A62     		str	r2, [r3, #36]
 128:../../../mod/sensor/sensor.c **** 	sensor_size_offsets_table[ 6  ].size   = 2;  /* SENSOR_MAGX  */
 269              		.loc 1 128 2 is_stmt 1 view .LVU82
 128:../../../mod/sensor/sensor.c **** 	sensor_size_offsets_table[ 6  ].size   = 2;  /* SENSOR_MAGX  */
 270              		.loc 1 128 41 is_stmt 0 view .LVU83
 271 004c DA62     		str	r2, [r3, #44]
 129:../../../mod/sensor/sensor.c **** 	sensor_size_offsets_table[ 7  ].size   = 2;  /* SENSOR_MAGY  */
 272              		.loc 1 129 2 is_stmt 1 view .LVU84
 129:../../../mod/sensor/sensor.c **** 	sensor_size_offsets_table[ 7  ].size   = 2;  /* SENSOR_MAGY  */
 273              		.loc 1 129 41 is_stmt 0 view .LVU85
 274 004e 5A63     		str	r2, [r3, #52]
 130:../../../mod/sensor/sensor.c **** 	sensor_size_offsets_table[ 8  ].size   = 2;  /* SENSOR_MAGZ  */
ARM GAS  C:\Users\tnguy\AppData\Local\Temp\cchyHwKV.s 			page 27


 275              		.loc 1 130 2 is_stmt 1 view .LVU86
 130:../../../mod/sensor/sensor.c **** 	sensor_size_offsets_table[ 8  ].size   = 2;  /* SENSOR_MAGZ  */
 276              		.loc 1 130 41 is_stmt 0 view .LVU87
 277 0050 DA63     		str	r2, [r3, #60]
 131:../../../mod/sensor/sensor.c **** 	sensor_size_offsets_table[ 9  ].size   = 2;  /* SENSOR_IMUT  */
 278              		.loc 1 131 2 is_stmt 1 view .LVU88
 131:../../../mod/sensor/sensor.c **** 	sensor_size_offsets_table[ 9  ].size   = 2;  /* SENSOR_IMUT  */
 279              		.loc 1 131 41 is_stmt 0 view .LVU89
 280 0052 5A64     		str	r2, [r3, #68]
 132:../../../mod/sensor/sensor.c **** 	sensor_size_offsets_table[ 10 ].size   = 4;  /* SENSOR_PRES  */
 281              		.loc 1 132 2 is_stmt 1 view .LVU90
 132:../../../mod/sensor/sensor.c **** 	sensor_size_offsets_table[ 10 ].size   = 4;  /* SENSOR_PRES  */
 282              		.loc 1 132 41 is_stmt 0 view .LVU91
 283 0054 DA64     		str	r2, [r3, #76]
 133:../../../mod/sensor/sensor.c **** 	sensor_size_offsets_table[ 11 ].size   = 4;  /* SENSOR_TEMP  */
 284              		.loc 1 133 2 is_stmt 1 view .LVU92
 133:../../../mod/sensor/sensor.c **** 	sensor_size_offsets_table[ 11 ].size   = 4;  /* SENSOR_TEMP  */
 285              		.loc 1 133 41 is_stmt 0 view .LVU93
 286 0056 5965     		str	r1, [r3, #84]
 134:../../../mod/sensor/sensor.c **** #elif defined( ENGINE_CONTROLLER )
 287              		.loc 1 134 2 is_stmt 1 view .LVU94
 134:../../../mod/sensor/sensor.c **** #elif defined( ENGINE_CONTROLLER )
 288              		.loc 1 134 41 is_stmt 0 view .LVU95
 289 0058 D965     		str	r1, [r3, #92]
 177:../../../mod/sensor/sensor.c **** 
 290              		.loc 1 177 1 view .LVU96
 291 005a 7047     		bx	lr
 292              	.L13:
 293              		.align	2
 294              	.L12:
 295 005c 00000000 		.word	.LANCHOR0
 296              		.cfi_endproc
 297              	.LFE144:
 299              		.section	.text.sensor_dump,"ax",%progbits
 300              		.align	1
 301              		.global	sensor_dump
 302              		.syntax unified
 303              		.thumb
 304              		.thumb_func
 306              	sensor_dump:
 307              	.LVL16:
 308              	.LFB146:
 558:../../../mod/sensor/sensor.c **** /*------------------------------------------------------------------------------
 309              		.loc 1 558 1 is_stmt 1 view -0
 310              		.cfi_startproc
 311              		@ args = 0, pretend = 0, frame = 0
 312              		@ frame_needed = 0, uses_anonymous_args = 0
 558:../../../mod/sensor/sensor.c **** /*------------------------------------------------------------------------------
 313              		.loc 1 558 1 is_stmt 0 view .LVU98
 314 0000 2DE9F041 		push	{r4, r5, r6, r7, r8, lr}
 315              	.LCFI5:
 316              		.cfi_def_cfa_offset 24
 317              		.cfi_offset 4, -24
 318              		.cfi_offset 5, -20
 319              		.cfi_offset 6, -16
 320              		.cfi_offset 7, -12
 321              		.cfi_offset 8, -8
ARM GAS  C:\Users\tnguy\AppData\Local\Temp\cchyHwKV.s 			page 28


 322              		.cfi_offset 14, -4
 323 0004 0446     		mov	r4, r0
 563:../../../mod/sensor/sensor.c **** 	IMU_STATUS      gyro_status;
 324              		.loc 1 563 2 is_stmt 1 view .LVU99
 564:../../../mod/sensor/sensor.c **** 	IMU_STATUS      mag_status; 
 325              		.loc 1 564 2 view .LVU100
 565:../../../mod/sensor/sensor.c **** 	BARO_STATUS     press_status;           /* Baro Sensor status codes    */
 326              		.loc 1 565 2 view .LVU101
 566:../../../mod/sensor/sensor.c **** 	BARO_STATUS     temp_status;
 327              		.loc 1 566 2 view .LVU102
 567:../../../mod/sensor/sensor.c **** #elif defined( ENGINE_CONTROLLER    )
 328              		.loc 1 567 2 view .LVU103
 581:../../../mod/sensor/sensor.c **** 	gyro_status  = IMU_OK;
 329              		.loc 1 581 2 view .LVU104
 330              	.LVL17:
 582:../../../mod/sensor/sensor.c **** 	mag_status   = IMU_OK; 
 331              		.loc 1 582 2 view .LVU105
 583:../../../mod/sensor/sensor.c **** 	press_status = BARO_OK;           
 332              		.loc 1 583 2 view .LVU106
 584:../../../mod/sensor/sensor.c **** 	temp_status  = BARO_OK;
 333              		.loc 1 584 2 view .LVU107
 585:../../../mod/sensor/sensor.c **** #elif defined( ENGINE_CONTROLLER    )
 334              		.loc 1 585 2 view .LVU108
 601:../../../mod/sensor/sensor.c **** 	gyro_status  = imu_get_gyro_xyz ( &(sensor_data_ptr->imu_data) );
 335              		.loc 1 601 2 view .LVU109
 601:../../../mod/sensor/sensor.c **** 	gyro_status  = imu_get_gyro_xyz ( &(sensor_data_ptr->imu_data) );
 336              		.loc 1 601 17 is_stmt 0 view .LVU110
 337 0006 FFF7FEFF 		bl	imu_get_accel_xyz
 338              	.LVL18:
 601:../../../mod/sensor/sensor.c **** 	gyro_status  = imu_get_gyro_xyz ( &(sensor_data_ptr->imu_data) );
 339              		.loc 1 601 17 view .LVU111
 340 000a 0646     		mov	r6, r0
 341              	.LVL19:
 602:../../../mod/sensor/sensor.c **** 	mag_status   = imu_get_mag_xyz  ( &(sensor_data_ptr->imu_data) );
 342              		.loc 1 602 2 is_stmt 1 view .LVU112
 602:../../../mod/sensor/sensor.c **** 	mag_status   = imu_get_mag_xyz  ( &(sensor_data_ptr->imu_data) );
 343              		.loc 1 602 17 is_stmt 0 view .LVU113
 344 000c 2046     		mov	r0, r4
 345 000e FFF7FEFF 		bl	imu_get_gyro_xyz
 346              	.LVL20:
 347 0012 0746     		mov	r7, r0
 348              	.LVL21:
 603:../../../mod/sensor/sensor.c **** 	sensor_data_ptr -> imu_data.temp = 0;     // Figure out what to do with this 
 349              		.loc 1 603 2 is_stmt 1 view .LVU114
 603:../../../mod/sensor/sensor.c **** 	sensor_data_ptr -> imu_data.temp = 0;     // Figure out what to do with this 
 350              		.loc 1 603 17 is_stmt 0 view .LVU115
 351 0014 2046     		mov	r0, r4
 352 0016 FFF7FEFF 		bl	imu_get_mag_xyz
 353              	.LVL22:
 354 001a 8046     		mov	r8, r0
 355              	.LVL23:
 604:../../../mod/sensor/sensor.c **** 											  // readout, temporarily being used 
 356              		.loc 1 604 2 is_stmt 1 view .LVU116
 604:../../../mod/sensor/sensor.c **** 											  // readout, temporarily being used 
 357              		.loc 1 604 35 is_stmt 0 view .LVU117
 358 001c 0023     		movs	r3, #0
 359 001e 6382     		strh	r3, [r4, #18]	@ movhi
ARM GAS  C:\Users\tnguy\AppData\Local\Temp\cchyHwKV.s 			page 29


 609:../../../mod/sensor/sensor.c **** 	press_status = baro_get_pressure( &(sensor_data_ptr -> baro_pressure ) );
 360              		.loc 1 609 2 is_stmt 1 view .LVU118
 609:../../../mod/sensor/sensor.c **** 	press_status = baro_get_pressure( &(sensor_data_ptr -> baro_pressure ) );
 361              		.loc 1 609 17 is_stmt 0 view .LVU119
 362 0020 04F11800 		add	r0, r4, #24
 363 0024 FFF7FEFF 		bl	baro_get_temp
 364              	.LVL24:
 365 0028 0546     		mov	r5, r0
 366              	.LVL25:
 610:../../../mod/sensor/sensor.c **** 
 367              		.loc 1 610 2 is_stmt 1 view .LVU120
 610:../../../mod/sensor/sensor.c **** 
 368              		.loc 1 610 17 is_stmt 0 view .LVU121
 369 002a 04F11400 		add	r0, r4, #20
 370 002e FFF7FEFF 		bl	baro_get_pressure
 371              	.LVL26:
 638:../../../mod/sensor/sensor.c **** 		{
 372              		.loc 1 638 2 is_stmt 1 view .LVU122
 638:../../../mod/sensor/sensor.c **** 		{
 373              		.loc 1 638 10 is_stmt 0 view .LVU123
 374 0032 5EB9     		cbnz	r6, .L16
 642:../../../mod/sensor/sensor.c **** 		{
 375              		.loc 1 642 7 is_stmt 1 view .LVU124
 642:../../../mod/sensor/sensor.c **** 		{
 376              		.loc 1 642 10 is_stmt 0 view .LVU125
 377 0034 67B9     		cbnz	r7, .L17
 646:../../../mod/sensor/sensor.c **** 		{
 378              		.loc 1 646 7 is_stmt 1 view .LVU126
 646:../../../mod/sensor/sensor.c **** 		{
 379              		.loc 1 646 10 is_stmt 0 view .LVU127
 380 0036 B8F1000F 		cmp	r8, #0
 381 003a 0BD1     		bne	.L18
 650:../../../mod/sensor/sensor.c **** 			temp_status  != BARO_OK  )
 382              		.loc 1 650 7 is_stmt 1 view .LVU128
 383 003c 2843     		orrs	r0, r0, r5
 384              	.LVL27:
 650:../../../mod/sensor/sensor.c **** 			temp_status  != BARO_OK  )
 385              		.loc 1 650 10 is_stmt 0 view .LVU129
 386 003e 10F0FF00 		ands	r0, r0, #255
 387 0042 01D1     		bne	.L20
 388              	.L15:
 690:../../../mod/sensor/sensor.c **** 
 389              		.loc 1 690 1 view .LVU130
 390 0044 BDE8F081 		pop	{r4, r5, r6, r7, r8, pc}
 391              	.LVL28:
 392              	.L20:
 653:../../../mod/sensor/sensor.c **** 		}
 393              		.loc 1 653 10 view .LVU131
 394 0048 0A20     		movs	r0, #10
 395 004a FBE7     		b	.L15
 396              	.LVL29:
 397              	.L16:
 640:../../../mod/sensor/sensor.c **** 		}
 398              		.loc 1 640 10 view .LVU132
 399 004c 0720     		movs	r0, #7
 400              	.LVL30:
 640:../../../mod/sensor/sensor.c **** 		}
ARM GAS  C:\Users\tnguy\AppData\Local\Temp\cchyHwKV.s 			page 30


 401              		.loc 1 640 10 view .LVU133
 402 004e F9E7     		b	.L15
 403              	.LVL31:
 404              	.L17:
 644:../../../mod/sensor/sensor.c **** 		}
 405              		.loc 1 644 10 view .LVU134
 406 0050 0820     		movs	r0, #8
 407              	.LVL32:
 644:../../../mod/sensor/sensor.c **** 		}
 408              		.loc 1 644 10 view .LVU135
 409 0052 F7E7     		b	.L15
 410              	.LVL33:
 411              	.L18:
 648:../../../mod/sensor/sensor.c **** 		}
 412              		.loc 1 648 10 view .LVU136
 413 0054 0920     		movs	r0, #9
 414              	.LVL34:
 648:../../../mod/sensor/sensor.c **** 		}
 415              		.loc 1 648 10 view .LVU137
 416 0056 F5E7     		b	.L15
 417              		.cfi_endproc
 418              	.LFE146:
 420              		.section	.text.sensor_poll,"ax",%progbits
 421              		.align	1
 422              		.global	sensor_poll
 423              		.syntax unified
 424              		.thumb
 425              		.thumb_func
 427              	sensor_poll:
 428              	.LVL35:
 429              	.LFB147:
 708:../../../mod/sensor/sensor.c **** /*------------------------------------------------------------------------------
 430              		.loc 1 708 1 is_stmt 1 view -0
 431              		.cfi_startproc
 432              		@ args = 0, pretend = 0, frame = 0
 433              		@ frame_needed = 0, uses_anonymous_args = 0
 708:../../../mod/sensor/sensor.c **** /*------------------------------------------------------------------------------
 434              		.loc 1 708 1 is_stmt 0 view .LVU139
 435 0000 2DE9F84F 		push	{r3, r4, r5, r6, r7, r8, r9, r10, fp, lr}
 436              	.LCFI6:
 437              		.cfi_def_cfa_offset 40
 438              		.cfi_offset 3, -40
 439              		.cfi_offset 4, -36
 440              		.cfi_offset 5, -32
 441              		.cfi_offset 6, -28
 442              		.cfi_offset 7, -24
 443              		.cfi_offset 8, -20
 444              		.cfi_offset 9, -16
 445              		.cfi_offset 10, -12
 446              		.cfi_offset 11, -8
 447              		.cfi_offset 14, -4
 448 0004 8046     		mov	r8, r0
 449 0006 0E46     		mov	r6, r1
 450 0008 1746     		mov	r7, r2
 712:../../../mod/sensor/sensor.c **** SENSOR_ID* sensor_id_ptr;    /* Pointer to sensor id                */
 451              		.loc 1 712 1 is_stmt 1 view .LVU140
 713:../../../mod/sensor/sensor.c **** 
ARM GAS  C:\Users\tnguy\AppData\Local\Temp\cchyHwKV.s 			page 31


 452              		.loc 1 713 1 view .LVU141
 717:../../../mod/sensor/sensor.c **** 	BARO_STATUS     baro_status;     /* Baro module return codes  */
 453              		.loc 1 717 2 view .LVU142
 718:../../../mod/sensor/sensor.c **** #elif defined( ENGINE_CONTROLLER )
 454              		.loc 1 718 2 view .LVU143
 729:../../../mod/sensor/sensor.c **** 	bool imu_gyro_read;
 455              		.loc 1 729 2 view .LVU144
 730:../../../mod/sensor/sensor.c **** 	bool imu_mag_read;
 456              		.loc 1 730 2 view .LVU145
 731:../../../mod/sensor/sensor.c **** #endif
 457              		.loc 1 731 2 view .LVU146
 737:../../../mod/sensor/sensor.c **** sensor_id         = *(sensor_id_ptr   );
 458              		.loc 1 737 1 view .LVU147
 459              	.LVL36:
 738:../../../mod/sensor/sensor.c **** 
 460              		.loc 1 738 1 view .LVU148
 738:../../../mod/sensor/sensor.c **** 
 461              		.loc 1 738 19 is_stmt 0 view .LVU149
 462 000a 0D78     		ldrb	r5, [r1]	@ zero_extendqisi2
 463              	.LVL37:
 742:../../../mod/sensor/sensor.c **** 	baro_status   = BARO_OK;
 464              		.loc 1 742 2 is_stmt 1 view .LVU150
 743:../../../mod/sensor/sensor.c **** #elif defined( ENGINE_CONTROLLER )
 465              		.loc 1 743 2 view .LVU151
 754:../../../mod/sensor/sensor.c **** 	imu_gyro_read  = false;
 466              		.loc 1 754 2 view .LVU152
 755:../../../mod/sensor/sensor.c **** 	imu_mag_read   = false;
 467              		.loc 1 755 2 view .LVU153
 756:../../../mod/sensor/sensor.c **** #endif
 468              		.loc 1 756 2 view .LVU154
 765:../../../mod/sensor/sensor.c **** 	{
 469              		.loc 1 765 1 view .LVU155
 470              	.LBB3:
 765:../../../mod/sensor/sensor.c **** 	{
 471              		.loc 1 765 7 view .LVU156
 765:../../../mod/sensor/sensor.c **** 	{
 472              		.loc 1 765 11 is_stmt 0 view .LVU157
 473 000c 0024     		movs	r4, #0
 474              	.LBE3:
 756:../../../mod/sensor/sensor.c **** #endif
 475              		.loc 1 756 17 view .LVU158
 476 000e A346     		mov	fp, r4
 755:../../../mod/sensor/sensor.c **** 	imu_mag_read   = false;
 477              		.loc 1 755 17 view .LVU159
 478 0010 A246     		mov	r10, r4
 754:../../../mod/sensor/sensor.c **** 	imu_gyro_read  = false;
 479              		.loc 1 754 17 view .LVU160
 480 0012 A146     		mov	r9, r4
 481              	.LBB4:
 765:../../../mod/sensor/sensor.c **** 	{
 482              		.loc 1 765 1 view .LVU161
 483 0014 6BE0     		b	.L22
 484              	.LVL38:
 485              	.L36:
 774:../../../mod/sensor/sensor.c **** 					{
 486              		.loc 1 774 5 is_stmt 1 view .LVU162
 774:../../../mod/sensor/sensor.c **** 					{
ARM GAS  C:\Users\tnguy\AppData\Local\Temp\cchyHwKV.s 			page 32


 487              		.loc 1 774 8 is_stmt 0 view .LVU163
 488 0016 B9F1000F 		cmp	r9, #0
 489 001a 65D1     		bne	.L37
 776:../../../mod/sensor/sensor.c **** 					if ( imu_status != IMU_OK )
 490              		.loc 1 776 6 is_stmt 1 view .LVU164
 776:../../../mod/sensor/sensor.c **** 					if ( imu_status != IMU_OK )
 491              		.loc 1 776 19 is_stmt 0 view .LVU165
 492 001c 4046     		mov	r0, r8
 493 001e FFF7FEFF 		bl	imu_get_accel_xyz
 494              	.LVL39:
 777:../../../mod/sensor/sensor.c **** 						{
 495              		.loc 1 777 6 is_stmt 1 view .LVU166
 777:../../../mod/sensor/sensor.c **** 						{
 496              		.loc 1 777 9 is_stmt 0 view .LVU167
 497 0022 0028     		cmp	r0, #0
 498 0024 40F09C80 		bne	.L40
 781:../../../mod/sensor/sensor.c **** 					}
 499              		.loc 1 781 21 view .LVU168
 500 0028 4FF00109 		mov	r9, #1
 501              	.LVL40:
 781:../../../mod/sensor/sensor.c **** 					}
 502              		.loc 1 781 21 view .LVU169
 503 002c 5CE0     		b	.L37
 504              	.LVL41:
 505              	.L35:
 788:../../../mod/sensor/sensor.c **** 					{
 506              		.loc 1 788 5 is_stmt 1 view .LVU170
 788:../../../mod/sensor/sensor.c **** 					{
 507              		.loc 1 788 8 is_stmt 0 view .LVU171
 508 002e B9F1000F 		cmp	r9, #0
 509 0032 59D1     		bne	.L37
 790:../../../mod/sensor/sensor.c **** 					if ( imu_status != IMU_OK )
 510              		.loc 1 790 6 is_stmt 1 view .LVU172
 790:../../../mod/sensor/sensor.c **** 					if ( imu_status != IMU_OK )
 511              		.loc 1 790 19 is_stmt 0 view .LVU173
 512 0034 4046     		mov	r0, r8
 513 0036 FFF7FEFF 		bl	imu_get_accel_xyz
 514              	.LVL42:
 791:../../../mod/sensor/sensor.c **** 						{
 515              		.loc 1 791 6 is_stmt 1 view .LVU174
 791:../../../mod/sensor/sensor.c **** 						{
 516              		.loc 1 791 9 is_stmt 0 view .LVU175
 517 003a 0028     		cmp	r0, #0
 518 003c 40F09280 		bne	.L41
 795:../../../mod/sensor/sensor.c **** 					}
 519              		.loc 1 795 21 view .LVU176
 520 0040 4FF00109 		mov	r9, #1
 521              	.LVL43:
 795:../../../mod/sensor/sensor.c **** 					}
 522              		.loc 1 795 21 view .LVU177
 523 0044 50E0     		b	.L37
 524              	.LVL44:
 525              	.L34:
 802:../../../mod/sensor/sensor.c **** 					{
 526              		.loc 1 802 5 is_stmt 1 view .LVU178
 802:../../../mod/sensor/sensor.c **** 					{
 527              		.loc 1 802 8 is_stmt 0 view .LVU179
ARM GAS  C:\Users\tnguy\AppData\Local\Temp\cchyHwKV.s 			page 33


 528 0046 B9F1000F 		cmp	r9, #0
 529 004a 4DD1     		bne	.L37
 804:../../../mod/sensor/sensor.c **** 					if ( imu_status != IMU_OK )
 530              		.loc 1 804 6 is_stmt 1 view .LVU180
 804:../../../mod/sensor/sensor.c **** 					if ( imu_status != IMU_OK )
 531              		.loc 1 804 19 is_stmt 0 view .LVU181
 532 004c 4046     		mov	r0, r8
 533 004e FFF7FEFF 		bl	imu_get_accel_xyz
 534              	.LVL45:
 805:../../../mod/sensor/sensor.c **** 						{
 535              		.loc 1 805 6 is_stmt 1 view .LVU182
 805:../../../mod/sensor/sensor.c **** 						{
 536              		.loc 1 805 9 is_stmt 0 view .LVU183
 537 0052 0028     		cmp	r0, #0
 538 0054 40F08880 		bne	.L42
 809:../../../mod/sensor/sensor.c **** 					}
 539              		.loc 1 809 21 view .LVU184
 540 0058 4FF00109 		mov	r9, #1
 541              	.LVL46:
 809:../../../mod/sensor/sensor.c **** 					}
 542              		.loc 1 809 21 view .LVU185
 543 005c 44E0     		b	.L37
 544              	.LVL47:
 545              	.L33:
 816:../../../mod/sensor/sensor.c **** 					{
 546              		.loc 1 816 5 is_stmt 1 view .LVU186
 816:../../../mod/sensor/sensor.c **** 					{
 547              		.loc 1 816 8 is_stmt 0 view .LVU187
 548 005e BAF1000F 		cmp	r10, #0
 549 0062 41D1     		bne	.L37
 818:../../../mod/sensor/sensor.c **** 					if ( imu_status != IMU_OK )
 550              		.loc 1 818 6 is_stmt 1 view .LVU188
 818:../../../mod/sensor/sensor.c **** 					if ( imu_status != IMU_OK )
 551              		.loc 1 818 19 is_stmt 0 view .LVU189
 552 0064 4046     		mov	r0, r8
 553 0066 FFF7FEFF 		bl	imu_get_gyro_xyz
 554              	.LVL48:
 819:../../../mod/sensor/sensor.c **** 						{
 555              		.loc 1 819 6 is_stmt 1 view .LVU190
 819:../../../mod/sensor/sensor.c **** 						{
 556              		.loc 1 819 9 is_stmt 0 view .LVU191
 557 006a 0028     		cmp	r0, #0
 558 006c 7ED1     		bne	.L43
 823:../../../mod/sensor/sensor.c **** 					}
 559              		.loc 1 823 20 view .LVU192
 560 006e 4FF0010A 		mov	r10, #1
 561              	.LVL49:
 823:../../../mod/sensor/sensor.c **** 					}
 562              		.loc 1 823 20 view .LVU193
 563 0072 39E0     		b	.L37
 564              	.LVL50:
 565              	.L32:
 830:../../../mod/sensor/sensor.c **** 					{
 566              		.loc 1 830 5 is_stmt 1 view .LVU194
 830:../../../mod/sensor/sensor.c **** 					{
 567              		.loc 1 830 8 is_stmt 0 view .LVU195
 568 0074 BAF1000F 		cmp	r10, #0
ARM GAS  C:\Users\tnguy\AppData\Local\Temp\cchyHwKV.s 			page 34


 569 0078 36D1     		bne	.L37
 832:../../../mod/sensor/sensor.c **** 					if ( imu_status != IMU_OK )
 570              		.loc 1 832 6 is_stmt 1 view .LVU196
 832:../../../mod/sensor/sensor.c **** 					if ( imu_status != IMU_OK )
 571              		.loc 1 832 19 is_stmt 0 view .LVU197
 572 007a 4046     		mov	r0, r8
 573 007c FFF7FEFF 		bl	imu_get_gyro_xyz
 574              	.LVL51:
 833:../../../mod/sensor/sensor.c **** 						{
 575              		.loc 1 833 6 is_stmt 1 view .LVU198
 833:../../../mod/sensor/sensor.c **** 						{
 576              		.loc 1 833 9 is_stmt 0 view .LVU199
 577 0080 0028     		cmp	r0, #0
 578 0082 75D1     		bne	.L44
 837:../../../mod/sensor/sensor.c **** 					}
 579              		.loc 1 837 20 view .LVU200
 580 0084 4FF0010A 		mov	r10, #1
 581              	.LVL52:
 837:../../../mod/sensor/sensor.c **** 					}
 582              		.loc 1 837 20 view .LVU201
 583 0088 2EE0     		b	.L37
 584              	.LVL53:
 585              	.L31:
 844:../../../mod/sensor/sensor.c **** 					{
 586              		.loc 1 844 5 is_stmt 1 view .LVU202
 844:../../../mod/sensor/sensor.c **** 					{
 587              		.loc 1 844 8 is_stmt 0 view .LVU203
 588 008a BAF1000F 		cmp	r10, #0
 589 008e 2BD1     		bne	.L37
 846:../../../mod/sensor/sensor.c **** 					if ( imu_status != IMU_OK )
 590              		.loc 1 846 6 is_stmt 1 view .LVU204
 846:../../../mod/sensor/sensor.c **** 					if ( imu_status != IMU_OK )
 591              		.loc 1 846 19 is_stmt 0 view .LVU205
 592 0090 4046     		mov	r0, r8
 593 0092 FFF7FEFF 		bl	imu_get_gyro_xyz
 594              	.LVL54:
 847:../../../mod/sensor/sensor.c **** 						{
 595              		.loc 1 847 6 is_stmt 1 view .LVU206
 847:../../../mod/sensor/sensor.c **** 						{
 596              		.loc 1 847 9 is_stmt 0 view .LVU207
 597 0096 0028     		cmp	r0, #0
 598 0098 6CD1     		bne	.L45
 851:../../../mod/sensor/sensor.c **** 					}
 599              		.loc 1 851 20 view .LVU208
 600 009a 4FF0010A 		mov	r10, #1
 601              	.LVL55:
 851:../../../mod/sensor/sensor.c **** 					}
 602              		.loc 1 851 20 view .LVU209
 603 009e 23E0     		b	.L37
 604              	.LVL56:
 605              	.L30:
 858:../../../mod/sensor/sensor.c **** 					{
 606              		.loc 1 858 5 is_stmt 1 view .LVU210
 858:../../../mod/sensor/sensor.c **** 					{
 607              		.loc 1 858 8 is_stmt 0 view .LVU211
 608 00a0 BBF1000F 		cmp	fp, #0
 609 00a4 20D1     		bne	.L37
ARM GAS  C:\Users\tnguy\AppData\Local\Temp\cchyHwKV.s 			page 35


 860:../../../mod/sensor/sensor.c **** 					if ( imu_status != IMU_OK )
 610              		.loc 1 860 6 is_stmt 1 view .LVU212
 860:../../../mod/sensor/sensor.c **** 					if ( imu_status != IMU_OK )
 611              		.loc 1 860 19 is_stmt 0 view .LVU213
 612 00a6 4046     		mov	r0, r8
 613 00a8 FFF7FEFF 		bl	imu_get_mag_xyz
 614              	.LVL57:
 861:../../../mod/sensor/sensor.c **** 						{
 615              		.loc 1 861 6 is_stmt 1 view .LVU214
 861:../../../mod/sensor/sensor.c **** 						{
 616              		.loc 1 861 9 is_stmt 0 view .LVU215
 617 00ac 0028     		cmp	r0, #0
 618 00ae 63D1     		bne	.L46
 865:../../../mod/sensor/sensor.c **** 					}
 619              		.loc 1 865 19 view .LVU216
 620 00b0 4FF0010B 		mov	fp, #1
 621              	.LVL58:
 865:../../../mod/sensor/sensor.c **** 					}
 622              		.loc 1 865 19 view .LVU217
 623 00b4 18E0     		b	.L37
 624              	.LVL59:
 625              	.L29:
 872:../../../mod/sensor/sensor.c **** 					{
 626              		.loc 1 872 5 is_stmt 1 view .LVU218
 872:../../../mod/sensor/sensor.c **** 					{
 627              		.loc 1 872 8 is_stmt 0 view .LVU219
 628 00b6 BBF1000F 		cmp	fp, #0
 629 00ba 15D1     		bne	.L37
 874:../../../mod/sensor/sensor.c **** 					if ( imu_status != IMU_OK )
 630              		.loc 1 874 6 is_stmt 1 view .LVU220
 874:../../../mod/sensor/sensor.c **** 					if ( imu_status != IMU_OK )
 631              		.loc 1 874 19 is_stmt 0 view .LVU221
 632 00bc 4046     		mov	r0, r8
 633 00be FFF7FEFF 		bl	imu_get_mag_xyz
 634              	.LVL60:
 875:../../../mod/sensor/sensor.c **** 						{
 635              		.loc 1 875 6 is_stmt 1 view .LVU222
 875:../../../mod/sensor/sensor.c **** 						{
 636              		.loc 1 875 9 is_stmt 0 view .LVU223
 637 00c2 0028     		cmp	r0, #0
 638 00c4 5AD1     		bne	.L47
 879:../../../mod/sensor/sensor.c **** 					}
 639              		.loc 1 879 19 view .LVU224
 640 00c6 4FF0010B 		mov	fp, #1
 641              	.LVL61:
 879:../../../mod/sensor/sensor.c **** 					}
 642              		.loc 1 879 19 view .LVU225
 643 00ca 0DE0     		b	.L37
 644              	.LVL62:
 645              	.L28:
 886:../../../mod/sensor/sensor.c **** 					{
 646              		.loc 1 886 5 is_stmt 1 view .LVU226
 886:../../../mod/sensor/sensor.c **** 					{
 647              		.loc 1 886 8 is_stmt 0 view .LVU227
 648 00cc BBF1000F 		cmp	fp, #0
 649 00d0 0AD1     		bne	.L37
 888:../../../mod/sensor/sensor.c **** 					if ( imu_status != IMU_OK )
ARM GAS  C:\Users\tnguy\AppData\Local\Temp\cchyHwKV.s 			page 36


 650              		.loc 1 888 6 is_stmt 1 view .LVU228
 888:../../../mod/sensor/sensor.c **** 					if ( imu_status != IMU_OK )
 651              		.loc 1 888 19 is_stmt 0 view .LVU229
 652 00d2 4046     		mov	r0, r8
 653 00d4 FFF7FEFF 		bl	imu_get_mag_xyz
 654              	.LVL63:
 889:../../../mod/sensor/sensor.c **** 						{
 655              		.loc 1 889 6 is_stmt 1 view .LVU230
 889:../../../mod/sensor/sensor.c **** 						{
 656              		.loc 1 889 9 is_stmt 0 view .LVU231
 657 00d8 0028     		cmp	r0, #0
 658 00da 3CD1     		bne	.L23
 893:../../../mod/sensor/sensor.c **** 					}
 659              		.loc 1 893 19 view .LVU232
 660 00dc 4FF0010B 		mov	fp, #1
 661              	.LVL64:
 893:../../../mod/sensor/sensor.c **** 					}
 662              		.loc 1 893 19 view .LVU233
 663 00e0 02E0     		b	.L37
 664              	.LVL65:
 665              	.L27:
 900:../../../mod/sensor/sensor.c **** 				break;
 666              		.loc 1 900 5 is_stmt 1 view .LVU234
 900:../../../mod/sensor/sensor.c **** 				break;
 667              		.loc 1 900 38 is_stmt 0 view .LVU235
 668 00e2 0023     		movs	r3, #0
 669 00e4 A8F81230 		strh	r3, [r8, #18]	@ movhi
 901:../../../mod/sensor/sensor.c **** 				}
 670              		.loc 1 901 5 is_stmt 1 view .LVU236
 671              	.LVL66:
 672              	.L37:
1066:../../../mod/sensor/sensor.c **** 		sensor_id        = *(sensor_id_ptr   );
 673              		.loc 1 1066 3 discriminator 2 view .LVU237
1067:../../../mod/sensor/sensor.c **** 
 674              		.loc 1 1067 3 discriminator 2 view .LVU238
1067:../../../mod/sensor/sensor.c **** 
 675              		.loc 1 1067 20 is_stmt 0 discriminator 2 view .LVU239
 676 00e8 16F8015F 		ldrb	r5, [r6, #1]!	@ zero_extendqisi2
 677              	.LVL67:
 765:../../../mod/sensor/sensor.c **** 	{
 678              		.loc 1 765 35 is_stmt 1 discriminator 2 view .LVU240
 679 00ec 0134     		adds	r4, r4, #1
 680              	.LVL68:
 681              	.L22:
 765:../../../mod/sensor/sensor.c **** 	{
 682              		.loc 1 765 18 discriminator 1 view .LVU241
 765:../../../mod/sensor/sensor.c **** 	{
 683              		.loc 1 765 1 is_stmt 0 discriminator 1 view .LVU242
 684 00ee A742     		cmp	r7, r4
 685 00f0 30DD     		ble	.L50
 769:../../../mod/sensor/sensor.c **** 		{
 686              		.loc 1 769 2 is_stmt 1 view .LVU243
 687 00f2 0B2D     		cmp	r5, #11
 688 00f4 32D8     		bhi	.L39
 689 00f6 01A3     		adr	r3, .L25
 690 00f8 53F825F0 		ldr	pc, [r3, r5, lsl #2]
 691              		.p2align 2
ARM GAS  C:\Users\tnguy\AppData\Local\Temp\cchyHwKV.s 			page 37


 692              	.L25:
 693 00fc 17000000 		.word	.L36+1
 694 0100 2F000000 		.word	.L35+1
 695 0104 47000000 		.word	.L34+1
 696 0108 5F000000 		.word	.L33+1
 697 010c 75000000 		.word	.L32+1
 698 0110 8B000000 		.word	.L31+1
 699 0114 A1000000 		.word	.L30+1
 700 0118 B7000000 		.word	.L29+1
 701 011c CD000000 		.word	.L28+1
 702 0120 E3000000 		.word	.L27+1
 703 0124 2D010000 		.word	.L26+1
 704 0128 45010000 		.word	.L24+1
 705              		.p2align 1
 706              	.L26:
 908:../../../mod/sensor/sensor.c **** 				if ( baro_status != BARO_OK )
 707              		.loc 1 908 5 view .LVU244
 908:../../../mod/sensor/sensor.c **** 				if ( baro_status != BARO_OK )
 708              		.loc 1 908 19 is_stmt 0 view .LVU245
 709 012c 08F11800 		add	r0, r8, #24
 710 0130 FFF7FEFF 		bl	baro_get_temp
 711              	.LVL69:
 909:../../../mod/sensor/sensor.c **** 					{
 712              		.loc 1 909 5 is_stmt 1 view .LVU246
 909:../../../mod/sensor/sensor.c **** 					{
 713              		.loc 1 909 8 is_stmt 0 view .LVU247
 714 0134 78B9     		cbnz	r0, .L23
 913:../../../mod/sensor/sensor.c **** 				if ( baro_status != BARO_OK )
 715              		.loc 1 913 5 is_stmt 1 view .LVU248
 913:../../../mod/sensor/sensor.c **** 				if ( baro_status != BARO_OK )
 716              		.loc 1 913 19 is_stmt 0 view .LVU249
 717 0136 08F11400 		add	r0, r8, #20
 718              	.LVL70:
 913:../../../mod/sensor/sensor.c **** 				if ( baro_status != BARO_OK )
 719              		.loc 1 913 19 view .LVU250
 720 013a FFF7FEFF 		bl	baro_get_pressure
 721              	.LVL71:
 914:../../../mod/sensor/sensor.c **** 					{
 722              		.loc 1 914 5 is_stmt 1 view .LVU251
 914:../../../mod/sensor/sensor.c **** 					{
 723              		.loc 1 914 8 is_stmt 0 view .LVU252
 724 013e 0028     		cmp	r0, #0
 725 0140 D2D0     		beq	.L37
 726 0142 08E0     		b	.L23
 727              	.LVL72:
 728              	.L24:
 923:../../../mod/sensor/sensor.c **** 				if ( baro_status != BARO_OK )
 729              		.loc 1 923 5 is_stmt 1 view .LVU253
 923:../../../mod/sensor/sensor.c **** 				if ( baro_status != BARO_OK )
 730              		.loc 1 923 19 is_stmt 0 view .LVU254
 731 0144 08F11800 		add	r0, r8, #24
 732 0148 FFF7FEFF 		bl	baro_get_temp
 733              	.LVL73:
 924:../../../mod/sensor/sensor.c **** 					{
 734              		.loc 1 924 5 is_stmt 1 view .LVU255
 924:../../../mod/sensor/sensor.c **** 					{
 735              		.loc 1 924 8 is_stmt 0 view .LVU256
ARM GAS  C:\Users\tnguy\AppData\Local\Temp\cchyHwKV.s 			page 38


 736 014c 0028     		cmp	r0, #0
 737 014e CBD0     		beq	.L37
 926:../../../mod/sensor/sensor.c **** 					}
 738              		.loc 1 926 13 view .LVU257
 739 0150 0A25     		movs	r5, #10
 740              	.LVL74:
 926:../../../mod/sensor/sensor.c **** 					}
 741              		.loc 1 926 13 view .LVU258
 742 0152 00E0     		b	.L23
 743              	.LVL75:
 744              	.L50:
 926:../../../mod/sensor/sensor.c **** 					}
 745              		.loc 1 926 13 view .LVU259
 746              	.LBE4:
1071:../../../mod/sensor/sensor.c **** } /* sensor_poll */
 747              		.loc 1 1071 8 view .LVU260
 748 0154 0025     		movs	r5, #0
 749              	.LVL76:
 750              	.L23:
1072:../../../mod/sensor/sensor.c **** 
 751              		.loc 1 1072 1 view .LVU261
 752 0156 2846     		mov	r0, r5
 753 0158 BDE8F88F 		pop	{r3, r4, r5, r6, r7, r8, r9, r10, fp, pc}
 754              	.LVL77:
 755              	.L39:
 756              	.LBB5:
 769:../../../mod/sensor/sensor.c **** 		{
 757              		.loc 1 769 2 view .LVU262
 758 015c 0C25     		movs	r5, #12
 759              	.LVL78:
 769:../../../mod/sensor/sensor.c **** 		{
 760              		.loc 1 769 2 view .LVU263
 761 015e FAE7     		b	.L23
 762              	.LVL79:
 763              	.L40:
 779:../../../mod/sensor/sensor.c **** 						}
 764              		.loc 1 779 14 view .LVU264
 765 0160 0725     		movs	r5, #7
 766              	.LVL80:
 779:../../../mod/sensor/sensor.c **** 						}
 767              		.loc 1 779 14 view .LVU265
 768 0162 F8E7     		b	.L23
 769              	.LVL81:
 770              	.L41:
 793:../../../mod/sensor/sensor.c **** 						}
 771              		.loc 1 793 14 view .LVU266
 772 0164 0725     		movs	r5, #7
 773              	.LVL82:
 793:../../../mod/sensor/sensor.c **** 						}
 774              		.loc 1 793 14 view .LVU267
 775 0166 F6E7     		b	.L23
 776              	.LVL83:
 777              	.L42:
 807:../../../mod/sensor/sensor.c **** 						}
 778              		.loc 1 807 14 view .LVU268
 779 0168 0725     		movs	r5, #7
 780              	.LVL84:
ARM GAS  C:\Users\tnguy\AppData\Local\Temp\cchyHwKV.s 			page 39


 807:../../../mod/sensor/sensor.c **** 						}
 781              		.loc 1 807 14 view .LVU269
 782 016a F4E7     		b	.L23
 783              	.LVL85:
 784              	.L43:
 821:../../../mod/sensor/sensor.c **** 						}
 785              		.loc 1 821 14 view .LVU270
 786 016c 0825     		movs	r5, #8
 787              	.LVL86:
 821:../../../mod/sensor/sensor.c **** 						}
 788              		.loc 1 821 14 view .LVU271
 789 016e F2E7     		b	.L23
 790              	.LVL87:
 791              	.L44:
 835:../../../mod/sensor/sensor.c **** 						}
 792              		.loc 1 835 14 view .LVU272
 793 0170 0825     		movs	r5, #8
 794              	.LVL88:
 835:../../../mod/sensor/sensor.c **** 						}
 795              		.loc 1 835 14 view .LVU273
 796 0172 F0E7     		b	.L23
 797              	.LVL89:
 798              	.L45:
 849:../../../mod/sensor/sensor.c **** 						}
 799              		.loc 1 849 14 view .LVU274
 800 0174 0825     		movs	r5, #8
 801              	.LVL90:
 849:../../../mod/sensor/sensor.c **** 						}
 802              		.loc 1 849 14 view .LVU275
 803 0176 EEE7     		b	.L23
 804              	.LVL91:
 805              	.L46:
 863:../../../mod/sensor/sensor.c **** 						}
 806              		.loc 1 863 14 view .LVU276
 807 0178 0825     		movs	r5, #8
 808              	.LVL92:
 863:../../../mod/sensor/sensor.c **** 						}
 809              		.loc 1 863 14 view .LVU277
 810 017a ECE7     		b	.L23
 811              	.LVL93:
 812              	.L47:
 877:../../../mod/sensor/sensor.c **** 						}
 813              		.loc 1 877 14 view .LVU278
 814 017c 0825     		movs	r5, #8
 815              	.LVL94:
 877:../../../mod/sensor/sensor.c **** 						}
 816              		.loc 1 877 14 view .LVU279
 817 017e EAE7     		b	.L23
 818              	.LBE5:
 819              		.cfi_endproc
 820              	.LFE147:
 822              		.section	.text.sensor_cmd_execute,"ax",%progbits
 823              		.align	1
 824              		.global	sensor_cmd_execute
 825              		.syntax unified
 826              		.thumb
 827              		.thumb_func
ARM GAS  C:\Users\tnguy\AppData\Local\Temp\cchyHwKV.s 			page 40


 829              	sensor_cmd_execute:
 830              	.LVL95:
 831              	.LFB145:
 198:../../../mod/sensor/sensor.c **** 
 832              		.loc 1 198 1 is_stmt 1 view -0
 833              		.cfi_startproc
 834              		@ args = 0, pretend = 0, frame = 72
 835              		@ frame_needed = 0, uses_anonymous_args = 0
 198:../../../mod/sensor/sensor.c **** 
 836              		.loc 1 198 1 is_stmt 0 view .LVU281
 837 0000 30B5     		push	{r4, r5, lr}
 838              	.LCFI7:
 839              		.cfi_def_cfa_offset 12
 840              		.cfi_offset 4, -12
 841              		.cfi_offset 5, -8
 842              		.cfi_offset 14, -4
 843 0002 95B0     		sub	sp, sp, #84
 844              	.LCFI8:
 845              		.cfi_def_cfa_offset 96
 203:../../../mod/sensor/sensor.c ****                                                        subcommand function 
 846              		.loc 1 203 1 is_stmt 1 view .LVU282
 206:../../../mod/sensor/sensor.c **** SENSOR_DATA   sensor_data;                           /* Struct with all sensor 
 847              		.loc 1 206 1 view .LVU283
 207:../../../mod/sensor/sensor.c ****                                                         data                  */
 848              		.loc 1 207 1 view .LVU284
 209:../../../mod/sensor/sensor.c ****                                                        readouts               */
 849              		.loc 1 209 1 view .LVU285
 211:../../../mod/sensor/sensor.c **** uint8_t       num_sensors;                           /* Number of sensors to 
 850              		.loc 1 211 1 view .LVU286
 211:../../../mod/sensor/sensor.c **** uint8_t       num_sensors;                           /* Number of sensors to 
 851              		.loc 1 211 15 is_stmt 0 view .LVU287
 852 0004 1C23     		movs	r3, #28
 853 0006 8DF81730 		strb	r3, [sp, #23]
 212:../../../mod/sensor/sensor.c ****                                                         use for polling       */
 854              		.loc 1 212 1 is_stmt 1 view .LVU288
 214:../../../mod/sensor/sensor.c ****                                                         be polled             */
 855              		.loc 1 214 1 view .LVU289
 216:../../../mod/sensor/sensor.c ****                                                         sensor poll           */
 856              		.loc 1 216 1 view .LVU290
 225:../../../mod/sensor/sensor.c **** sensor_status   = SENSOR_OK;
 857              		.loc 1 225 1 view .LVU291
 858              	.LVL96:
 226:../../../mod/sensor/sensor.c **** #ifdef VALVE_CONTROLLER
 859              		.loc 1 226 1 view .LVU292
 230:../../../mod/sensor/sensor.c **** sensor_poll_cmd = 0;
 860              		.loc 1 230 1 view .LVU293
 230:../../../mod/sensor/sensor.c **** sensor_poll_cmd = 0;
 861              		.loc 1 230 17 is_stmt 0 view .LVU294
 862 000a 0023     		movs	r3, #0
 863 000c 8DF81630 		strb	r3, [sp, #22]
 231:../../../mod/sensor/sensor.c **** memset( &sensor_data_bytes[0], 0, sizeof( sensor_data_bytes ) );
 864              		.loc 1 231 1 is_stmt 1 view .LVU295
 231:../../../mod/sensor/sensor.c **** memset( &sensor_data_bytes[0], 0, sizeof( sensor_data_bytes ) );
 865              		.loc 1 231 17 is_stmt 0 view .LVU296
 866 0010 8DF80F30 		strb	r3, [sp, #15]
 232:../../../mod/sensor/sensor.c **** memset( &sensor_data         , 0, sizeof( sensor_data       ) );
 867              		.loc 1 232 1 is_stmt 1 view .LVU297
ARM GAS  C:\Users\tnguy\AppData\Local\Temp\cchyHwKV.s 			page 41


 868 0014 0693     		str	r3, [sp, #24]
 869 0016 0793     		str	r3, [sp, #28]
 870 0018 0893     		str	r3, [sp, #32]
 871 001a 0993     		str	r3, [sp, #36]
 872 001c 0A93     		str	r3, [sp, #40]
 873 001e 0B93     		str	r3, [sp, #44]
 874 0020 0C93     		str	r3, [sp, #48]
 233:../../../mod/sensor/sensor.c **** memset( &poll_sensors[0]     , 0, sizeof( poll_sensors      ) );
 875              		.loc 1 233 1 view .LVU298
 876 0022 0D93     		str	r3, [sp, #52]
 877 0024 0E93     		str	r3, [sp, #56]
 878 0026 0F93     		str	r3, [sp, #60]
 879 0028 1093     		str	r3, [sp, #64]
 880 002a 1193     		str	r3, [sp, #68]
 881 002c 1293     		str	r3, [sp, #72]
 882 002e 1393     		str	r3, [sp, #76]
 234:../../../mod/sensor/sensor.c **** 
 883              		.loc 1 234 1 view .LVU299
 884 0030 0493     		str	r3, [sp, #16]
 885 0032 8DF81430 		strb	r3, [sp, #20]
 240:../../../mod/sensor/sensor.c **** 	{
 886              		.loc 1 240 1 view .LVU300
 887 0036 0128     		cmp	r0, #1
 888 0038 59D0     		beq	.L52
 889 003a 0228     		cmp	r0, #2
 890 003c 77D1     		bne	.L61
 249:../../../mod/sensor/sensor.c **** 									sizeof( num_sensors ), 
 891              		.loc 1 249 4 view .LVU301
 249:../../../mod/sensor/sensor.c **** 									sizeof( num_sensors ), 
 892              		.loc 1 249 17 is_stmt 0 view .LVU302
 893 003e 0A22     		movs	r2, #10
 894 0040 0121     		movs	r1, #1
 895 0042 0DF11600 		add	r0, sp, #22
 896              	.LVL97:
 249:../../../mod/sensor/sensor.c **** 									sizeof( num_sensors ), 
 897              		.loc 1 249 17 view .LVU303
 898 0046 FFF7FEFF 		bl	usb_receive
 899              	.LVL98:
 252:../../../mod/sensor/sensor.c **** 				{
 900              		.loc 1 252 4 is_stmt 1 view .LVU304
 252:../../../mod/sensor/sensor.c **** 				{
 901              		.loc 1 252 7 is_stmt 0 view .LVU305
 902 004a 0028     		cmp	r0, #0
 903 004c 73D1     		bne	.L62
 281:../../../mod/sensor/sensor.c **** 									num_sensors     , 
 904              		.loc 1 281 4 is_stmt 1 view .LVU306
 281:../../../mod/sensor/sensor.c **** 									num_sensors     , 
 905              		.loc 1 281 17 is_stmt 0 view .LVU307
 906 004e 2822     		movs	r2, #40
 907 0050 9DF81610 		ldrb	r1, [sp, #22]	@ zero_extendqisi2
 908 0054 04A8     		add	r0, sp, #16
 909              	.LVL99:
 281:../../../mod/sensor/sensor.c **** 									num_sensors     , 
 910              		.loc 1 281 17 view .LVU308
 911 0056 FFF7FEFF 		bl	usb_receive
 912              	.LVL100:
 284:../../../mod/sensor/sensor.c **** 				{
ARM GAS  C:\Users\tnguy\AppData\Local\Temp\cchyHwKV.s 			page 42


 913              		.loc 1 284 4 is_stmt 1 view .LVU309
 284:../../../mod/sensor/sensor.c **** 				{
 914              		.loc 1 284 7 is_stmt 0 view .LVU310
 915 005a 0028     		cmp	r0, #0
 916 005c 6DD1     		bne	.L63
 313:../../../mod/sensor/sensor.c **** 									sizeof( sensor_poll_cmd ),
 917              		.loc 1 313 4 is_stmt 1 view .LVU311
 313:../../../mod/sensor/sensor.c **** 									sizeof( sensor_poll_cmd ),
 918              		.loc 1 313 17 is_stmt 0 view .LVU312
 919 005e 0A22     		movs	r2, #10
 920 0060 0121     		movs	r1, #1
 921 0062 0DF10F00 		add	r0, sp, #15
 922              	.LVL101:
 313:../../../mod/sensor/sensor.c **** 									sizeof( sensor_poll_cmd ),
 923              		.loc 1 313 17 view .LVU313
 924 0066 FFF7FEFF 		bl	usb_receive
 925              	.LVL102:
 316:../../../mod/sensor/sensor.c **** 				{
 926              		.loc 1 316 4 is_stmt 1 view .LVU314
 316:../../../mod/sensor/sensor.c **** 				{
 927              		.loc 1 316 12 is_stmt 0 view .LVU315
 928 006a 0446     		mov	r4, r0
 929 006c 0028     		cmp	r0, #0
 930 006e 66D1     		bne	.L64
 320:../../../mod/sensor/sensor.c **** 				{
 931              		.loc 1 320 9 is_stmt 1 view .LVU316
 320:../../../mod/sensor/sensor.c **** 				{
 932              		.loc 1 320 30 is_stmt 0 view .LVU317
 933 0070 9DF80F30 		ldrb	r3, [sp, #15]	@ zero_extendqisi2
 320:../../../mod/sensor/sensor.c **** 				{
 934              		.loc 1 320 12 view .LVU318
 935 0074 F32B     		cmp	r3, #243
 936 0076 64D1     		bne	.L70
 937              	.LVL103:
 938              	.L56:
 358:../../../mod/sensor/sensor.c **** 			{
 939              		.loc 1 358 9 is_stmt 1 view .LVU319
 358:../../../mod/sensor/sensor.c **** 			{
 940              		.loc 1 358 27 is_stmt 0 view .LVU320
 941 0078 9DF80F30 		ldrb	r3, [sp, #15]	@ zero_extendqisi2
 358:../../../mod/sensor/sensor.c **** 			{
 942              		.loc 1 358 9 view .LVU321
 943 007c 742B     		cmp	r3, #116
 944 007e 57D0     		beq	.L53
 362:../../../mod/sensor/sensor.c **** 										sizeof( sensor_poll_cmd ),
 945              		.loc 1 362 5 is_stmt 1 view .LVU322
 362:../../../mod/sensor/sensor.c **** 										sizeof( sensor_poll_cmd ),
 946              		.loc 1 362 18 is_stmt 0 view .LVU323
 947 0080 0A22     		movs	r2, #10
 948 0082 0121     		movs	r1, #1
 949 0084 0DF10F00 		add	r0, sp, #15
 950 0088 FFF7FEFF 		bl	usb_receive
 951              	.LVL104:
 365:../../../mod/sensor/sensor.c **** 					{
 952              		.loc 1 365 5 is_stmt 1 view .LVU324
 365:../../../mod/sensor/sensor.c **** 					{
 953              		.loc 1 365 8 is_stmt 0 view .LVU325
ARM GAS  C:\Users\tnguy\AppData\Local\Temp\cchyHwKV.s 			page 43


 954 008c 0028     		cmp	r0, #0
 955 008e 5AD1     		bne	.L66
 393:../../../mod/sensor/sensor.c **** 				{
 956              		.loc 1 393 4 is_stmt 1 view .LVU326
 957 0090 9DF80F30 		ldrb	r3, [sp, #15]	@ zero_extendqisi2
 958 0094 512B     		cmp	r3, #81
 959 0096 05D0     		beq	.L55
 960 0098 742B     		cmp	r3, #116
 961 009a EDD0     		beq	.L56
 962 009c 442B     		cmp	r3, #68
 963 009e 1BD0     		beq	.L57
 964 00a0 0F24     		movs	r4, #15
 965              	.LVL105:
 393:../../../mod/sensor/sensor.c **** 				{
 966              		.loc 1 393 4 is_stmt 0 view .LVU327
 967 00a2 45E0     		b	.L53
 968              	.LVL106:
 969              	.L55:
 399:../../../mod/sensor/sensor.c **** 												 &poll_sensors[0],
 970              		.loc 1 399 6 is_stmt 1 view .LVU328
 399:../../../mod/sensor/sensor.c **** 												 &poll_sensors[0],
 971              		.loc 1 399 22 is_stmt 0 view .LVU329
 972 00a4 9DF81620 		ldrb	r2, [sp, #22]	@ zero_extendqisi2
 973 00a8 04A9     		add	r1, sp, #16
 974 00aa 0DA8     		add	r0, sp, #52
 975              	.LVL107:
 399:../../../mod/sensor/sensor.c **** 												 &poll_sensors[0],
 976              		.loc 1 399 22 view .LVU330
 977 00ac FFF7FEFF 		bl	sensor_poll
 978              	.LVL108:
 402:../../../mod/sensor/sensor.c **** 						{
 979              		.loc 1 402 6 is_stmt 1 view .LVU331
 402:../../../mod/sensor/sensor.c **** 						{
 980              		.loc 1 402 9 is_stmt 0 view .LVU332
 981 00b0 0446     		mov	r4, r0
 982 00b2 0028     		cmp	r0, #0
 983 00b4 49D1     		bne	.L67
 409:../../../mod/sensor/sensor.c **** 						                      &poll_sensors[0],
 984              		.loc 1 409 7 is_stmt 1 view .LVU333
 985 00b6 0DF11703 		add	r3, sp, #23
 986 00ba 0093     		str	r3, [sp]
 987 00bc 06AB     		add	r3, sp, #24
 988 00be 9DF81620 		ldrb	r2, [sp, #22]	@ zero_extendqisi2
 989 00c2 04A9     		add	r1, sp, #16
 990 00c4 0DA8     		add	r0, sp, #52
 991              	.LVL109:
 409:../../../mod/sensor/sensor.c **** 						                      &poll_sensors[0],
 992              		.loc 1 409 7 is_stmt 0 view .LVU334
 993 00c6 FFF7FEFF 		bl	extract_sensor_bytes
 994              	.LVL110:
 416:../../../mod/sensor/sensor.c **** 						              num_sensor_bytes     ,
 995              		.loc 1 416 7 is_stmt 1 view .LVU335
 996 00ca 2822     		movs	r2, #40
 997 00cc 9DF81710 		ldrb	r1, [sp, #23]	@ zero_extendqisi2
 998 00d0 06A8     		add	r0, sp, #24
 999 00d2 FFF7FEFF 		bl	usb_transmit
 1000              	.LVL111:
ARM GAS  C:\Users\tnguy\AppData\Local\Temp\cchyHwKV.s 			page 44


 420:../../../mod/sensor/sensor.c **** 						}
 1001              		.loc 1 420 7 view .LVU336
 1002 00d6 CFE7     		b	.L56
 1003              	.LVL112:
 1004              	.L57:
 435:../../../mod/sensor/sensor.c **** 						{
 1005              		.loc 1 435 11 view .LVU337
 435:../../../mod/sensor/sensor.c **** 						{
 1006              		.loc 1 435 29 is_stmt 0 view .LVU338
 1007 00d8 9DF80F30 		ldrb	r3, [sp, #15]	@ zero_extendqisi2
 435:../../../mod/sensor/sensor.c **** 						{
 1008              		.loc 1 435 11 view .LVU339
 1009 00dc EF2B     		cmp	r3, #239
 1010 00de CBD0     		beq	.L56
 438:../../../mod/sensor/sensor.c **** 										sizeof( sensor_poll_cmd ),
 1011              		.loc 1 438 8 is_stmt 1 view .LVU340
 1012 00e0 0A22     		movs	r2, #10
 1013 00e2 0121     		movs	r1, #1
 1014 00e4 0DF10F00 		add	r0, sp, #15
 1015 00e8 FFF7FEFF 		bl	usb_receive
 1016              	.LVL113:
 1017 00ec F4E7     		b	.L57
 1018              	.LVL114:
 1019              	.L52:
 478:../../../mod/sensor/sensor.c **** 						sizeof( num_sensor_bytes ), 
 1020              		.loc 1 478 4 view .LVU341
 1021 00ee 0A22     		movs	r2, #10
 1022 00f0 0121     		movs	r1, #1
 1023 00f2 0DF11700 		add	r0, sp, #23
 1024              	.LVL115:
 478:../../../mod/sensor/sensor.c **** 						sizeof( num_sensor_bytes ), 
 1025              		.loc 1 478 4 is_stmt 0 view .LVU342
 1026 00f6 FFF7FEFF 		bl	usb_transmit
 1027              	.LVL116:
 497:../../../mod/sensor/sensor.c **** 
 1028              		.loc 1 497 6 is_stmt 1 view .LVU343
 497:../../../mod/sensor/sensor.c **** 
 1029              		.loc 1 497 22 is_stmt 0 view .LVU344
 1030 00fa 0DA8     		add	r0, sp, #52
 1031 00fc FFF7FEFF 		bl	sensor_dump
 1032              	.LVL117:
 1033 0100 0546     		mov	r5, r0
 1034              	.LVL118:
 500:../../../mod/sensor/sensor.c **** 
 1035              		.loc 1 500 3 is_stmt 1 view .LVU345
 1036 0102 0DF1180E 		add	lr, sp, #24
 1037 0106 0DF1340C 		add	ip, sp, #52
 1038 010a BCE80F00 		ldmia	ip!, {r0, r1, r2, r3}
 1039 010e AEE80F00 		stmia	lr!, {r0, r1, r2, r3}
 1040 0112 9CE80700 		ldm	ip, {r0, r1, r2}
 1041 0116 8EE80700 		stm	lr, {r0, r1, r2}
 503:../../../mod/sensor/sensor.c **** 			{
 1042              		.loc 1 503 3 view .LVU346
 503:../../../mod/sensor/sensor.c **** 			{
 1043              		.loc 1 503 6 is_stmt 0 view .LVU347
 1044 011a 2C46     		mov	r4, r5
 1045 011c 0DB1     		cbz	r5, .L71
ARM GAS  C:\Users\tnguy\AppData\Local\Temp\cchyHwKV.s 			page 45


 528:../../../mod/sensor/sensor.c ****             }
 1046              		.loc 1 528 10 view .LVU348
 1047 011e 1124     		movs	r4, #17
 1048 0120 06E0     		b	.L53
 1049              	.L71:
 506:../../../mod/sensor/sensor.c **** 							sizeof( sensor_data_bytes ), 
 1050              		.loc 1 506 5 is_stmt 1 view .LVU349
 1051 0122 2822     		movs	r2, #40
 1052 0124 1C21     		movs	r1, #28
 1053 0126 06A8     		add	r0, sp, #24
 1054 0128 FFF7FEFF 		bl	usb_transmit
 1055              	.LVL119:
 523:../../../mod/sensor/sensor.c ****             }
 1056              		.loc 1 523 4 view .LVU350
 523:../../../mod/sensor/sensor.c ****             }
 1057              		.loc 1 523 11 is_stmt 0 view .LVU351
 1058 012c 00E0     		b	.L53
 1059              	.LVL120:
 1060              	.L61:
 240:../../../mod/sensor/sensor.c **** 	{
 1061              		.loc 1 240 1 view .LVU352
 1062 012e 0124     		movs	r4, #1
 1063              	.LVL121:
 1064              	.L53:
 541:../../../mod/sensor/sensor.c **** 
 1065              		.loc 1 541 1 view .LVU353
 1066 0130 2046     		mov	r0, r4
 1067 0132 15B0     		add	sp, sp, #84
 1068              	.LCFI9:
 1069              		.cfi_remember_state
 1070              		.cfi_def_cfa_offset 12
 1071              		@ sp needed
 1072 0134 30BD     		pop	{r4, r5, pc}
 1073              	.LVL122:
 1074              	.L62:
 1075              	.LCFI10:
 1076              		.cfi_restore_state
 254:../../../mod/sensor/sensor.c **** 				}
 1077              		.loc 1 254 12 view .LVU354
 1078 0136 0B24     		movs	r4, #11
 1079 0138 FAE7     		b	.L53
 1080              	.L63:
 286:../../../mod/sensor/sensor.c **** 				}
 1081              		.loc 1 286 12 view .LVU355
 1082 013a 0B24     		movs	r4, #11
 1083 013c F8E7     		b	.L53
 1084              	.L64:
 318:../../../mod/sensor/sensor.c **** 				}
 1085              		.loc 1 318 12 view .LVU356
 1086 013e 0B24     		movs	r4, #11
 1087 0140 F6E7     		b	.L53
 1088              	.L70:
 323:../../../mod/sensor/sensor.c **** 				}
 1089              		.loc 1 323 12 view .LVU357
 1090 0142 0D24     		movs	r4, #13
 1091 0144 F4E7     		b	.L53
 1092              	.LVL123:
ARM GAS  C:\Users\tnguy\AppData\Local\Temp\cchyHwKV.s 			page 46


 1093              	.L66:
 367:../../../mod/sensor/sensor.c **** 					}
 1094              		.loc 1 367 13 view .LVU358
 1095 0146 0B24     		movs	r4, #11
 1096              	.LVL124:
 367:../../../mod/sensor/sensor.c **** 					}
 1097              		.loc 1 367 13 view .LVU359
 1098 0148 F2E7     		b	.L53
 1099              	.LVL125:
 1100              	.L67:
 404:../../../mod/sensor/sensor.c **** 						}
 1101              		.loc 1 404 14 view .LVU360
 1102 014a 0E24     		movs	r4, #14
 1103 014c F0E7     		b	.L53
 1104              		.cfi_endproc
 1105              	.LFE145:
 1107              		.section	.bss.sensor_size_offsets_table,"aw",%nobits
 1108              		.align	2
 1109              		.set	.LANCHOR0,. + 0
 1112              	sensor_size_offsets_table:
 1113 0000 00000000 		.space	96
 1113      00000000 
 1113      00000000 
 1113      00000000 
 1113      00000000 
 1114              		.text
 1115              	.Letext0:
 1116              		.file 2 "c:\\program files (x86)\\gnu arm embedded toolchain\\10 2021.10\\lib\\gcc\\arm-none-eabi\
 1117              		.file 3 "c:\\program files (x86)\\gnu arm embedded toolchain\\10 2021.10\\arm-none-eabi\\include\\
 1118              		.file 4 "c:\\program files (x86)\\gnu arm embedded toolchain\\10 2021.10\\arm-none-eabi\\include\\
 1119              		.file 5 "../../../mod/imu/imu.h"
 1120              		.file 6 "../../../mod/baro/baro.h"
 1121              		.file 7 "../../../mod/usb/usb.h"
 1122              		.file 8 "../../../mod/sensor/sensor.h"
 1123              		.file 9 "<built-in>"
ARM GAS  C:\Users\tnguy\AppData\Local\Temp\cchyHwKV.s 			page 47


DEFINED SYMBOLS
                            *ABS*:00000000 sensor.c
C:\Users\tnguy\AppData\Local\Temp\cchyHwKV.s:19     .text.sensor_map:00000000 $t
C:\Users\tnguy\AppData\Local\Temp\cchyHwKV.s:24     .text.sensor_map:00000000 sensor_map
C:\Users\tnguy\AppData\Local\Temp\cchyHwKV.s:64     .text.sensor_map:0000001c $d
C:\Users\tnguy\AppData\Local\Temp\cchyHwKV.s:69     .text.extract_sensor_bytes:00000000 $t
C:\Users\tnguy\AppData\Local\Temp\cchyHwKV.s:74     .text.extract_sensor_bytes:00000000 extract_sensor_bytes
C:\Users\tnguy\AppData\Local\Temp\cchyHwKV.s:192    .text.sensor_init:00000000 $t
C:\Users\tnguy\AppData\Local\Temp\cchyHwKV.s:198    .text.sensor_init:00000000 sensor_init
C:\Users\tnguy\AppData\Local\Temp\cchyHwKV.s:295    .text.sensor_init:0000005c $d
C:\Users\tnguy\AppData\Local\Temp\cchyHwKV.s:300    .text.sensor_dump:00000000 $t
C:\Users\tnguy\AppData\Local\Temp\cchyHwKV.s:306    .text.sensor_dump:00000000 sensor_dump
C:\Users\tnguy\AppData\Local\Temp\cchyHwKV.s:421    .text.sensor_poll:00000000 $t
C:\Users\tnguy\AppData\Local\Temp\cchyHwKV.s:427    .text.sensor_poll:00000000 sensor_poll
C:\Users\tnguy\AppData\Local\Temp\cchyHwKV.s:693    .text.sensor_poll:000000fc $d
C:\Users\tnguy\AppData\Local\Temp\cchyHwKV.s:705    .text.sensor_poll:0000012c $t
C:\Users\tnguy\AppData\Local\Temp\cchyHwKV.s:823    .text.sensor_cmd_execute:00000000 $t
C:\Users\tnguy\AppData\Local\Temp\cchyHwKV.s:829    .text.sensor_cmd_execute:00000000 sensor_cmd_execute
C:\Users\tnguy\AppData\Local\Temp\cchyHwKV.s:1108   .bss.sensor_size_offsets_table:00000000 $d
C:\Users\tnguy\AppData\Local\Temp\cchyHwKV.s:1112   .bss.sensor_size_offsets_table:00000000 sensor_size_offsets_table

UNDEFINED SYMBOLS
memcpy
imu_get_accel_xyz
imu_get_gyro_xyz
imu_get_mag_xyz
baro_get_temp
baro_get_pressure
usb_receive
usb_transmit
